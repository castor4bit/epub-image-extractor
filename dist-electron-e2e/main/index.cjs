"use strict";var Gd=Object.create;var aa=Object.defineProperty;var xd=Object.getOwnPropertyDescriptor;var Kd=Object.getOwnPropertyNames;var Bd=Object.getPrototypeOf,Hd=Object.prototype.hasOwnProperty;var Wd=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of Kd(t))!Hd.call(e,u)&&u!==r&&aa(e,u,{get:()=>t[u],enumerable:!(n=xd(t,u))||n.enumerable});return e};var Jd=(e,t,r)=>(r=e!=null?Gd(Bd(e)):{},Wd(t||!e||!e.__esModule?aa(r,"default",{value:e,enumerable:!0}):r,e));const ie=require("electron"),zt=require("path"),Lf=require("url"),Xd=require("node:os"),Yd=require("node:events"),Zd=require("fs"),Qd=require("events"),eh=require("util"),th=require("assert"),rh=require("worker_threads"),Ff=require("module"),nh=require("node:path"),sh=require("buffer"),ih=require("os"),Vf=require("fast-xml-parser"),oh=require("fs/promises"),ah=require("node:process"),Pe=require("node:util"),ch=require("node:fs"),uh=require("node:crypto"),lh=require("node:assert");var Tt=typeof document<"u"?document.currentScript:null;const Ee=e=>e&&e.__esModule?e:{default:e},Uf=Ee(ie),de=Ee(zt),fh=Ee(Lf),rr=Ee(Xd),dh=Ee(Yd),Ro=Ee(Zd),zf=Ee(Qd),hh=Ee(eh),Gf=Ee(th),xf=Ee(rh),mh=Ee(Ff),pe=Ee(nh),ph=Ee(sh),Po=Ee(ih),Te=Ee(oh),we=Ee(ah),ce=Ee(ch),xt=Ee(uh),yh=Ee(lh);var It=(e=>(e.EPUB_PARSE_ERROR="EPUB_PARSE_ERROR",e.EPUB_INVALID_FORMAT="EPUB_INVALID_FORMAT",e.EPUB_NO_IMAGES="EPUB_NO_IMAGES",e.FILE_NOT_FOUND="FILE_NOT_FOUND",e.FILE_ACCESS_DENIED="FILE_ACCESS_DENIED",e.FILE_WRITE_ERROR="FILE_WRITE_ERROR",e.DIRECTORY_CREATE_ERROR="DIRECTORY_CREATE_ERROR",e.RESOURCE_LIMIT_EXCEEDED="RESOURCE_LIMIT_EXCEEDED",e.MEMORY_LIMIT_EXCEEDED="MEMORY_LIMIT_EXCEEDED",e.IMAGE_SIZE_EXCEEDED="IMAGE_SIZE_EXCEEDED",e.PATH_TRAVERSAL_DETECTED="PATH_TRAVERSAL_DETECTED",e.INVALID_PATH="INVALID_PATH",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.PROCESSING_TIMEOUT="PROCESSING_TIMEOUT",e))(It||{});class He extends Error{code;userMessage;context;originalError;constructor(t,r,n,u,s){super(r),this.name="AppError",this.code=t,this.userMessage=n,this.context=u,this.originalError=s}}function gh(e){const t={EPUB_PARSE_ERROR:"EPUBファイルの解析に失敗しました",EPUB_INVALID_FORMAT:"EPUBファイルの形式が無効です",EPUB_NO_IMAGES:"EPUBファイルに画像が含まれていません",FILE_NOT_FOUND:"ファイルが見つかりません",FILE_ACCESS_DENIED:"ファイルへのアクセス権限がありません",FILE_WRITE_ERROR:"ファイルの書き込みに失敗しました",DIRECTORY_CREATE_ERROR:"ディレクトリの作成に失敗しました",RESOURCE_LIMIT_EXCEEDED:"リソース制限を超えました",MEMORY_LIMIT_EXCEEDED:"メモリ使用量が上限を超えました",IMAGE_SIZE_EXCEEDED:"画像サイズが上限を超えています",PATH_TRAVERSAL_DETECTED:"不正なパスが検出されました",INVALID_PATH:"無効なパスです",UNKNOWN_ERROR:"不明なエラーが発生しました",PROCESSING_TIMEOUT:"処理がタイムアウトしました"};return t[e]||t.UNKNOWN_ERROR}function vh(e,t,r){if(e instanceof He)return e;const n=e instanceof Error?e:new Error(String(e)),u=n.message;return u.includes("ENOENT")?new He("FILE_NOT_FOUND",u,"ファイルが見つかりません",r,n):u.includes("EACCES")?new He("FILE_ACCESS_DENIED",u,"ファイルへのアクセス権限がありません",r,n):new He(t,u,gh(t),r,n)}var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qe={exports:{}},Ps,ua;function Kf(){if(ua)return Ps;ua=1;const e=o=>o&&typeof o.message=="string",t=o=>{if(!o)return;const a=o.cause;if(typeof a=="function"){const l=o.cause();return e(l)?l:void 0}else return e(a)?a:void 0},r=(o,a)=>{if(!e(o))return"";const l=o.stack||"";if(a.has(o))return l+`
causes have become circular...`;const f=t(o);return f?(a.add(o),l+`
caused by: `+r(f,a)):l},n=o=>r(o,new Set),u=(o,a,l)=>{if(!e(o))return"";const f=l?"":o.message||"";if(a.has(o))return f+": ...";const i=t(o);if(i){a.add(o);const m=typeof o.cause=="function";return f+(m?"":": ")+u(i,a,m)}else return f};return Ps={isErrorLike:e,getErrorCause:t,stackWithCauses:n,messageWithCauses:o=>u(o,new Set)},Ps}var Os,la;function Bf(){if(la)return Os;la=1;const e=Symbol("circular-ref-tag"),t=Symbol("pino-raw-err-ref"),r=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[t]},set:function(n){this[t]=n}}});return Object.defineProperty(r,t,{writable:!0,value:{}}),Os={pinoErrProto:r,pinoErrorSymbols:{seen:e,rawSymbol:t}},Os}var Is,fa;function $h(){if(fa)return Is;fa=1,Is=a;const{messageWithCauses:e,stackWithCauses:t,isErrorLike:r}=Kf(),{pinoErrProto:n,pinoErrorSymbols:u}=Bf(),{seen:s}=u,{toString:o}=Object.prototype;function a(l){if(!r(l))return l;l[s]=void 0;const f=Object.create(n);f.type=o.call(l.constructor)==="[object Function]"?l.constructor.name:l.name,f.message=e(l),f.stack=t(l),Array.isArray(l.errors)&&(f.aggregateErrors=l.errors.map(i=>a(i)));for(const i in l)if(f[i]===void 0){const m=l[i];r(m)?i!=="cause"&&!Object.prototype.hasOwnProperty.call(m,s)&&(f[i]=a(m)):f[i]=m}return delete l[s],f.raw=l,f}return Is}var Ns,da;function _h(){if(da)return Ns;da=1,Ns=s;const{isErrorLike:e}=Kf(),{pinoErrProto:t,pinoErrorSymbols:r}=Bf(),{seen:n}=r,{toString:u}=Object.prototype;function s(o){if(!e(o))return o;o[n]=void 0;const a=Object.create(t);a.type=u.call(o.constructor)==="[object Function]"?o.constructor.name:o.name,a.message=o.message,a.stack=o.stack,Array.isArray(o.errors)&&(a.aggregateErrors=o.errors.map(l=>s(l))),e(o.cause)&&!Object.prototype.hasOwnProperty.call(o.cause,n)&&(a.cause=s(o.cause));for(const l in o)if(a[l]===void 0){const f=o[l];e(f)?Object.prototype.hasOwnProperty.call(f,n)||(a[l]=s(f)):a[l]=f}return delete o[n],a.raw=o,a}return Ns}var Ts,ha;function wh(){if(ha)return Ts;ha=1,Ts={mapHttpRequest:n,reqSerializer:r};const e=Symbol("pino-raw-req-ref"),t=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[e]},set:function(u){this[e]=u}}});Object.defineProperty(t,e,{writable:!0,value:{}});function r(u){const s=u.info||u.socket,o=Object.create(t);if(o.id=typeof u.id=="function"?u.id():u.id||(u.info?u.info.id:void 0),o.method=u.method,u.originalUrl)o.url=u.originalUrl;else{const a=u.path;o.url=typeof a=="string"?a:u.url?u.url.path||u.url:void 0}return u.query&&(o.query=u.query),u.params&&(o.params=u.params),o.headers=u.headers,o.remoteAddress=s&&s.remoteAddress,o.remotePort=s&&s.remotePort,o.raw=u.raw||u,o}function n(u){return{req:r(u)}}return Ts}var As,ma;function Eh(){if(ma)return As;ma=1,As={mapHttpResponse:n,resSerializer:r};const e=Symbol("pino-raw-res-ref"),t=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[e]},set:function(u){this[e]=u}}});Object.defineProperty(t,e,{writable:!0,value:{}});function r(u){const s=Object.create(t);return s.statusCode=u.headersSent?u.statusCode:null,s.headers=u.getHeaders?u.getHeaders():u._headers,s.raw=u,s}function n(u){return{res:r(u)}}return As}var js,pa;function Hf(){if(pa)return js;pa=1;const e=$h(),t=_h(),r=wh(),n=Eh();return js={err:e,errWithCause:t,mapHttpRequest:r.mapHttpRequest,mapHttpResponse:n.mapHttpResponse,req:r.reqSerializer,res:n.resSerializer,wrapErrorSerializer:function(s){return s===e?s:function(a){return s(e(a))}},wrapRequestSerializer:function(s){return s===r.reqSerializer?s:function(a){return s(r.reqSerializer(a))}},wrapResponseSerializer:function(s){return s===n.resSerializer?s:function(a){return s(n.resSerializer(a))}}},js}var Cs,ya;function Wf(){if(ya)return Cs;ya=1;function e(t,r){return r}return Cs=function(){const r=Error.prepareStackTrace;Error.prepareStackTrace=e;const n=new Error().stack;if(Error.prepareStackTrace=r,!Array.isArray(n))return;const u=n.slice(2),s=[];for(const o of u)o&&s.push(o.getFileName());return s},Cs}var ks,ga;function Sh(){if(ga)return ks;ga=1,ks=e;function e(t={}){const{ERR_PATHS_MUST_BE_STRINGS:r=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:n=u=>`fast-redact – Invalid path (${u})`}=t;return function({paths:s}){s.forEach(o=>{if(typeof o!="string")throw Error(r());try{if(/〇/.test(o))throw Error();const a=(o[0]==="["?"":".")+o.replace(/^\*/,"〇").replace(/\.\*/g,".〇").replace(/\[\*\]/g,"[〇]");if(/\n|\r|;/.test(a)||/\/\*/.test(a))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const 〇 = null;
            o${a}
            if ([o${a}].length !== 1) throw Error()`)()}catch{throw Error(n(o))}})}}return ks}var qs,va;function Co(){return va||(va=1,qs=/[^.[\]]+|\[((?:.)*?)\]/g),qs}var Ds,$a;function bh(){if($a)return Ds;$a=1;const e=Co();Ds=t;function t({paths:r}){const n=[];var u=0;const s=r.reduce(function(o,a,l){var f=a.match(e).map(v=>v.replace(/'|"|`/g,""));const i=a[0]==="[";f=f.map(v=>v[0]==="["?v.substr(1,v.length-2):v);const m=f.indexOf("*");if(m>-1){const v=f.slice(0,m),$=v.join("."),S=f.slice(m+1,f.length),y=S.length>0;u++,n.push({before:v,beforeStr:$,after:S,nested:y})}else o[a]={path:f,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(a),leadingBracket:i};return o},{});return{wildcards:n,wcLen:u,secret:s}}return Ds}var Ms,_a;function Rh(){if(_a)return Ms;_a=1;const e=Co();Ms=t;function t({secret:o,serialize:a,wcLen:l,strict:f,isCensorFct:i,censorFctTakesPath:m},v){const $=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${s(f,a)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${r(o,i,m)}
    this.compileRestore()
    ${n(l>0,i,m)}
    this.secret = originalSecret
    ${u(a)}
  `).bind(v);return $.state=v,a===!1&&($.restore=S=>v.restore(S)),$}function r(o,a,l){return Object.keys(o).map(f=>{const{escPath:i,leadingBracket:m,path:v}=o[f],$=m?1:0,S=m?"":".",y=[];for(var h;(h=e.exec(f))!==null;){const[,w]=h,{index:E,input:_}=h;E>$&&y.push(_.substring(0,E-(w?0:1)))}var p=y.map(w=>`o${S}${w}`).join(" && ");p.length===0?p+=`o${S}${f} != null`:p+=` && o${S}${f} != null`;const c=`
      switch (true) {
        ${y.reverse().map(w=>`
          case o${S}${w} === censor:
            secret[${i}].circle = ${JSON.stringify(w)}
            break
        `).join(`
`)}
      }
    `,d=l?`val, ${JSON.stringify(v)}`:"val";return`
      if (${p}) {
        const val = o${S}${f}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${S}${f} = ${a?`censor(${d})`:"censor"}
          ${c}
        }
      }
    `}).join(`
`)}function n(o,a,l){return o===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${a}, ${l})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${a}, ${l})
      }
    }
  `:""}function u(o){return o===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function s(o,a){return o===!0?"throw Error('fast-redact: primitives cannot be redacted')":a===!1?"return o":"return this.serialize(o)"}return Ms}var Ls,wa;function Jf(){if(wa)return Ls;wa=1,Ls={groupRedact:t,groupRestore:e,nestedRedact:n,nestedRestore:r};function e({keys:m,values:v,target:$}){if($==null||typeof $=="string")return;const S=m.length;for(var y=0;y<S;y++){const h=m[y];$[h]=v[y]}}function t(m,v,$,S,y){const h=o(m,v);if(h==null||typeof h=="string")return{keys:null,values:null,target:h,flat:!0};const p=Object.keys(h),c=p.length,d=v.length,w=y?[...v]:void 0,E=new Array(c);for(var _=0;_<c;_++){const R=p[_];E[_]=h[R],y?(w[d]=R,h[R]=$(h[R],w)):S?h[R]=$(h[R]):h[R]=$}return{keys:p,values:E,target:h,flat:!0}}function r(m){for(let v=0;v<m.length;v++){const{target:$,path:S,value:y}=m[v];let h=$;for(let p=S.length-1;p>0;p--)h=h[S[p]];h[S[0]]=y}}function n(m,v,$,S,y,h,p){const c=o(v,$);if(c==null)return;const d=Object.keys(c),w=d.length;for(var E=0;E<w;E++){const _=d[E];s(m,c,_,$,S,y,h,p)}return m}function u(m,v){return m!=null?"hasOwn"in Object?Object.hasOwn(m,v):Object.prototype.hasOwnProperty.call(m,v):!1}function s(m,v,$,S,y,h,p,c){const d=y.length,w=d-1,E=$;var _=-1,R,N,C,U=null,F,x,I=!1,A=0,V=0,L=l();if(C=R=v[$],typeof R=="object"){for(;R!=null&&++_<d&&(V+=1,$=y[_],!($!=="*"&&!U&&!(typeof R=="object"&&$ in R)));)if(!($==="*"&&(U==="*"&&(I=!0),U=$,_!==w))){if(U){const B=Object.keys(R);for(var K=0;K<B.length;K++){const G=B[K];if(x=R[G],F=$==="*",I)L=f(L,G,V),A=_,C=a(x,A-1,$,S,y,h,p,c,E,R,N,C,F,G,_,w,L,m,v[E],V+1);else if(F||typeof x=="object"&&x!==null&&$ in x){if(F?C=x:C=x[$],N=_!==w?C:p?c?h(C,[...S,E,...y]):h(C):h,F){const q=i(f(L,G,V),C,v[E]);m.push(q),R[G]=N}else if(x[$]!==N)if(N===void 0&&h!==void 0||u(x,$)&&N===C)L=f(L,G,V);else{L=f(L,G,V);const q=i(f(L,$,V+1),C,v[E]);m.push(q),x[$]=N}}}U=null}else{if(C=R[$],L=f(L,$,V),N=_!==w?C:p?c?h(C,[...S,E,...y]):h(C):h,!(u(R,$)&&N===C||N===void 0&&h!==void 0)){const B=i(L,C,v[E]);m.push(B),R[$]=N}R=R[$]}if(typeof R!="object")break}}}function o(m,v){for(var $=-1,S=v.length,y=m;y!=null&&++$<S;)y=y[v[$]];return y}function a(m,v,$,S,y,h,p,c,d,w,E,_,R,N,C,U,F,x,I,A){if(v===0&&(R||typeof m=="object"&&m!==null&&$ in m)){if(R?_=m:_=m[$],E=C!==U?_:p?c?h(_,[...S,d,...y]):h(_):h,R){const V=i(F,_,I);x.push(V),w[N]=E}else if(m[$]!==E){if(!(E===void 0&&h!==void 0||u(m,$)&&E===_)){const V=i(f(F,$,A+1),_,I);x.push(V),m[$]=E}}}for(const V in m)typeof m[V]=="object"&&(F=f(F,V,A),a(m[V],v-1,$,S,y,h,p,c,d,w,E,_,R,N,C,U,F,x,I,A+1))}function l(){return{parent:null,key:null,children:[],depth:0}}function f(m,v,$){if(m.depth===$)return f(m.parent,v,$);var S={parent:m,key:v,depth:$,children:[]};return m.children.push(S),S}function i(m,v,$){let S=m;const y=[];do y.push(S.key),S=S.parent;while(S.parent!=null);return{path:y,value:v,target:$}}return Ls}var Fs,Ea;function Ph(){if(Ea)return Fs;Ea=1;const{groupRestore:e,nestedRestore:t}=Jf();Fs=r;function r(){return function(){if(this.restore){this.restore.state.secret=this.secret;return}const{secret:o,wcLen:a}=this,l=Object.keys(o),f=n(o,l),i=a>0,m=i?{secret:o,groupRestore:e,nestedRestore:t}:{secret:o};this.restore=Function("o",u(f,l,i)).bind(m),this.restore.state=m}}function n(s,o){return o.map(a=>{const{circle:l,escPath:f,leadingBracket:i}=s[a],v=l?`o.${l} = secret[${f}].val`:`o${i?"":"."}${a} = secret[${f}].val`,$=`secret[${f}].val = undefined`;return`
      if (secret[${f}].val !== undefined) {
        try { ${v} } catch (e) {}
        ${$}
      }
    `}).join("")}function u(s,o,a){return`
    const secret = this.secret
    ${a===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${o.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${s}
    return o
  `}return Fs}var Vs,Sa;function Oh(){if(Sa)return Vs;Sa=1,Vs=e;function e(t){const{secret:r,censor:n,compileRestore:u,serialize:s,groupRedact:o,nestedRedact:a,wildcards:l,wcLen:f}=t,i=[{secret:r,censor:n,compileRestore:u}];return s!==!1&&i.push({serialize:s}),f>0&&i.push({groupRedact:o,nestedRedact:a,wildcards:l,wcLen:f}),Object.assign(...i)}return Vs}var Us,ba;function Ih(){if(ba)return Us;ba=1;const e=Sh(),t=bh(),r=Rh(),n=Ph(),{groupRedact:u,nestedRedact:s}=Jf(),o=Oh(),a=Co(),l=e(),f=v=>v;f.restore=f;const i="[REDACTED]";m.rx=a,m.validator=e,Us=m;function m(v={}){const $=Array.from(new Set(v.paths||[])),S="serialize"in v&&(v.serialize===!1||typeof v.serialize=="function")?v.serialize:JSON.stringify,y=v.remove;if(y===!0&&S!==JSON.stringify)throw Error("fast-redact – remove option may only be set when serializer is JSON.stringify");const h=y===!0?void 0:"censor"in v?v.censor:i,p=typeof h=="function",c=p&&h.length>1;if($.length===0)return S||f;l({paths:$,serialize:S,censor:h});const{wildcards:d,wcLen:w,secret:E}=t({paths:$,censor:h}),_=n(),R="strict"in v?v.strict:!0;return r({secret:E,wcLen:w,serialize:S,strict:R,isCensorFct:p,censorFctTakesPath:c},o({secret:E,censor:h,compileRestore:_,serialize:S,groupRedact:u,nestedRedact:s,wildcards:d,wcLen:w}))}return Us}var zs,Ra;function nr(){if(Ra)return zs;Ra=1;const e=Symbol("pino.setLevel"),t=Symbol("pino.getLevel"),r=Symbol("pino.levelVal"),n=Symbol("pino.levelComp"),u=Symbol("pino.useLevelLabels"),s=Symbol("pino.useOnlyCustomLevels"),o=Symbol("pino.mixin"),a=Symbol("pino.lsCache"),l=Symbol("pino.chindings"),f=Symbol("pino.asJson"),i=Symbol("pino.write"),m=Symbol("pino.redactFmt"),v=Symbol("pino.time"),$=Symbol("pino.timeSliceIndex"),S=Symbol("pino.stream"),y=Symbol("pino.stringify"),h=Symbol("pino.stringifySafe"),p=Symbol("pino.stringifiers"),c=Symbol("pino.end"),d=Symbol("pino.formatOpts"),w=Symbol("pino.messageKey"),E=Symbol("pino.errorKey"),_=Symbol("pino.nestedKey"),R=Symbol("pino.nestedKeyStr"),N=Symbol("pino.mixinMergeStrategy"),C=Symbol("pino.msgPrefix"),U=Symbol("pino.wildcardFirst"),F=Symbol.for("pino.serializers"),x=Symbol.for("pino.formatters"),I=Symbol.for("pino.hooks"),A=Symbol.for("pino.metadata");return zs={setLevelSym:e,getLevelSym:t,levelValSym:r,levelCompSym:n,useLevelLabelsSym:u,mixinSym:o,lsCacheSym:a,chindingsSym:l,asJsonSym:f,writeSym:i,serializersSym:F,redactFmtSym:m,timeSym:v,timeSliceIndexSym:$,streamSym:S,stringifySym:y,stringifySafeSym:h,stringifiersSym:p,endSym:c,formatOptsSym:d,messageKeySym:w,errorKeySym:E,nestedKeySym:_,wildcardFirstSym:U,needsMetadataGsym:A,useOnlyCustomLevelsSym:s,formattersSym:x,hooksSym:I,nestedKeyStrSym:R,mixinMergeStrategySym:N,msgPrefixSym:C},zs}var Gs,Pa;function Xf(){if(Pa)return Gs;Pa=1;const e=Ih(),{redactFmtSym:t,wildcardFirstSym:r}=nr(),{rx:n,validator:u}=e,s=u({ERR_PATHS_MUST_BE_STRINGS:()=>"pino – redacted paths must be strings",ERR_INVALID_PATH:i=>`pino – redact paths array contains an invalid path (${i})`}),o="[Redacted]",a=!1;function l(i,m){const{paths:v,censor:$}=f(i),S=v.reduce((p,c)=>{n.lastIndex=0;const d=n.exec(c),w=n.exec(c);let E=d[1]!==void 0?d[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):d[0];if(E==="*"&&(E=r),w===null)return p[E]=null,p;if(p[E]===null)return p;const{index:_}=w,R=`${c.substr(_,c.length-1)}`;return p[E]=p[E]||[],E!==r&&p[E].length===0&&p[E].push(...p[r]||[]),E===r&&Object.keys(p).forEach(function(N){p[N]&&p[N].push(R)}),p[E].push(R),p},{}),y={[t]:e({paths:v,censor:$,serialize:m,strict:a})},h=(...p)=>m(typeof $=="function"?$(...p):$);return[...Object.keys(S),...Object.getOwnPropertySymbols(S)].reduce((p,c)=>{if(S[c]===null)p[c]=d=>h(d,[c]);else{const d=typeof $=="function"?(w,E)=>$(w,[c,...E]):$;p[c]=e({paths:S[c],censor:d,serialize:m,strict:a})}return p},y)}function f(i){if(Array.isArray(i))return i={paths:i,censor:o},s(i),i;let{paths:m,censor:v=o,remove:$}=i;if(Array.isArray(m)===!1)throw Error("pino – redact must contain an array of strings");return $===!0&&(v=void 0),s({paths:m,censor:v}),{paths:m,censor:v}}return Gs=l,Gs}var xs,Oa;function Nh(){return Oa||(Oa=1,xs={nullTime:()=>"",epochTime:()=>`,"time":${Date.now()}`,unixTime:()=>`,"time":${Math.round(Date.now()/1e3)}`,isoTime:()=>`,"time":"${new Date(Date.now()).toISOString()}"`}),xs}var Ks,Ia;function Th(){if(Ia)return Ks;Ia=1;function e(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Ks=t;function t(r,n,u){var s=u&&u.stringify||e,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var l=new Array(a);l[0]=s(r);for(var f=1;f<a;f++)l[f]=s(n[f]);return l.join(" ")}if(typeof r!="string")return r;var i=n.length;if(i===0)return r;for(var m="",v=1-o,$=-1,S=r&&r.length||0,y=0;y<S;){if(r.charCodeAt(y)===37&&y+1<S){switch($=$>-1?$:0,r.charCodeAt(y+1)){case 100:case 102:if(v>=i||n[v]==null)break;$<y&&(m+=r.slice($,y)),m+=Number(n[v]),$=y+2,y++;break;case 105:if(v>=i||n[v]==null)break;$<y&&(m+=r.slice($,y)),m+=Math.floor(Number(n[v])),$=y+2,y++;break;case 79:case 111:case 106:if(v>=i||n[v]===void 0)break;$<y&&(m+=r.slice($,y));var h=typeof n[v];if(h==="string"){m+="'"+n[v]+"'",$=y+2,y++;break}if(h==="function"){m+=n[v].name||"<anonymous>",$=y+2,y++;break}m+=s(n[v]),$=y+2,y++;break;case 115:if(v>=i)break;$<y&&(m+=r.slice($,y)),m+=String(n[v]),$=y+2,y++;break;case 37:$<y&&(m+=r.slice($,y)),m+="%",$=y+2,y++,v--;break}++v}++y}return $===-1?r:($<S&&(m+=r.slice($)),m)}return Ks}var ur={exports:{}},Na;function Yf(){if(Na)return ur.exports;if(Na=1,typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))};const e=new Int32Array(new SharedArrayBuffer(4));ur.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")};ur.exports=e}return ur.exports}var Bs,Ta;function Ah(){if(Ta)return Bs;Ta=1;const e=Ro.default,t=zf.default,r=hh.default.inherits,n=de.default,u=Yf(),s=Gf.default,o=100,a=Buffer.allocUnsafe(0),l=16*1024,f="buffer",i="utf8",[m,v]=(process.versions.node||"0.0").split(".").map(Number),$=m>=22&&v>=7;function S(I,A){A._opening=!0,A._writing=!0,A._asyncDrainScheduled=!1;function V(B,G){if(B){A._reopening=!1,A._writing=!1,A._opening=!1,A.sync?process.nextTick(()=>{A.listenerCount("error")>0&&A.emit("error",B)}):A.emit("error",B);return}const q=A._reopening;A.fd=G,A.file=I,A._reopening=!1,A._opening=!1,A._writing=!1,A.sync?process.nextTick(()=>A.emit("ready")):A.emit("ready"),!A.destroyed&&(!A._writing&&A._len>A.minLength||A._flushPending?A._actualWrite():q&&process.nextTick(()=>A.emit("drain")))}const L=A.append?"a":"w",K=A.mode;if(A.sync)try{A.mkdir&&e.mkdirSync(n.dirname(I),{recursive:!0});const B=e.openSync(I,L,K);V(null,B)}catch(B){throw V(B),B}else A.mkdir?e.mkdir(n.dirname(I),{recursive:!0},B=>{if(B)return V(B);e.open(I,L,K,V)}):e.open(I,L,K,V)}function y(I){if(!(this instanceof y))return new y(I);let{fd:A,dest:V,minLength:L,maxLength:K,maxWrite:B,periodicFlush:G,sync:q,append:P=!0,mkdir:k,retryEAGAIN:O,fsync:g,contentMode:b,mode:M}=I||{};A=A||V,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(L||0,16387),this.file=null,this.destroyed=!1,this.minLength=L||0,this.maxLength=K||0,this.maxWrite=B||l,this._periodicFlush=G||0,this._periodicFlushTimer=void 0,this.sync=q||!1,this.writable=!0,this._fsync=g||!1,this.append=P||!1,this.mode=M,this.retryEAGAIN=O||(()=>!0),this.mkdir=k||!1;let H,W;if(b===f)this._writingBuf=a,this.write=w,this.flush=R,this.flushSync=C,this._actualWrite=F,H=()=>e.writeSync(this.fd,this._writingBuf),W=()=>e.write(this.fd,this._writingBuf,this.release);else if(b===void 0||b===i)this._writingBuf="",this.write=d,this.flush=_,this.flushSync=N,this._actualWrite=U,H=()=>e.writeSync(this.fd,this._writingBuf,"utf8"),W=()=>e.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${i}" and "${f}", but passed ${b}`);if(typeof A=="number")this.fd=A,process.nextTick(()=>this.emit("ready"));else if(typeof A=="string")S(A,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(X,Y)=>{if(X){if((X.code==="EAGAIN"||X.code==="EBUSY")&&this.retryEAGAIN(X,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{u(o),this.release(void 0,0)}catch(D){this.release(D)}else setTimeout(W,o);else this._writing=!1,this.emit("error",X);return}this.emit("write",Y);const T=h(this._writingBuf,this._len,Y);if(this._len=T.len,this._writingBuf=T.writingBuf,this._writingBuf.length){if(!this.sync){W();return}try{do{const D=H(),z=h(this._writingBuf,this._len,D);this._len=z.len,this._writingBuf=z.writingBuf}while(this._writingBuf.length)}catch(D){this.release(D);return}}this._fsync&&e.fsyncSync(this.fd);const j=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):j>this.minLength?this._actualWrite():this._ending?j>0?this._actualWrite():(this._writing=!1,x(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(p,this)):this.emit("drain"))},this.on("newListener",function(X){X==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function h(I,A,V){return typeof I=="string"&&Buffer.byteLength(I)!==V&&(V=Buffer.from(I).subarray(0,V).toString().length),A=Math.max(A-V,0),I=I.slice(V),{writingBuf:I,len:A}}function p(I){I.listenerCount("drain")>0&&(I._asyncDrainScheduled=!1,I.emit("drain"))}r(y,t);function c(I,A){return I.length===0?a:I.length===1?I[0]:Buffer.concat(I,A)}function d(I){if(this.destroyed)throw new Error("SonicBoom destroyed");const A=this._len+I.length,V=this._bufs;return this.maxLength&&A>this.maxLength?(this.emit("drop",I),this._len<this._hwm):(V.length===0||V[V.length-1].length+I.length>this.maxWrite?V.push(""+I):V[V.length-1]+=I,this._len=A,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function w(I){if(this.destroyed)throw new Error("SonicBoom destroyed");const A=this._len+I.length,V=this._bufs,L=this._lens;return this.maxLength&&A>this.maxLength?(this.emit("drop",I),this._len<this._hwm):(V.length===0||L[L.length-1]+I.length>this.maxWrite?(V.push([I]),L.push(I.length)):(V[V.length-1].push(I),L[L.length-1]+=I.length),this._len=A,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function E(I){this._flushPending=!0;const A=()=>{if(this._fsync)this._flushPending=!1,I();else try{e.fsync(this.fd,L=>{this._flushPending=!1,I(L)})}catch(L){I(L)}this.off("error",V)},V=L=>{this._flushPending=!1,I(L),this.off("drain",A)};this.once("drain",A),this.once("error",V)}function _(I){if(I!=null&&typeof I!="function")throw new Error("flush cb must be a function");if(this.destroyed){const A=new Error("SonicBoom destroyed");if(I){I(A);return}throw A}if(this.minLength<=0){I?.();return}I&&E.call(this,I),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function R(I){if(I!=null&&typeof I!="function")throw new Error("flush cb must be a function");if(this.destroyed){const A=new Error("SonicBoom destroyed");if(I){I(A);return}throw A}if(this.minLength<=0){I?.();return}I&&E.call(this,I),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}y.prototype.reopen=function(I){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(I)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(I&&(this.file=I),this._reopening=!0,this._writing)return;const A=this.fd;this.once("ready",()=>{A!==this.fd&&e.close(A,V=>{if(V)return this.emit("error",V)})}),S(this.file,this)},y.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():x(this)))};function N(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let I="";for(;this._bufs.length||I;){I.length<=0&&(I=this._bufs[0]);try{const A=e.writeSync(this.fd,I,"utf8"),V=h(I,this._len,A);I=V.writingBuf,this._len=V.len,I.length<=0&&this._bufs.shift()}catch(A){if((A.code==="EAGAIN"||A.code==="EBUSY")&&!this.retryEAGAIN(A,I.length,this._len-I.length))throw A;u(o)}}try{e.fsyncSync(this.fd)}catch{}}function C(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=a);let I=a;for(;this._bufs.length||I.length;){I.length<=0&&(I=c(this._bufs[0],this._lens[0]));try{const A=e.writeSync(this.fd,I);I=I.subarray(A),this._len=Math.max(this._len-A,0),I.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(A){if((A.code==="EAGAIN"||A.code==="EBUSY")&&!this.retryEAGAIN(A,I.length,this._len-I.length))throw A;u(o)}}}y.prototype.destroy=function(){this.destroyed||x(this)};function U(){const I=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{const A=e.writeSync(this.fd,this._writingBuf,"utf8");I(null,A)}catch(A){I(A)}else e.write(this.fd,this._writingBuf,"utf8",I)}function F(){const I=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:c(this._bufs.shift(),this._lens.shift()),this.sync)try{const A=e.writeSync(this.fd,this._writingBuf);I(null,A)}catch(A){I(A)}else $&&(this._writingBuf=Buffer.from(this._writingBuf)),e.write(this.fd,this._writingBuf,I)}function x(I){if(I.fd===-1){I.once("ready",x.bind(null,I));return}I._periodicFlushTimer!==void 0&&clearInterval(I._periodicFlushTimer),I.destroyed=!0,I._bufs=[],I._lens=[],s(typeof I.fd=="number",`sonic.fd must be a number, got ${typeof I.fd}`);try{e.fsync(I.fd,A)}catch{}function A(){I.fd!==1&&I.fd!==2?e.close(I.fd,V):V()}function V(L){if(L){I.emit("error",L);return}I._ending&&!I._writing&&I.emit("finish"),I.emit("close")}}return y.SonicBoom=y,y.default=y,Bs=y,Bs}var Hs,Aa;function Zf(){if(Aa)return Hs;Aa=1;const e={exit:[],beforeExit:[]},t={exit:o,beforeExit:a};let r;function n(){r===void 0&&(r=new FinalizationRegistry(f))}function u(S){e[S].length>0||process.on(S,t[S])}function s(S){e[S].length>0||(process.removeListener(S,t[S]),e.exit.length===0&&e.beforeExit.length===0&&(r=void 0))}function o(){l("exit")}function a(){l("beforeExit")}function l(S){for(const y of e[S]){const h=y.deref(),p=y.fn;h!==void 0&&p(h,S)}e[S]=[]}function f(S){for(const y of["exit","beforeExit"]){const h=e[y].indexOf(S);e[y].splice(h,h+1),s(y)}}function i(S,y,h){if(y===void 0)throw new Error("the object can't be undefined");u(S);const p=new WeakRef(y);p.fn=h,n(),r.register(y,p),e[S].push(p)}function m(S,y){i("exit",S,y)}function v(S,y){i("beforeExit",S,y)}function $(S){if(r!==void 0){r.unregister(S);for(const y of["exit","beforeExit"])e[y]=e[y].filter(h=>{const p=h.deref();return p&&p!==S}),s(y)}}return Hs={register:m,registerBeforeExit:v,unregister:$},Hs}const jh="3.1.0",Ch={version:jh};var Ws,ja;function kh(){if(ja)return Ws;ja=1;const e=1e3;function t(n,u,s,o,a){const l=Date.now()+o;let f=Atomics.load(n,u);if(f===s){a(null,"ok");return}let i=f;const m=v=>{Date.now()>l?a(null,"timed-out"):setTimeout(()=>{i=f,f=Atomics.load(n,u),f===i?m(v>=e?e:v*2):f===s?a(null,"ok"):a(null,"not-equal")},v)};m(1)}function r(n,u,s,o,a){const l=Date.now()+o;let f=Atomics.load(n,u);if(f!==s){a(null,"ok");return}const i=m=>{Date.now()>l?a(null,"timed-out"):setTimeout(()=>{f=Atomics.load(n,u),f!==s?a(null,"ok"):i(m>=e?e:m*2)},m)};i(1)}return Ws={wait:t,waitDiff:r},Ws}var Js,Ca;function qh(){return Ca||(Ca=1,Js={WRITE_INDEX:4,READ_INDEX:8}),Js}var Xs,ka;function Dh(){if(ka)return Xs;ka=1;const{version:e}=Ch,{EventEmitter:t}=zf.default,{Worker:r}=xf.default,{join:n}=de.default,{pathToFileURL:u}=fh.default,{wait:s}=kh(),{WRITE_INDEX:o,READ_INDEX:a}=qh(),l=ph.default,f=Gf.default,i=Symbol("kImpl"),m=l.constants.MAX_STRING_LENGTH;class v{constructor(A){this._value=A}deref(){return this._value}}class ${register(){}unregister(){}}const S=process.env.NODE_V8_COVERAGE?$:ca.FinalizationRegistry||$,y=process.env.NODE_V8_COVERAGE?v:ca.WeakRef||v,h=new S(I=>{I.exited||I.terminate()});function p(I,A){const{filename:V,workerData:L}=A,B=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||n(__dirname,"lib","worker.js"),G=new r(B,{...A.workerOpts,trackUnmanagedFds:!1,workerData:{filename:V.indexOf("file://")===0?V:u(V).href,dataBuf:I[i].dataBuf,stateBuf:I[i].stateBuf,workerData:{$context:{threadStreamVersion:e},...L}}});return G.stream=new v(I),G.on("message",w),G.on("exit",E),h.register(I,G),G}function c(I){f(!I[i].sync),I[i].needDrain&&(I[i].needDrain=!1,I.emit("drain"))}function d(I){const A=Atomics.load(I[i].state,o);let V=I[i].data.length-A;if(V>0){if(I[i].buf.length===0){I[i].flushing=!1,I[i].ending?U(I):I[i].needDrain&&process.nextTick(c,I);return}let L=I[i].buf.slice(0,V),K=Buffer.byteLength(L);K<=V?(I[i].buf=I[i].buf.slice(V),C(I,L,d.bind(null,I))):I.flush(()=>{if(!I.destroyed){for(Atomics.store(I[i].state,a,0),Atomics.store(I[i].state,o,0);K>I[i].data.length;)V=V/2,L=I[i].buf.slice(0,V),K=Buffer.byteLength(L);I[i].buf=I[i].buf.slice(V),C(I,L,d.bind(null,I))}})}else if(V===0){if(A===0&&I[i].buf.length===0)return;I.flush(()=>{Atomics.store(I[i].state,a,0),Atomics.store(I[i].state,o,0),d(I)})}else N(I,new Error("overwritten"))}function w(I){const A=this.stream.deref();if(A===void 0){this.exited=!0,this.terminate();return}switch(I.code){case"READY":this.stream=new y(A),A.flush(()=>{A[i].ready=!0,A.emit("ready")});break;case"ERROR":N(A,I.err);break;case"EVENT":Array.isArray(I.args)?A.emit(I.name,...I.args):A.emit(I.name,I.args);break;case"WARNING":process.emitWarning(I.err);break;default:N(A,new Error("this should not happen: "+I.code))}}function E(I){const A=this.stream.deref();A!==void 0&&(h.unregister(A),A.worker.exited=!0,A.worker.off("exit",E),N(A,I!==0?new Error("the worker thread exited"):null))}class _ extends t{constructor(A={}){if(super(),A.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[i]={},this[i].stateBuf=new SharedArrayBuffer(128),this[i].state=new Int32Array(this[i].stateBuf),this[i].dataBuf=new SharedArrayBuffer(A.bufferSize||4*1024*1024),this[i].data=Buffer.from(this[i].dataBuf),this[i].sync=A.sync||!1,this[i].ending=!1,this[i].ended=!1,this[i].needDrain=!1,this[i].destroyed=!1,this[i].flushing=!1,this[i].ready=!1,this[i].finished=!1,this[i].errored=null,this[i].closed=!1,this[i].buf="",this.worker=p(this,A),this.on("message",(V,L)=>{this.worker.postMessage(V,L)})}write(A){if(this[i].destroyed)return R(this,new Error("the worker has exited")),!1;if(this[i].ending)return R(this,new Error("the worker is ending")),!1;if(this[i].flushing&&this[i].buf.length+A.length>=m)try{F(this),this[i].flushing=!0}catch(V){return N(this,V),!1}if(this[i].buf+=A,this[i].sync)try{return F(this),!0}catch(V){return N(this,V),!1}return this[i].flushing||(this[i].flushing=!0,setImmediate(d,this)),this[i].needDrain=this[i].data.length-this[i].buf.length-Atomics.load(this[i].state,o)<=0,!this[i].needDrain}end(){this[i].destroyed||(this[i].ending=!0,U(this))}flush(A){if(this[i].destroyed){typeof A=="function"&&process.nextTick(A,new Error("the worker has exited"));return}const V=Atomics.load(this[i].state,o);s(this[i].state,a,V,1/0,(L,K)=>{if(L){N(this,L),process.nextTick(A,L);return}if(K==="not-equal"){this.flush(A);return}process.nextTick(A)})}flushSync(){this[i].destroyed||(F(this),x(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[i].ready}get destroyed(){return this[i].destroyed}get closed(){return this[i].closed}get writable(){return!this[i].destroyed&&!this[i].ending}get writableEnded(){return this[i].ending}get writableFinished(){return this[i].finished}get writableNeedDrain(){return this[i].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[i].errored}}function R(I,A){setImmediate(()=>{I.emit("error",A)})}function N(I,A){I[i].destroyed||(I[i].destroyed=!0,A&&(I[i].errored=A,R(I,A)),I.worker.exited?setImmediate(()=>{I[i].closed=!0,I.emit("close")}):I.worker.terminate().catch(()=>{}).then(()=>{I[i].closed=!0,I.emit("close")}))}function C(I,A,V){const L=Atomics.load(I[i].state,o),K=Buffer.byteLength(A);return I[i].data.write(A,L),Atomics.store(I[i].state,o,L+K),Atomics.notify(I[i].state,o),V(),!0}function U(I){if(!(I[i].ended||!I[i].ending||I[i].flushing)){I[i].ended=!0;try{I.flushSync();let A=Atomics.load(I[i].state,a);Atomics.store(I[i].state,o,-1),Atomics.notify(I[i].state,o);let V=0;for(;A!==-1;){if(Atomics.wait(I[i].state,a,A,1e3),A=Atomics.load(I[i].state,a),A===-2){N(I,new Error("end() failed"));return}if(++V===10){N(I,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{I[i].finished=!0,I.emit("finish")})}catch(A){N(I,A)}}}function F(I){const A=()=>{I[i].ending?U(I):I[i].needDrain&&process.nextTick(c,I)};for(I[i].flushing=!1;I[i].buf.length!==0;){const V=Atomics.load(I[i].state,o);let L=I[i].data.length-V;if(L===0){x(I),Atomics.store(I[i].state,a,0),Atomics.store(I[i].state,o,0);continue}else if(L<0)throw new Error("overwritten");let K=I[i].buf.slice(0,L),B=Buffer.byteLength(K);if(B<=L)I[i].buf=I[i].buf.slice(L),C(I,K,A);else{for(x(I),Atomics.store(I[i].state,a,0),Atomics.store(I[i].state,o,0);B>I[i].buf.length;)L=L/2,K=I[i].buf.slice(0,L),B=Buffer.byteLength(K);I[i].buf=I[i].buf.slice(L),C(I,K,A)}}}function x(I){if(I[i].flushing)throw new Error("unable to flush while flushing");const A=Atomics.load(I[i].state,o);let V=0;for(;;){const L=Atomics.load(I[i].state,a);if(L===-2)throw Error("_flushSync failed");if(L!==A)Atomics.wait(I[i].state,a,L,1e3);else break;if(++V===10)throw new Error("_flushSync took too long (10s)")}}return Xs=_,Xs}var Ys,qa;function Qf(){if(qa)return Ys;qa=1;const{createRequire:e}=mh.default,t=Wf(),{join:r,isAbsolute:n,sep:u}=pe.default,s=Yf(),o=Zf(),a=Dh();function l($){o.register($,i),o.registerBeforeExit($,m),$.on("close",function(){o.unregister($)})}function f($,S,y,h){const p=new a({filename:$,workerData:S,workerOpts:y,sync:h});p.on("ready",c),p.on("close",function(){process.removeListener("exit",d)}),process.on("exit",d);function c(){process.removeListener("exit",d),p.unref(),y.autoEnd!==!1&&l(p)}function d(){p.closed||(p.flushSync(),s(100),p.end())}return p}function i($){$.ref(),$.flushSync(),$.end(),$.once("close",function(){$.unref()})}function m($){$.flushSync()}function v($){const{pipeline:S,targets:y,levels:h,dedupe:p,worker:c={},caller:d=t(),sync:w=!1}=$,E={...$.options},_=typeof d=="string"?[d]:d,R="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{};let N=$.target;if(N&&y)throw new Error("only one of target or targets can be specified");return y?(N=R["pino-worker"]||r(__dirname,"worker.js"),E.targets=y.filter(U=>U.target).map(U=>({...U,target:C(U.target)})),E.pipelines=y.filter(U=>U.pipeline).map(U=>U.pipeline.map(F=>({...F,level:U.level,target:C(F.target)})))):S&&(N=R["pino-worker"]||r(__dirname,"worker.js"),E.pipelines=[S.map(U=>({...U,target:C(U.target)}))]),h&&(E.levels=h),p&&(E.dedupe=p),E.pinoWillSendConfig=!0,f(C(N),E,c,w);function C(U){if(U=R[U]||U,n(U)||U.indexOf("file://")===0)return U;if(U==="pino/file")return r(__dirname,"..","file.js");let F;for(const x of _)try{const I=x==="node:repl"?process.cwd()+u:x;F=e(I).resolve(U);break}catch{continue}if(!F)throw new Error(`unable to determine transport target for "${U}"`);return F}}return Ys=v,Ys}var Zs,Da;function ko(){if(Da)return Zs;Da=1;const e=Th(),{mapHttpRequest:t,mapHttpResponse:r}=Hf(),n=Ah(),u=Zf(),{lsCacheSym:s,chindingsSym:o,writeSym:a,serializersSym:l,formatOptsSym:f,endSym:i,stringifiersSym:m,stringifySym:v,stringifySafeSym:$,wildcardFirstSym:S,nestedKeySym:y,formattersSym:h,messageKeySym:p,errorKeySym:c,nestedKeyStrSym:d,msgPrefixSym:w}=nr(),{isMainThread:E}=xf.default,_=Qf();function R(){}function N(G,q){if(!q)return P;return function(...O){q.call(this,O,P,G)};function P(k,...O){if(typeof k=="object"){let g=k;k!==null&&(k.method&&k.headers&&k.socket?k=t(k):typeof k.setHeader=="function"&&(k=r(k)));let b;g===null&&O.length===0?b=[null]:(g=O.shift(),b=O),typeof this[w]=="string"&&g!==void 0&&g!==null&&(g=this[w]+g),this[a](k,e(g,b,this[f]),G)}else{let g=k===void 0?O.shift():k;typeof this[w]=="string"&&g!==void 0&&g!==null&&(g=this[w]+g),this[a](null,e(g,O,this[f]),G)}}}function C(G){let q="",P=0,k=!1,O=255;const g=G.length;if(g>100)return JSON.stringify(G);for(var b=0;b<g&&O>=32;b++)O=G.charCodeAt(b),(O===34||O===92)&&(q+=G.slice(P,b)+"\\",P=b,k=!0);return k?q+=G.slice(P):q=G,O<32?JSON.stringify(G):'"'+q+'"'}function U(G,q,P,k){const O=this[v],g=this[$],b=this[m],M=this[i],H=this[o],W=this[l],X=this[h],Y=this[p],T=this[c];let j=this[s][P]+k;j=j+H;let D;X.log&&(G=X.log(G));const z=b[S];let J="";for(const Q in G)if(D=G[Q],Object.prototype.hasOwnProperty.call(G,Q)&&D!==void 0){W[Q]?D=W[Q](D):Q===T&&W.err&&(D=W.err(D));const ae=b[Q]||z;switch(typeof D){case"undefined":case"function":continue;case"number":Number.isFinite(D)===!1&&(D=null);case"boolean":ae&&(D=ae(D));break;case"string":D=(ae||C)(D);break;default:D=(ae||O)(D,g)}if(D===void 0)continue;const te=C(Q);J+=","+te+":"+D}let Z="";if(q!==void 0){D=W[Y]?W[Y](q):q;const Q=b[Y]||z;switch(typeof D){case"function":break;case"number":Number.isFinite(D)===!1&&(D=null);case"boolean":Q&&(D=Q(D)),Z=',"'+Y+'":'+D;break;case"string":D=(Q||C)(D),Z=',"'+Y+'":'+D;break;default:D=(Q||O)(D,g),Z=',"'+Y+'":'+D}}return this[y]&&J?j+this[d]+J.slice(1)+"}"+Z+M:j+J+Z+M}function F(G,q){let P,k=G[o];const O=G[v],g=G[$],b=G[m],M=b[S],H=G[l],W=G[h].bindings;q=W(q);for(const X in q)if(P=q[X],(X!=="level"&&X!=="serializers"&&X!=="formatters"&&X!=="customLevels"&&q.hasOwnProperty(X)&&P!==void 0)===!0){if(P=H[X]?H[X](P):P,P=(b[X]||M||O)(P,g),P===void 0)continue;k+=',"'+X+'":'+P}return k}function x(G){return G.write!==G.constructor.prototype.write}function I(G){const q=new n(G);return q.on("error",P),!G.sync&&E&&(u.register(q,A),q.on("close",function(){u.unregister(q)})),q;function P(k){if(k.code==="EPIPE"){q.write=R,q.end=R,q.flushSync=R,q.destroy=R;return}q.removeListener("error",P),q.emit("error",k)}}function A(G,q){G.destroyed||(q==="beforeExit"?(G.flush(),G.on("drain",function(){G.end()})):G.flushSync())}function V(G){return function(P,k,O={},g){if(typeof O=="string")g=I({dest:O}),O={};else if(typeof g=="string"){if(O&&O.transport)throw Error("only one of option.transport or stream can be specified");g=I({dest:g})}else if(O instanceof n||O.writable||O._writableState)g=O,O={};else if(O.transport){if(O.transport instanceof n||O.transport.writable||O.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(O.transport.targets&&O.transport.targets.length&&O.formatters&&typeof O.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let H;O.customLevels&&(H=O.useOnlyCustomLevels?O.customLevels:Object.assign({},O.levels,O.customLevels)),g=_({caller:k,...O.transport,levels:H})}if(O=Object.assign({},G,O),O.serializers=Object.assign({},G.serializers,O.serializers),O.formatters=Object.assign({},G.formatters,O.formatters),O.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");const{enabled:b,onChild:M}=O;return b===!1&&(O.level="silent"),M||(O.onChild=R),g||(x(process.stdout)?g=process.stdout:g=I({fd:process.stdout.fd||1})),{opts:O,stream:g}}}function L(G,q){try{return JSON.stringify(G)}catch{try{return(q||this[$])(G)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function K(G,q,P){return{level:G,bindings:q,log:P}}function B(G){const q=Number(G);return typeof G=="string"&&Number.isFinite(q)?q:G===void 0?1:G}return Zs={noop:R,buildSafeSonicBoom:I,asChindings:F,asJson:U,genLog:N,createArgsNormalizer:V,stringify:L,buildFormatters:K,normalizeDestFileDescriptor:B},Zs}var Qs,Ma;function qo(){return Ma||(Ma=1,Qs={DEFAULT_LEVELS:{trace:10,debug:20,info:30,warn:40,error:50,fatal:60},SORTING_ORDER:{ASC:"ASC",DESC:"DESC"}}),Qs}var ei,La;function ed(){if(La)return ei;La=1;const{lsCacheSym:e,levelValSym:t,useOnlyCustomLevelsSym:r,streamSym:n,formattersSym:u,hooksSym:s,levelCompSym:o}=nr(),{noop:a,genLog:l}=ko(),{DEFAULT_LEVELS:f,SORTING_ORDER:i}=qo(),m={fatal:C=>{const U=l(f.fatal,C);return function(...F){const x=this[n];if(U.call(this,...F),typeof x.flushSync=="function")try{x.flushSync()}catch{}}},error:C=>l(f.error,C),warn:C=>l(f.warn,C),info:C=>l(f.info,C),debug:C=>l(f.debug,C),trace:C=>l(f.trace,C)},v=Object.keys(f).reduce((C,U)=>(C[f[U]]=U,C),{}),$=Object.keys(v).reduce((C,U)=>(C[U]='{"level":'+Number(U),C),{});function S(C){const U=C[u].level,{labels:F}=C.levels,x={};for(const I in F){const A=U(F[I],Number(I));x[I]=JSON.stringify(A).slice(0,-1)}return C[e]=x,C}function y(C,U){if(U)return!1;switch(C){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function h(C){const{labels:U,values:F}=this.levels;if(typeof C=="number"){if(U[C]===void 0)throw Error("unknown level value"+C);C=U[C]}if(F[C]===void 0)throw Error("unknown level "+C);const x=this[t],I=this[t]=F[C],A=this[r],V=this[o],L=this[s].logMethod;for(const K in F){if(V(F[K],I)===!1){this[K]=a;continue}this[K]=y(K,A)?m[K](L):l(F[K],L)}this.emit("level-change",C,I,U[x],x,this)}function p(C){const{levels:U,levelVal:F}=this;return U&&U.labels?U.labels[F]:""}function c(C){const{values:U}=this.levels,F=U[C];return F!==void 0&&this[o](F,this[t])}function d(C,U,F){return C===i.DESC?U<=F:U>=F}function w(C){return typeof C=="string"?d.bind(null,C):C}function E(C=null,U=!1){const F=C?Object.keys(C).reduce((A,V)=>(A[C[V]]=V,A),{}):null,x=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),U?null:v,F),I=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),U?null:f,C);return{labels:x,values:I}}function _(C,U,F){if(typeof C=="number"){if(![].concat(Object.keys(U||{}).map(A=>U[A]),F?[]:Object.keys(v).map(A=>+A),1/0).includes(C))throw Error(`default level:${C} must be included in custom levels`);return}const x=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),F?null:f,U);if(!(C in x))throw Error(`default level:${C} must be included in custom levels`)}function R(C,U){const{labels:F,values:x}=C;for(const I in U){if(I in x)throw Error("levels cannot be overridden");if(U[I]in F)throw Error("pre-existing level values cannot be used for new levels")}}function N(C){if(typeof C!="function"&&!(typeof C=="string"&&Object.values(i).includes(C)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}return ei={initialLsCache:$,genLsCache:S,levelMethods:m,getLevel:p,setLevel:h,isLevelEnabled:c,mappings:E,assertNoLevelCollisions:R,assertDefaultLevelFound:_,genLevelComparison:w,assertLevelComparison:N},ei}var ti,Fa;function td(){return Fa||(Fa=1,ti={version:"9.7.0"}),ti}var ri,Va;function Mh(){if(Va)return ri;Va=1;const{EventEmitter:e}=dh.default,{lsCacheSym:t,levelValSym:r,setLevelSym:n,getLevelSym:u,chindingsSym:s,parsedChindingsSym:o,mixinSym:a,asJsonSym:l,writeSym:f,mixinMergeStrategySym:i,timeSym:m,timeSliceIndexSym:v,streamSym:$,serializersSym:S,formattersSym:y,errorKeySym:h,messageKeySym:p,useOnlyCustomLevelsSym:c,needsMetadataGsym:d,redactFmtSym:w,stringifySym:E,formatOptsSym:_,stringifiersSym:R,msgPrefixSym:N,hooksSym:C}=nr(),{getLevel:U,setLevel:F,isLevelEnabled:x,mappings:I,initialLsCache:A,genLsCache:V,assertNoLevelCollisions:L}=ed(),{asChindings:K,asJson:B,buildFormatters:G,stringify:q}=ko(),{version:P}=td(),k=Xf(),g={constructor:class{},child:M,bindings:H,setBindings:W,flush:j,isLevelEnabled:x,version:P,get level(){return this[u]()},set level(D){this[n](D)},get levelVal(){return this[r]},set levelVal(D){throw Error("levelVal is read-only")},[t]:A,[f]:Y,[l]:B,[u]:U,[n]:F};Object.setPrototypeOf(g,e.prototype),ri=function(){return Object.create(g)};const b=D=>D;function M(D,z){if(!D)throw Error("missing bindings for child Pino");z=z||{};const J=this[S],Z=this[y],Q=Object.create(this);if(z.hasOwnProperty("serializers")===!0){Q[S]=Object.create(null);for(const re in J)Q[S][re]=J[re];const ee=Object.getOwnPropertySymbols(J);for(var ae=0;ae<ee.length;ae++){const re=ee[ae];Q[S][re]=J[re]}for(const re in z.serializers)Q[S][re]=z.serializers[re];const ve=Object.getOwnPropertySymbols(z.serializers);for(var te=0;te<ve.length;te++){const re=ve[te];Q[S][re]=z.serializers[re]}}else Q[S]=J;if(z.hasOwnProperty("formatters")){const{level:ee,bindings:ve,log:re}=z.formatters;Q[y]=G(ee||Z.level,ve||b,re||Z.log)}else Q[y]=G(Z.level,b,Z.log);if(z.hasOwnProperty("customLevels")===!0&&(L(this.levels,z.customLevels),Q.levels=I(z.customLevels,Q[c]),V(Q)),typeof z.redact=="object"&&z.redact!==null||Array.isArray(z.redact)){Q.redact=z.redact;const ee=k(Q.redact,q),ve={stringify:ee[w]};Q[E]=q,Q[R]=ee,Q[_]=ve}typeof z.msgPrefix=="string"&&(Q[N]=(this[N]||"")+z.msgPrefix),Q[s]=K(Q,D);const se=z.level||this.level;return Q[n](se),this.onChild(Q),Q}function H(){const z=`{${this[s].substr(1)}}`,J=JSON.parse(z);return delete J.pid,delete J.hostname,J}function W(D){const z=K(this,D);this[s]=z,delete this[o]}function X(D,z){return Object.assign(z,D)}function Y(D,z,J){const Z=this[m](),Q=this[a],ae=this[h],te=this[p],se=this[i]||X;let ee;const ve=this[C].streamWrite;D==null?ee={}:D instanceof Error?(ee={[ae]:D},z===void 0&&(z=D.message)):(ee=D,z===void 0&&D[te]===void 0&&D[ae]&&(z=D[ae].message)),Q&&(ee=se(ee,Q(ee,J,this)));const re=this[l](ee,z,J,Z),Se=this[$];Se[d]===!0&&(Se.lastLevel=J,Se.lastObj=ee,Se.lastMsg=z,Se.lastTime=Z.slice(this[v]),Se.lastLogger=this),Se.write(ve?ve(re):re)}function T(){}function j(D){if(D!=null&&typeof D!="function")throw Error("callback must be a function");const z=this[$];typeof z.flush=="function"?z.flush(D||T):D&&D()}return ri}var lr={exports:{}},Ua;function Lh(){return Ua||(Ua=1,function(e,t){const{hasOwnProperty:r}=Object.prototype,n=p();n.configure=p,n.stringify=n,n.default=n,t.stringify=n,t.configure=p,e.exports=n;const u=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function s(c){return c.length<5e3&&!u.test(c)?`"${c}"`:JSON.stringify(c)}function o(c,d){if(c.length>200||d)return c.sort(d);for(let w=1;w<c.length;w++){const E=c[w];let _=w;for(;_!==0&&c[_-1]>E;)c[_]=c[_-1],_--;c[_]=E}return c}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(c){return a.call(c)!==void 0&&c.length!==0}function f(c,d,w){c.length<w&&(w=c.length);const E=d===","?"":" ";let _=`"0":${E}${c[0]}`;for(let R=1;R<w;R++)_+=`${d}"${R}":${E}${c[R]}`;return _}function i(c){if(r.call(c,"circularValue")){const d=c.circularValue;if(typeof d=="string")return`"${d}"`;if(d==null)return d;if(d===Error||d===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function m(c){let d;if(r.call(c,"deterministic")&&(d=c.deterministic,typeof d!="boolean"&&typeof d!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return d===void 0?!0:d}function v(c,d){let w;if(r.call(c,d)&&(w=c[d],typeof w!="boolean"))throw new TypeError(`The "${d}" argument must be of type boolean`);return w===void 0?!0:w}function $(c,d){let w;if(r.call(c,d)){if(w=c[d],typeof w!="number")throw new TypeError(`The "${d}" argument must be of type number`);if(!Number.isInteger(w))throw new TypeError(`The "${d}" argument must be an integer`);if(w<1)throw new RangeError(`The "${d}" argument must be >= 1`)}return w===void 0?1/0:w}function S(c){return c===1?"1 item":`${c} items`}function y(c){const d=new Set;for(const w of c)(typeof w=="string"||typeof w=="number")&&d.add(String(w));return d}function h(c){if(r.call(c,"strict")){const d=c.strict;if(typeof d!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(d)return w=>{let E=`Object can not safely be stringified. Received type ${typeof w}`;throw typeof w!="function"&&(E+=` (${w.toString()})`),new Error(E)}}}function p(c){c={...c};const d=h(c);d&&(c.bigint===void 0&&(c.bigint=!1),"circularValue"in c||(c.circularValue=Error));const w=i(c),E=v(c,"bigint"),_=m(c),R=typeof _=="function"?_:void 0,N=$(c,"maximumDepth"),C=$(c,"maximumBreadth");function U(V,L,K,B,G,q){let P=L[V];switch(typeof P=="object"&&P!==null&&typeof P.toJSON=="function"&&(P=P.toJSON(V)),P=B.call(L,V,P),typeof P){case"string":return s(P);case"object":{if(P===null)return"null";if(K.indexOf(P)!==-1)return w;let k="",O=",";const g=q;if(Array.isArray(P)){if(P.length===0)return"[]";if(N<K.length+1)return'"[Array]"';K.push(P),G!==""&&(q+=G,k+=`
${q}`,O=`,
${q}`);const Y=Math.min(P.length,C);let T=0;for(;T<Y-1;T++){const D=U(String(T),P,K,B,G,q);k+=D!==void 0?D:"null",k+=O}const j=U(String(T),P,K,B,G,q);if(k+=j!==void 0?j:"null",P.length-1>C){const D=P.length-C-1;k+=`${O}"... ${S(D)} not stringified"`}return G!==""&&(k+=`
${g}`),K.pop(),`[${k}]`}let b=Object.keys(P);const M=b.length;if(M===0)return"{}";if(N<K.length+1)return'"[Object]"';let H="",W="";G!==""&&(q+=G,O=`,
${q}`,H=" ");const X=Math.min(M,C);_&&!l(P)&&(b=o(b,R)),K.push(P);for(let Y=0;Y<X;Y++){const T=b[Y],j=U(T,P,K,B,G,q);j!==void 0&&(k+=`${W}${s(T)}:${H}${j}`,W=O)}if(M>C){const Y=M-C;k+=`${W}"...":${H}"${S(Y)} not stringified"`,W=O}return G!==""&&W.length>1&&(k=`
${q}${k}
${g}`),K.pop(),`{${k}}`}case"number":return isFinite(P)?String(P):d?d(P):"null";case"boolean":return P===!0?"true":"false";case"undefined":return;case"bigint":if(E)return String(P);default:return d?d(P):void 0}}function F(V,L,K,B,G,q){switch(typeof L=="object"&&L!==null&&typeof L.toJSON=="function"&&(L=L.toJSON(V)),typeof L){case"string":return s(L);case"object":{if(L===null)return"null";if(K.indexOf(L)!==-1)return w;const P=q;let k="",O=",";if(Array.isArray(L)){if(L.length===0)return"[]";if(N<K.length+1)return'"[Array]"';K.push(L),G!==""&&(q+=G,k+=`
${q}`,O=`,
${q}`);const M=Math.min(L.length,C);let H=0;for(;H<M-1;H++){const X=F(String(H),L[H],K,B,G,q);k+=X!==void 0?X:"null",k+=O}const W=F(String(H),L[H],K,B,G,q);if(k+=W!==void 0?W:"null",L.length-1>C){const X=L.length-C-1;k+=`${O}"... ${S(X)} not stringified"`}return G!==""&&(k+=`
${P}`),K.pop(),`[${k}]`}K.push(L);let g="";G!==""&&(q+=G,O=`,
${q}`,g=" ");let b="";for(const M of B){const H=F(M,L[M],K,B,G,q);H!==void 0&&(k+=`${b}${s(M)}:${g}${H}`,b=O)}return G!==""&&b.length>1&&(k=`
${q}${k}
${P}`),K.pop(),`{${k}}`}case"number":return isFinite(L)?String(L):d?d(L):"null";case"boolean":return L===!0?"true":"false";case"undefined":return;case"bigint":if(E)return String(L);default:return d?d(L):void 0}}function x(V,L,K,B,G){switch(typeof L){case"string":return s(L);case"object":{if(L===null)return"null";if(typeof L.toJSON=="function"){if(L=L.toJSON(V),typeof L!="object")return x(V,L,K,B,G);if(L===null)return"null"}if(K.indexOf(L)!==-1)return w;const q=G;if(Array.isArray(L)){if(L.length===0)return"[]";if(N<K.length+1)return'"[Array]"';K.push(L),G+=B;let H=`
${G}`;const W=`,
${G}`,X=Math.min(L.length,C);let Y=0;for(;Y<X-1;Y++){const j=x(String(Y),L[Y],K,B,G);H+=j!==void 0?j:"null",H+=W}const T=x(String(Y),L[Y],K,B,G);if(H+=T!==void 0?T:"null",L.length-1>C){const j=L.length-C-1;H+=`${W}"... ${S(j)} not stringified"`}return H+=`
${q}`,K.pop(),`[${H}]`}let P=Object.keys(L);const k=P.length;if(k===0)return"{}";if(N<K.length+1)return'"[Object]"';G+=B;const O=`,
${G}`;let g="",b="",M=Math.min(k,C);l(L)&&(g+=f(L,O,C),P=P.slice(L.length),M-=L.length,b=O),_&&(P=o(P,R)),K.push(L);for(let H=0;H<M;H++){const W=P[H],X=x(W,L[W],K,B,G);X!==void 0&&(g+=`${b}${s(W)}: ${X}`,b=O)}if(k>C){const H=k-C;g+=`${b}"...": "${S(H)} not stringified"`,b=O}return b!==""&&(g=`
${G}${g}
${q}`),K.pop(),`{${g}}`}case"number":return isFinite(L)?String(L):d?d(L):"null";case"boolean":return L===!0?"true":"false";case"undefined":return;case"bigint":if(E)return String(L);default:return d?d(L):void 0}}function I(V,L,K){switch(typeof L){case"string":return s(L);case"object":{if(L===null)return"null";if(typeof L.toJSON=="function"){if(L=L.toJSON(V),typeof L!="object")return I(V,L,K);if(L===null)return"null"}if(K.indexOf(L)!==-1)return w;let B="";const G=L.length!==void 0;if(G&&Array.isArray(L)){if(L.length===0)return"[]";if(N<K.length+1)return'"[Array]"';K.push(L);const g=Math.min(L.length,C);let b=0;for(;b<g-1;b++){const H=I(String(b),L[b],K);B+=H!==void 0?H:"null",B+=","}const M=I(String(b),L[b],K);if(B+=M!==void 0?M:"null",L.length-1>C){const H=L.length-C-1;B+=`,"... ${S(H)} not stringified"`}return K.pop(),`[${B}]`}let q=Object.keys(L);const P=q.length;if(P===0)return"{}";if(N<K.length+1)return'"[Object]"';let k="",O=Math.min(P,C);G&&l(L)&&(B+=f(L,",",C),q=q.slice(L.length),O-=L.length,k=","),_&&(q=o(q,R)),K.push(L);for(let g=0;g<O;g++){const b=q[g],M=I(b,L[b],K);M!==void 0&&(B+=`${k}${s(b)}:${M}`,k=",")}if(P>C){const g=P-C;B+=`${k}"...":"${S(g)} not stringified"`}return K.pop(),`{${B}}`}case"number":return isFinite(L)?String(L):d?d(L):"null";case"boolean":return L===!0?"true":"false";case"undefined":return;case"bigint":if(E)return String(L);default:return d?d(L):void 0}}function A(V,L,K){if(arguments.length>1){let B="";if(typeof K=="number"?B=" ".repeat(Math.min(K,10)):typeof K=="string"&&(B=K.slice(0,10)),L!=null){if(typeof L=="function")return U("",{"":V},[],L,B,"");if(Array.isArray(L))return F("",V,[],y(L),B,"")}if(B.length!==0)return x("",V,[],B,"")}return I("",V,[])}return A}}(lr,lr.exports)),lr.exports}var ni,za;function Fh(){if(za)return ni;za=1;const e=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:t}=qo(),r=t.info;function n(l,f){let i=0;l=l||[],f=f||{dedupe:!1};const m=Object.create(t);m.silent=1/0,f.levels&&typeof f.levels=="object"&&Object.keys(f.levels).forEach(d=>{m[d]=f.levels[d]});const v={write:$,add:h,emit:S,flushSync:y,end:p,minLevel:0,streams:[],clone:c,[e]:!0,streamLevels:m};return Array.isArray(l)?l.forEach(h,v):h.call(v,l),l=null,v;function $(d){let w;const E=this.lastLevel,{streams:_}=this;let R=0,N;for(let C=s(_.length,f.dedupe);a(C,_.length,f.dedupe);C=o(C,f.dedupe))if(w=_[C],w.level<=E){if(R!==0&&R!==w.level)break;if(N=w.stream,N[e]){const{lastTime:U,lastMsg:F,lastObj:x,lastLogger:I}=this;N.lastLevel=E,N.lastTime=U,N.lastMsg=F,N.lastObj=x,N.lastLogger=I}N.write(d),f.dedupe&&(R=w.level)}else if(!f.dedupe)break}function S(...d){for(const{stream:w}of this.streams)typeof w.emit=="function"&&w.emit(...d)}function y(){for(const{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync()}function h(d){if(!d)return v;const w=typeof d.write=="function"||d.stream,E=d.write?d:d.stream;if(!w)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");const{streams:_,streamLevels:R}=this;let N;typeof d.levelVal=="number"?N=d.levelVal:typeof d.level=="string"?N=R[d.level]:typeof d.level=="number"?N=d.level:N=r;const C={stream:E,level:N,levelVal:void 0,id:i++};return _.unshift(C),_.sort(u),this.minLevel=_[0].level,v}function p(){for(const{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync(),d.end()}function c(d){const w=new Array(this.streams.length);for(let E=0;E<w.length;E++)w[E]={level:d,stream:this.streams[E].stream};return{write:$,add:h,minLevel:d,streams:w,clone:c,emit:S,flushSync:y,[e]:!0}}}function u(l,f){return l.level-f.level}function s(l,f){return f?l-1:0}function o(l,f){return f?l-1:l+1}function a(l,f,i){return i?l>=0:l<f}return ni=n,ni}var Ga;function Vh(){if(Ga)return qe.exports;Ga=1;const e=rr.default,t=Hf(),r=Wf(),n=Xf(),u=Nh(),s=Mh(),o=nr(),{configure:a}=Lh(),{assertDefaultLevelFound:l,mappings:f,genLsCache:i,genLevelComparison:m,assertLevelComparison:v}=ed(),{DEFAULT_LEVELS:$,SORTING_ORDER:S}=qo(),{createArgsNormalizer:y,asChindings:h,buildSafeSonicBoom:p,buildFormatters:c,stringify:d,normalizeDestFileDescriptor:w,noop:E}=ko(),{version:_}=td(),{chindingsSym:R,redactFmtSym:N,serializersSym:C,timeSym:U,timeSliceIndexSym:F,streamSym:x,stringifySym:I,stringifySafeSym:A,stringifiersSym:V,setLevelSym:L,endSym:K,formatOptsSym:B,messageKeySym:G,errorKeySym:q,nestedKeySym:P,mixinSym:k,levelCompSym:O,useOnlyCustomLevelsSym:g,formattersSym:b,hooksSym:M,nestedKeyStrSym:H,mixinMergeStrategySym:W,msgPrefixSym:X}=o,{epochTime:Y,nullTime:T}=u,{pid:j}=process,D=e.hostname(),z=t.err,J={level:"info",levelComparison:S.ASC,levels:$,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:j,hostname:D},serializers:Object.assign(Object.create(null),{err:z}),formatters:Object.assign(Object.create(null),{bindings(te){return te},level(te,se){return{level:se}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:Y,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},Z=y(J),Q=Object.assign(Object.create(null),t);function ae(...te){const se={},{opts:ee,stream:ve}=Z(se,r(),...te);ee.level&&typeof ee.level=="string"&&$[ee.level.toLowerCase()]!==void 0&&(ee.level=ee.level.toLowerCase());const{redact:re,crlf:Se,serializers:Qe,timestamp:Ae,messageKey:et,errorKey:ft,nestedKey:nt,base:_t,name:Qo,level:ea,customLevels:ws,levelComparison:ta,mixin:or,mixinMergeStrategy:kd,useOnlyCustomLevels:ar,formatters:Es,hooks:qd,depthLimit:Dd,edgeLimit:Md,onChild:Ld,msgPrefix:cr}=ee,Ss=a({maximumDepth:Dd,maximumBreadth:Md}),ra=c(Es.level,Es.bindings,Es.log),na=d.bind({[A]:Ss}),bs=re?n(re,na):{},Fd=re?{stringify:bs[N]}:{stringify:na},Vd="}"+(Se?`\r
`:`
`),sa=h.bind(null,{[R]:"",[C]:Qe,[V]:bs,[I]:d,[A]:Ss,[b]:ra});let Rs="";_t!==null&&(Qo===void 0?Rs=sa(_t):Rs=sa(Object.assign({},_t,{name:Qo})));const ia=Ae instanceof Function?Ae:Ae?Y:T,Ud=ia().indexOf(":")+1;if(ar&&!ws)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(or&&typeof or!="function")throw Error(`Unknown mixin type "${typeof or}" - expected "function"`);if(cr&&typeof cr!="string")throw Error(`Unknown msgPrefix type "${typeof cr}" - expected "string"`);l(ea,ws,ar);const oa=f(ws,ar);typeof ve.emit=="function"&&ve.emit("message",{code:"PINO_CONFIG",config:{levels:oa,messageKey:et,errorKey:ft}}),v(ta);const zd=m(ta);return Object.assign(se,{levels:oa,[O]:zd,[g]:ar,[x]:ve,[U]:ia,[F]:Ud,[I]:d,[A]:Ss,[V]:bs,[K]:Vd,[B]:Fd,[G]:et,[q]:ft,[P]:nt,[H]:nt?`,${JSON.stringify(nt)}:{`:"",[C]:Qe,[k]:or,[W]:kd,[R]:Rs,[b]:ra,[M]:qd,silent:E,onChild:Ld,[X]:cr}),Object.setPrototypeOf(se,s()),i(se),se[L](ea),se}return qe.exports=ae,qe.exports.destination=(te=process.stdout.fd)=>typeof te=="object"?(te.dest=w(te.dest||process.stdout.fd),p(te)):p({dest:w(te),minLength:0}),qe.exports.transport=Qf(),qe.exports.multistream=Fh(),qe.exports.levels=f(),qe.exports.stdSerializers=Q,qe.exports.stdTimeFunctions=Object.assign({},u),qe.exports.symbols=o,qe.exports.version=_,qe.exports.default=ae,qe.exports.pino=ae,qe.exports}var Uh=Vh();const Kt=jo(Uh);let Jn=null;function zh(e){Jn=e}function Gh(){if(Jn&&Jn.getPath)try{return Jn.getPath("userData")}catch{}const e=de.default.join(Po.default.tmpdir(),"epub-image-extractor-logs");try{Ro.default.existsSync(e)||Ro.default.mkdirSync(e,{recursive:!0})}catch{}return e}let Bt;function xh(){if(Bt&&process.env.NODE_ENV!=="test")return Bt;const e=Gh(),t=process.env.LOG_LEVEL||(process.env.NODE_ENV==="test"?"error":"info"),r=process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test",u=process.env.NODE_ENV==="test"||r?void 0:{target:"pino/file",options:{destination:de.default.join(e,"app.log"),mkdir:!0}},s={level:t,timestamp:Kt.stdTimeFunctions.isoTime,...r&&{formatters:{level:o=>({level:o})}},serializers:{err:Kt.stdSerializers.err,error:Kt.stdSerializers.err,appError:o=>{const a=o;return{type:a.constructor?.name||"Unknown",code:a.code,message:a.message,userMessage:a.userMessage,context:a.context,stack:a.stack,originalError:a.originalError?{type:a.originalError.constructor?.name||"Unknown",message:a.originalError.message,stack:a.originalError.stack}:void 0}}}};u&&(s.transport=u);try{Bt=Kt(s)}catch(o){console.error("[Logger] Failed to create pino instance:",o),Bt=Kt({level:t})}return Bt}const ne=xh(),Kh=()=>new Vf.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"",attributesGroupName:"$",textNodeName:"#text",parseAttributeValue:!1,trimValues:!0,parseTagValue:!1,ignoreDeclaration:!0,ignorePiTags:!0,processEntities:!0,htmlEntities:!1,allowBooleanAttributes:!1,stopNodes:[],isArray:(e,t,r,n)=>!!(t==="container.rootfiles"&&e==="rootfiles"||t==="container.rootfiles.rootfile"&&e==="rootfile"||t==="package.manifest"&&e==="manifest"||t==="package.manifest.item"&&e==="item"||t==="package.spine"&&e==="spine"||t==="package.spine.itemref"&&e==="itemref"||t==="ncx.navMap"&&e==="navMap"||t.includes("navMap")&&e==="navPoint"||t.includes("navPoint")&&e==="navLabel"||t.includes("navLabel")&&e==="text"||t.includes("navPoint")&&e==="content"||e==="p"||e==="span"||e==="a"||e==="empty"||e==="withAttr"||e==="element")});let si=null;async function Oo(e){const t=Vf.XMLValidator.validate(e);if(t!==!0)throw typeof t=="object"&&t.err?new Error(t.err.msg):new Error(`Non-whitespace before first tag.
Line: 0
Column: 1
Char: ${e.charAt(0)}`);si||(si=Kh());try{const r=si.parse(e),n=u=>{if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return u.map(n);const s={};for(const[o,a]of Object.entries(u))o==="#text"&&typeof a=="string"?s[o]=[a]:o==="text"&&typeof a=="string"?s[o]=[a]:a===""||typeof a=="object"&&a!==null&&Object.keys(a).length===0?o!=="$"?s[o]=[{}]:s[o]=a:s[o]=n(a);return s};return n(r)}catch(r){throw r instanceof Error?r:new Error(`Non-whitespace before first tag.
Line: 0
Column: 1
Char: ${e.charAt(0)}`)}}var Bh=Ff.createRequire("/"),Hh;try{Hh=Bh("worker_threads").Worker}catch{}var Fe=Uint8Array,Ft=Uint16Array,Wh=Int32Array,rd=new Fe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nd=new Fe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jh=new Fe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sd=function(e,t){for(var r=new Ft(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var u=new Wh(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)u[s]=s-r[n]<<5|n;return{b:r,r:u}},id=sd(rd,2),od=id.b,Xh=id.r;od[28]=258,Xh[258]=28;var Yh=sd(nd,0),Zh=Yh.b,Io=new Ft(32768);for(var $e=0;$e<32768;++$e){var dt=($e&43690)>>1|($e&21845)<<1;dt=(dt&52428)>>2|(dt&13107)<<2,dt=(dt&61680)>>4|(dt&3855)<<4,Io[$e]=((dt&65280)>>8|(dt&255)<<8)>>1}var er=function(e,t,r){for(var n=e.length,u=0,s=new Ft(t);u<n;++u)e[u]&&++s[e[u]-1];var o=new Ft(t);for(u=1;u<t;++u)o[u]=o[u-1]+s[u-1]<<1;var a;if(r){a=new Ft(1<<t);var l=15-t;for(u=0;u<n;++u)if(e[u])for(var f=u<<4|e[u],i=t-e[u],m=o[e[u]-1]++<<i,v=m|(1<<i)-1;m<=v;++m)a[Io[m]>>l]=f}else for(a=new Ft(n),u=0;u<n;++u)e[u]&&(a[u]=Io[o[e[u]-1]++]>>15-e[u]);return a},sr=new Fe(288);for(var $e=0;$e<144;++$e)sr[$e]=8;for(var $e=144;$e<256;++$e)sr[$e]=9;for(var $e=256;$e<280;++$e)sr[$e]=7;for(var $e=280;$e<288;++$e)sr[$e]=8;var ad=new Fe(32);for(var $e=0;$e<32;++$e)ad[$e]=5;var Qh=er(sr,9,1),em=er(ad,5,1),ii=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ge=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},oi=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},tm=function(e){return(e+7)/8|0},Do=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new Fe(e.subarray(t,r))},rm=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ve=function(e,t,r){var n=new Error(t||rm[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Ve),!r)throw n;return n},nm=function(e,t,r,n){var u=e.length,s=n?n.length:0;if(!u||t.f&&!t.l)return r||new Fe(0);var o=!r,a=o||t.i!=2,l=t.i;o&&(r=new Fe(u*3));var f=function(T){var j=r.length;if(T>j){var D=new Fe(Math.max(j*2,T));D.set(r),r=D}},i=t.f||0,m=t.p||0,v=t.b||0,$=t.l,S=t.d,y=t.m,h=t.n,p=u*8;do{if(!$){i=Ge(e,m,1);var c=Ge(e,m+1,3);if(m+=3,c)if(c==1)$=Qh,S=em,y=9,h=5;else if(c==2){var _=Ge(e,m,31)+257,R=Ge(e,m+10,15)+4,N=_+Ge(e,m+5,31)+1;m+=14;for(var C=new Fe(N),U=new Fe(19),F=0;F<R;++F)U[Jh[F]]=Ge(e,m+F*3,7);m+=R*3;for(var x=ii(U),I=(1<<x)-1,A=er(U,x,1),F=0;F<N;){var V=A[Ge(e,m,I)];m+=V&15;var d=V>>4;if(d<16)C[F++]=d;else{var L=0,K=0;for(d==16?(K=3+Ge(e,m,3),m+=2,L=C[F-1]):d==17?(K=3+Ge(e,m,7),m+=3):d==18&&(K=11+Ge(e,m,127),m+=7);K--;)C[F++]=L}}var B=C.subarray(0,_),G=C.subarray(_);y=ii(B),h=ii(G),$=er(B,y,1),S=er(G,h,1)}else Ve(1);else{var d=tm(m)+4,w=e[d-4]|e[d-3]<<8,E=d+w;if(E>u){l&&Ve(0);break}a&&f(v+w),r.set(e.subarray(d,E),v),t.b=v+=w,t.p=m=E*8,t.f=i;continue}if(m>p){l&&Ve(0);break}}a&&f(v+131072);for(var q=(1<<y)-1,P=(1<<h)-1,k=m;;k=m){var L=$[oi(e,m)&q],O=L>>4;if(m+=L&15,m>p){l&&Ve(0);break}if(L||Ve(2),O<256)r[v++]=O;else if(O==256){k=m,$=null;break}else{var g=O-254;if(O>264){var F=O-257,b=rd[F];g=Ge(e,m,(1<<b)-1)+od[F],m+=b}var M=S[oi(e,m)&P],H=M>>4;M||Ve(3),m+=M&15;var G=Zh[H];if(H>3){var b=nd[H];G+=oi(e,m)&(1<<b)-1,m+=b}if(m>p){l&&Ve(0);break}a&&f(v+131072);var W=v+g;if(v<G){var X=s-G,Y=Math.min(G,W);for(X+v<0&&Ve(3);v<Y;++v)r[v]=n[X+v]}for(;v<W;++v)r[v]=r[v-G]}}t.l=$,t.p=k,t.b=v,t.f=i,$&&(i=1,t.m=y,t.d=S,t.n=h)}while(!i);return v!=r.length&&o?Do(r,0,v):r.subarray(0,v)},sm=new Fe(0),tt=function(e,t){return e[t]|e[t+1]<<8},Be=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ai=function(e,t){return Be(e,t)+Be(e,t+4)*4294967296};function im(e,t){return nm(e,{i:2},t&&t.out,t&&t.dictionary)}var No=typeof TextDecoder<"u"&&new TextDecoder,om=0;try{No.decode(sm,{stream:!0}),om=1}catch{}var am=function(e){for(var t="",r=0;;){var n=e[r++],u=(n>127)+(n>223)+(n>239);if(r+u>e.length)return{s:t,r:Do(e,r-1)};u?u==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):u&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};function cd(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(No)return No.decode(e);var u=am(e),s=u.s,r=u.r;return r.length&&Ve(8),s}}var cm=function(e,t){return t+30+tt(e,t+26)+tt(e,t+28)},um=function(e,t,r){var n=tt(e,t+28),u=cd(e.subarray(t+46,t+46+n),!(tt(e,t+8)&2048)),s=t+46+n,o=Be(e,t+20),a=r&&o==4294967295?lm(e,s):[o,Be(e,t+24),Be(e,t+42)],l=a[0],f=a[1],i=a[2];return[tt(e,t+10),l,f,u,s+tt(e,t+30)+tt(e,t+32),i]},lm=function(e,t){for(;tt(e,t)!=1;t+=4+tt(e,t+2));return[ai(e,t+12),ai(e,t+4),ai(e,t+20)]};function fm(e,t){for(var r={},n=e.length-22;Be(e,n)!=101010256;--n)(!n||e.length-n>65558)&&Ve(13);var u=tt(e,n+8);if(!u)return{};var s=Be(e,n+16),o=s==4294967295||u==65535;if(o){var a=Be(e,n-12);o=Be(e,a)==101075792,o&&(u=Be(e,a+32),s=Be(e,a+48))}for(var l=0;l<u;++l){var f=um(e,s,o),i=f[0],m=f[1],v=f[2],$=f[3],S=f[4],y=f[5],h=cm(e,y);s=S,i?i==8?r[$]=im(e.subarray(h,h+m),{out:new Fe(v)}):Ve(14,"unknown compression type "+i):r[$]=Do(e,h,h+m)}return r}class dm{unzipped;filePath;async open(t){try{this.filePath=t;const r=await Te.default.readFile(t);this.unzipped=fm(new Uint8Array(r))}catch(r){throw new Error(`Failed to open ZIP file: ${r instanceof Error?r.message:"Unknown error"}`)}}getEntry(t){if(!this.unzipped)throw new Error("ZIP file not opened");const r=this.unzipped[t];return r?{name:t,isDirectory:t.endsWith("/"),size:r.length,compressedSize:r.length}:null}getEntries(){if(!this.unzipped)throw new Error("ZIP file not opened");const t=[];for(const[r,n]of Object.entries(this.unzipped))t.push({name:r,isDirectory:r.endsWith("/"),size:n.length,compressedSize:n.length});return t}readAsText(t){if(!this.unzipped)throw new Error("ZIP file not opened");const r=this.unzipped[t.name];if(!r)throw new Error(`Entry not found: ${t.name}`);return cd(r)}readAsBuffer(t){if(!this.unzipped)throw new Error("ZIP file not opened");const r=this.unzipped[t.name];if(!r)throw new Error(`Entry not found: ${t.name}`);return Buffer.from(r)}async extractTo(t,r){if(!this.unzipped)throw new Error("ZIP file not opened");const n=this.unzipped[t.name];if(!n)throw new Error(`Entry not found: ${t.name}`);const u=de.default.dirname(r);await Te.default.mkdir(u,{recursive:!0}),await Te.default.writeFile(r,n)}close(){this.unzipped=void 0,this.filePath=void 0}}function ss(){return new dm}async function hm(e){let t;try{ne.debug({epubPath:e},"EPUB解析開始"),t=ss(),await t.open(e);const r=t.getEntry("META-INF/container.xml");if(!r)throw t.close(),new He(It.EPUB_INVALID_FORMAT,"container.xml not found","EPUBファイルの形式が無効です（container.xmlが見つかりません）",{filePath:e});const n=t.readAsText(r),o=(await Oo(n)).container.rootfiles[0].rootfile[0].$["full-path"],a=de.default.dirname(o),l=t.getEntry(o);if(!l)throw t.close(),new He(It.EPUB_INVALID_FORMAT,"OPF file not found","EPUBファイルの形式が無効です（OPFファイルが見つかりません）",{filePath:e,opfPath:o});const f=t.readAsText(l),i=await Oo(f),m={};(i.package.manifest[0].item||[]).forEach(h=>{const p=h.$.id;m[p]={id:p,href:h.$.href,"media-type":h.$["media-type"],properties:h.$.properties}});const $=[];(i.package.spine[0].itemref||[]).forEach(h=>{const p={idref:h.$.idref,linear:h.$.linear||"yes"},c=h.$.properties||"";c.includes("page-spread-left")?p.pageSpread="left":c.includes("page-spread-right")&&(p.pageSpread="right"),$.push(p)}),ne.debug({hasManifest:!!m,hasSpine:!!$,manifestKeys:Object.keys(m).length,spineLength:$.length},"パーサー実行完了");const y=await mm(t,o,m);return{manifest:m,spine:$,navigation:y,basePath:e,contentPath:a,parser:t}}catch(r){throw t&&t.close(),new He(It.EPUB_PARSE_ERROR,r instanceof Error?r.message:"不明なエラー","EPUBファイルの解析に失敗しました",{filePath:e},r instanceof Error?r:void 0)}}async function mm(e,t,r){const n=[];try{let u=Object.values(r).find(s=>s.properties&&s.properties.includes("nav"));if(u||(u=Object.values(r).find(s=>s["media-type"]==="application/x-dtbncx+xml"||s.id==="ncx"||s.id==="toc")),u){const s=de.default.dirname(t),o=de.default.join(s,u.href).replace(/\\/g,"/"),a=e.getEntry(o);if(a){const l=e.readAsText(a);if(ne.debug({tocPath:o},"ナビゲーションファイル発見"),u["media-type"]==="application/x-dtbncx+xml")return await pm(l);if(u.properties&&u.properties.includes("nav"))return await xa(l);if(l.includes('epub:type="toc"'))return await xa(l)}}return ne.debug("ナビゲーション情報が見つかりません"),n}catch(u){return ne.warn({err:u},"ナビゲーション抽出エラー"),n}}async function pm(e){const t=[];try{const n=(await Oo(e)).ncx?.navMap?.[0];if(n?.navPoint){let u=1;const s=o=>{const a=o.navLabel?.[0]?.text?.[0],l=o.content?.[0]?.$?.src;a&&l&&t.push({order:u++,title:a,href:l}),o.navPoint&&o.navPoint.forEach(s)};n.navPoint.forEach(s)}}catch(r){ne.warn({err:r},"NCX解析エラー")}return t}async function xa(e){const t=[];let r=1;try{const n=e.match(/<nav[^>]*epub:type=["']toc["'][^>]*>([\s\S]*?)<\/nav>/i);if(!n)return ne.warn("Navigation Documentにtocが見つかりません"),t;const u=n[1],s=/<li[^>]*>([\s\S]*?)<\/li>/gi;let o;for(;(o=s.exec(u))!==null;){const l=o[1].match(/<a[^>]+href=["']([^"']+)["'][^>]*>([\s\S]*?)<\/a>/i);if(l){const f=l[1],m=l[2].replace(/<[^>]*>/g,"").trim();m&&f&&t.push({order:r++,title:m,href:f})}}ne.debug({chapterCount:t.length},"Navigation Documentから章を抽出")}catch(n){ne.warn({err:n},"Navigation Document解析エラー")}return t}function Zn(){return process.env.E2E_TEST_MODE==="true"||process.env.E2E_TEST_MODE==="1"}const ym={FILE_PROCESSING_START:300,IMAGE_PROCESSING:10,CHAPTER_PROCESSING:30,FILE_PROCESSING_END:30};async function gm(e){Zn()&&await new Promise(t=>setTimeout(t,e))}async function Qn(e){await gm(ym[e])}function Ka(e){let t=e.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"");const r=["CON","PRN","AUX","NUL","COM1","COM2","COM3","COM4","COM5","COM6","COM7","COM8","COM9","LPT1","LPT2","LPT3","LPT4","LPT5","LPT6","LPT7","LPT8","LPT9"],n=t.split(".")[0].toUpperCase();if(r.includes(n)&&(t=`_${t}`),t.length>255){const u=de.default.extname(t);t=t.slice(0,t.length-u.length).slice(0,255-u.length)+u}return t||(t="unnamed"),t}const Ht={MAX_IMAGE_SIZE:50*1024*1024,MAX_IMAGES_PER_EPUB:1e4,MAX_MEMORY_USAGE:1024*1024*1024};function ud(e,t,r){return e>=Ht.MAX_IMAGES_PER_EPUB?{allowed:!1,reason:`画像数が上限（${Ht.MAX_IMAGES_PER_EPUB}）を超えています`}:t>Ht.MAX_IMAGE_SIZE?{allowed:!1,reason:`画像サイズが上限（${Ht.MAX_IMAGE_SIZE/1024/1024}MB）を超えています`}:r>Ht.MAX_MEMORY_USAGE?{allowed:!1,reason:"メモリ使用量が上限を超えています"}:{allowed:!0}}async function vm(e,t){const r=[],n=e.parser||ss();e.parser||await n.open(e.basePath);let u=0;try{ne.debug({spineLength:e.spine.length,manifestSize:Object.keys(e.manifest).length,hasParser:!!e.parser},"画像抽出開始");const s=_m(e);let o=0;const a=e.spine.length;for(let l=0;l<e.spine.length;l++){const f=e.spine[l];ne.debug({pageIndex:l+1,totalPages:a,spineItem:f},"ページ処理中");const i=e.manifest[f.idref];if(!i){ne.warn({idref:f.idref},"Manifest item not found for spine idref");continue}const m=s.get(l)||1,v=de.default.join(e.contentPath,i.href).replace(/\\/g,"/");ne.debug({contentPath:v},"コンテンツ取得");try{const $=n.getEntry(v);if(!$){ne.warn({contentPath:v},"エントリーが見つかりません");continue}const S=n.readAsText($);ne.debug({contentSize:S.length},"コンテンツサイズ");const y=await $m(S,v,m,e.contentPath,f.pageSpread);u+=y.length;const h=ud(u,0,process.memoryUsage().heapUsed);if(!h.allowed){ne.warn({reason:h.reason},"リソース制限");break}r.push(...y),await Qn("IMAGE_PROCESSING"),o++,t&&t(o,a)}catch($){ne.error({err:$ instanceof Error?$:new Error(String($)),contentPath:v},"コンテンツ取得エラー");continue}}return r.sort((l,f)=>l.chapterOrder!==f.chapterOrder?l.chapterOrder-f.chapterOrder:l.pageOrder-f.pageOrder),r}catch(s){const o=s instanceof He?s:new He(It.UNKNOWN_ERROR,s instanceof Error?s.message:"不明なエラー","画像の抽出に失敗しました",{filePath:e.basePath,totalImages:r.length,operation:"extractImages"},s instanceof Error?s:void 0);throw ne.error({err:o},"画像抽出エラー"),o}finally{e.parser||n.close()}}async function $m(e,t,r,n,u){const s=[];let o=0;try{const a=/<img[^>]+src=["']([^"']+)["'][^>]*>/gi;let l;for(;(l=a.exec(e))!==null;){const m=l[1];if(m&&!m.startsWith("data:")){const v=ci(m,t,n);v&&s.push({src:v,chapterOrder:r,pageOrder:o++,pageSpread:u})}}const f=/<image[^>]+(href|xlink:href)=["']([^"']+)["'][^>]*>/gi;for(;(l=f.exec(e))!==null;){const m=l[2];if(m&&!m.startsWith("data:")){const v=ci(m,t,n);v&&s.push({src:v,chapterOrder:r,pageOrder:o++,pageSpread:u})}}const i=/background-image\s*:\s*url\(["']?([^"')]+)["']?\)/gi;for(;(l=i.exec(e))!==null;){const m=l[1];if(m&&!m.startsWith("data:")){const v=ci(m,t,n);v&&s.push({src:v,chapterOrder:r,pageOrder:o++,pageSpread:u})}}}catch(a){ne.error({err:a instanceof Error?a:new Error(String(a))},"HTML解析エラー")}return s}function ci(e,t,r){if(e.startsWith("data:"))return"";if(e.startsWith("/"))return e.substring(1);const n=de.default.dirname(t),u=de.default.join(n,e).replace(/\\/g,"/");return de.default.normalize(u).replace(/\\/g,"/")}function _m(e){const t=new Map;if(!e.navigation||e.navigation.length===0){for(let f=0;f<e.spine.length;f++)t.set(f,1);return t}const r=[];for(const f of e.spine){const i=e.manifest[f.idref];i?r.push(i.href):r.push("")}const n=[];for(const f of e.navigation){const i=f.href.split("#")[0],m=r.findIndex(v=>v===i);m!==-1&&n.push({chapterOrder:f.order,spineIndex:m})}n.sort((f,i)=>f.spineIndex-i.spineIndex);let u=0;for(let f=0;f<e.spine.length;f++)u<n.length-1&&f>=n[u+1].spineIndex&&u++,u<n.length?t.set(f,n[u].chapterOrder):t.set(f,n[n.length-1].chapterOrder);ne.debug({navigationCount:e.navigation.length,spineCount:e.spine.length,chapterStartPositions:n.slice(0,10),mappingSample:Array.from(t.entries()).slice(0,10)},"チャプターページマッピング");const s=n.find(f=>f.chapterOrder===3),o=n.find(f=>f.chapterOrder===4),a=n.find(f=>f.chapterOrder===6),l=n.find(f=>f.chapterOrder===7);return s&&o&&ne.debug({chapter:"巻頭特集",startSpine:s.spineIndex,endSpine:o.spineIndex-1,pageCount:o.spineIndex-s.spineIndex},"チャプター範囲"),a&&l&&ne.debug({chapter:"勇者は魔王が好きらしい",startSpine:a.spineIndex,endSpine:l.spineIndex-1,pageCount:l.spineIndex-a.spineIndex},"チャプター範囲"),t}async function wm(e,t,r,n,u={includeOriginalFilename:!0,includePageSpread:!0}){const s=ss();await s.open(n);try{const o=new Map;t.length>0?t.forEach(f=>{o.set(f.order,f)}):o.set(1,{order:1,title:"未分類",href:""});const a=new Map;e.forEach(f=>{const i=t.length>0?f.chapterOrder:1;a.has(i)||a.set(i,[]),a.get(i).push(f)});let l=0;for(const[f,i]of a){const m=o.get(f)||{order:f,title:`章 ${f}`,href:""},v=`${String(m.order).padStart(3,"0")}_${Ka(m.title)}`,$=de.default.join(r,v);try{await Te.default.mkdir($,{recursive:!0}),await Qn("CHAPTER_PROCESSING")}catch(y){throw new He(It.DIRECTORY_CREATE_ERROR,y instanceof Error?y.message:"ディレクトリ作成エラー",`章ディレクトリの作成に失敗しました: ${v}`,{chapterDir:$,chapterTitle:m.title,operation:"createChapterDirectory"},y instanceof Error?y:void 0)}let S=1;for(const y of i)try{const h=s.getEntry(y.src);if(!h){ne.warn({imageSrc:y.src},"画像エントリーが見つかりません");continue}const p=s.readAsBuffer(h);if(!p){ne.warn({imageSrc:y.src},"画像データが読み取れません");continue}const c=ud(0,p.length,process.memoryUsage().heapUsed);if(!c.allowed){ne.warn({imageSrc:y.src,reason:c.reason},"画像サイズ制限超過");continue}const d=Em(y.src,p);let w=String(S).padStart(4,"0");if(u.includeOriginalFilename){const _=de.default.basename(y.src,de.default.extname(y.src)),R=Ka(_);w+=`_${R}`}u.includePageSpread&&y.pageSpread&&(w+=`-${y.pageSpread}`),w+=d;const E=de.default.join($,w);await Te.default.writeFile(E,p),S++}catch(h){ne.error({err:h instanceof Error?h:new Error(String(h)),imageSrc:y.src},"画像保存エラー")}l++}return l}finally{s.close()}}function Em(e,t){const r=de.default.extname(e).toLowerCase();if([".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp"].includes(r))return r;if(t.length>=4){const n=t.slice(0,4);if(n[0]===137&&n[1]===80&&n[2]===78&&n[3]===71)return".png";if(n[0]===255&&n[1]===216&&n[2]===255)return".jpg";if(n[0]===71&&n[1]===73&&n[2]===70)return".gif";if(t.length>=12){const u=t.slice(0,4).toString("ascii"),s=t.slice(8,12).toString("ascii");if(u==="RIFF"&&s==="WEBP")return".webp"}}return".jpg"}function Sm(e,t){const r=e instanceof He?e:vh(e,It.UNKNOWN_ERROR,{operation:t});return ne.error({appError:r,operation:t},r.message),r.userMessage}class bm{promise=Promise.resolve();async acquire(){let t,r=!1;const n=this.promise;return this.promise=new Promise(u=>{t=()=>{r||(r=!0,u())}}),await n,t}}const Rm=new bm;async function Pm(e,t){const r=t.replace(/[<>:"/\\|?*]/g,"_");let n=de.default.join(e,r),u=1;for(;await ld(n);)if(n=de.default.join(e,`${r}_${u}`),u++,u>1e3)throw new Error("出力ディレクトリの作成に失敗しました: 重複が多すぎます");return n}async function Om(e,t,r={}){const n=t.replace(/[<>:"/\\|?*]/g,"_");if(r.appendTimestamp){const a=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);return{path:de.default.join(e,`${n}_${a}`),isNew:!0}}const u=de.default.join(e,n);if(!await ld(u))return{path:u,isNew:!0};if(r.overwrite)return{path:u,isNew:!1,warning:"既存のファイルが上書きされます"};if(r.askConfirmation&&await r.askConfirmation())return{path:u,isNew:!1,warning:"既存のファイルが上書きされます"};const o=await Rm.acquire();try{const a=await Pm(e,t);return await Te.default.mkdir(a,{recursive:!0}),{path:a,isNew:!0,warning:`既存のディレクトリが存在するため、新しいディレクトリ「${de.default.basename(a)}」を作成します`}}finally{o()}}async function ld(e){try{return await Te.default.access(e),!0}catch{return!1}}const Vt={default:{width:600,height:560},minimum:{width:500,height:400}},rt={active:1,inactive:{default:.85,min:.1,max:1,step:.05}},tr=()=>{if(Zn())return de.default.join(Po.default.tmpdir(),"epub-extractor-e2e","EPUB_Images");try{return de.default.join(ie.app.getPath("desktop"),"EPUB_Images")}catch{return de.default.join(Po.default.homedir(),"Desktop","EPUB_Images")}};let Qt=null,To=!1;function Ba(){const e={outputDirectory:tr(),language:"ja",alwaysOnTop:!0,includeOriginalFilename:!0,includePageSpread:!0,inactiveOpacity:rt.inactive.default,enableMouseHoverOpacity:!0},t={get:r=>r?e[r]:e,set:(r,n)=>{e[r]=n},clear:()=>{e.outputDirectory=tr(),e.language="ja",e.alwaysOnTop=!0,e.includeOriginalFilename=!0,e.includePageSpread=!0,e.inactiveOpacity=rt.inactive.default,e.enableMouseHoverOpacity=!0}};return Qt=t,To=!0,t}async function Im(){if(To&&Qt)return Qt;if(process.env.NODE_ENV==="test"&&typeof jest<"u")return Ba();try{const{default:e}=await Promise.resolve().then(()=>V$),t={outputDirectory:{type:"string"},language:{type:"string",default:"ja"},alwaysOnTop:{type:"boolean",default:!0},includeOriginalFilename:{type:"boolean",default:!0},includePageSpread:{type:"boolean",default:!0},inactiveOpacity:{type:"number",minimum:.1,maximum:1,default:rt.inactive.default},enableMouseHoverOpacity:{type:"boolean",default:!0},windowBounds:{type:"object",properties:{width:{type:"number"},height:{type:"number"},x:{type:"number"},y:{type:"number"}}}};return Qt=new e({defaults:{outputDirectory:tr(),language:"ja",alwaysOnTop:!0,includeOriginalFilename:!0,includePageSpread:!0,inactiveOpacity:rt.inactive.default,enableMouseHoverOpacity:!0},schema:t}),To=!0,Qt}catch{return console.warn("electron-store is not available, using in-memory store"),Ba()}}class Nm{storePromise;cachedStore=null;constructor(){this.storePromise=Im().then(t=>(this.cachedStore=t,t))}get(){return this.cachedStore?this.cachedStore.get():{outputDirectory:tr(),language:"ja",alwaysOnTop:!0,includeOriginalFilename:!0,includePageSpread:!0,inactiveOpacity:rt.inactive.default,enableMouseHoverOpacity:!0}}set(t,r){typeof t=="string"?this.cachedStore?this.cachedStore.set(t,r):this.storePromise.then(n=>{n.set(t,r)}):this.update(t)}update(t){Object.entries(t).forEach(([r,n])=>{this.set(r,n)})}getOutputDirectory(){return this.get()?.outputDirectory??tr()}setOutputDirectory(t){this.set("outputDirectory",t)}setLanguage(t){this.set("language",t)}setAlwaysOnTop(t){this.set("alwaysOnTop",t)}setWindowBounds(t){this.set("windowBounds",t)}setInactiveOpacity(t){this.set("inactiveOpacity",t)}setEnableMouseHoverOpacity(t){this.set("enableMouseHoverOpacity",t)}setIncludeOriginalFilename(t){this.set("includeOriginalFilename",t)}setIncludePageSpread(t){this.set("includePageSpread",t)}clear(){this.cachedStore?this.cachedStore.clear():this.storePromise.then(t=>{t.clear()})}resetToDefaults(){this.clear()}async waitForInit(){await this.storePromise}}const Ue=new Nm;let fr=null;async function Tm(){if(!fr)try{fr=(await import("p-limit")).default}catch{fr=()=>e=>e()}return fr}async function Am(e,t,r,n=3){const s=(await Tm())(n),o=[],a=new Map,l=Date.now();e.forEach((m,v)=>{const $=`file-${v}-${l}`;a.set(m,$)}),e.forEach(m=>{const v=de.default.basename(m),$=a.get(m);r({fileId:$,fileName:v,totalImages:0,processedImages:0,status:"pending"})});const f=e.map(m=>s(()=>jm(m,t,r,a.get(m))));return(await Promise.allSettled(f)).forEach((m,v)=>{if(m.status==="fulfilled")o.push(m.value);else{const $=e[v],S=de.default.basename($),y=a.get($);o.push({fileId:y,fileName:S,outputPath:"",totalImages:0,chapters:0,errors:[m.reason?.message||"処理中にエラーが発生しました"]})}}),o}async function jm(e,t,r,n){const u=de.default.basename(e),s=n||`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,o=[];try{r({fileId:s,fileName:u,totalImages:0,processedImages:0,status:"processing"}),await Qn("FILE_PROCESSING_START");const a=await hm(e),l=await vm(a,(y,h)=>{r({fileId:s,fileName:u,totalImages:h,processedImages:y,status:"processing",phase:"extracting"})}),f=de.default.basename(u,".epub"),i=await Om(t,f),m=i.path;i.warning&&console.warn(`出力先警告 (${u}): ${i.warning}`),await Te.default.mkdir(m,{recursive:!0}).catch(()=>{}),r({fileId:s,fileName:u,totalImages:l.length,processedImages:l.length,status:"processing",phase:"organizing"});const v=Ue.get(),$={includeOriginalFilename:v?.includeOriginalFilename??!1,includePageSpread:v?.includePageSpread??!1},S=await wm(l,a.navigation,m,a.basePath,$);return await Qn("FILE_PROCESSING_END"),r({fileId:s,fileName:u,totalImages:l.length,processedImages:l.length,status:"completed",outputPath:m,chapters:S}),{fileId:s,fileName:u,outputPath:m,totalImages:l.length,chapters:S,errors:o}}catch(a){const l=Sm(a,`EPUB処理: ${u}`);return o.push(l),r({fileId:s,fileName:u,totalImages:0,processedImages:0,status:"error",error:l}),{fileId:s,fileName:u,outputPath:"",totalImages:0,chapters:0,errors:[l]}}}async function Cm(e){const t=[],r=ss();try{await r.open(e)}catch(s){throw console.error("ZIP展開エラー:",s),new Error("ZIPファイルの展開に失敗しました")}const n=r.getEntries();if(!n.some(s=>s.name.toLowerCase().endsWith(".epub")&&!s.isDirectory))throw r.close(),new Error("ZIPファイル内にEPUBファイルが見つかりませんでした。EPUBファイルを含むZIPファイルを選択してください");try{const s=de.default.join(ie.app.getPath("temp"),"epub-extractor",Date.now().toString());await Te.default.mkdir(s,{recursive:!0});for(const o of n){const a=o.name;if(a.toLowerCase().endsWith(".epub")&&!o.isDirectory){const l=de.default.basename(a),f=de.default.join(s,l);await r.extractTo(o,f),await km(f)&&t.push(f)}}return t}catch(s){throw console.error("ファイル展開エラー:",s),new Error(`ファイルの展開に失敗しました: ${s instanceof Error?s.message:"不明なエラー"}`)}finally{r.close()}}async function Ha(e){for(const t of e)try{if(t.includes(ie.app.getPath("temp"))){await Te.default.unlink(t);const r=de.default.dirname(t);(await Te.default.readdir(r)).length===0&&await Te.default.rm(r,{recursive:!0})}}catch(r){console.warn(`一時ファイルの削除に失敗: ${t}`,r)}}function Wa(e){return de.default.extname(e).toLowerCase()===".zip"}async function km(e){try{return await Te.default.access(e),!0}catch{return!1}}async function qm(e,t=3){const r=[];async function n(u,s){if(s>t){ne.debug({path:u,depth:s},"Maximum depth reached, skipping");return}try{const o=await Te.default.readdir(u,{withFileTypes:!0});for(const a of o){const l=de.default.join(u,a.name);if(a.isDirectory()){if(a.name.startsWith(".")||a.name==="node_modules"){ne.debug({folder:a.name},"Skipping hidden/system folder");continue}await n(l,s+1)}else if(a.isFile()){const f=de.default.extname(a.name).toLowerCase();(f===".epub"||f===".zip")&&(r.push(l),ne.debug({file:l},"Found EPUB/ZIP file"))}}}catch(o){ne.error({err:o instanceof Error?o:new Error(String(o)),path:u},"Error scanning folder")}}return await n(e,0),ne.debug({folderPath:e,foundFiles:r.length,maxDepth:t},"Folder scan completed"),r}async function Dm(e,t=3){const r=[];for(const n of e){const u=await qm(n,t);r.push(...u)}return[...new Set(r)]}const dr=new WeakMap;function fd(e,t=rt.inactive.default,r=!0){let n=!1;const u=dr.get(e);u&&(u.mouseEnterHandler&&ie.ipcMain.removeListener("window:mouseenter",u.mouseEnterHandler),u.mouseLeaveHandler&&ie.ipcMain.removeListener("window:mouseleave",u.mouseLeaveHandler));const s=()=>{!e.isDestroyed()&&(!r||!n)&&e.setOpacity(t)},o=()=>{e.isDestroyed()||e.setOpacity(rt.active)};if(e.on("blur",s),e.on("focus",o),r){const a=()=>{n=!0,!e.isDestroyed()&&!e.isFocused()&&e.setOpacity(rt.active)},l=()=>{n=!1,!e.isDestroyed()&&!e.isFocused()&&e.setOpacity(t)};ie.ipcMain.on("window:mouseenter",a),ie.ipcMain.on("window:mouseleave",l),dr.set(e,{mouseEnterHandler:a,mouseLeaveHandler:l}),e.once("closed",()=>{ie.ipcMain.removeListener("window:mouseenter",a),ie.ipcMain.removeListener("window:mouseleave",l),dr.delete(e)})}else dr.set(e,{})}function Mm(e){ie.ipcMain.handle("dialog:selectDirectory",async()=>{const t=await ie.dialog.showOpenDialog(e,{properties:["openDirectory","createDirectory"],defaultPath:ie.app.getPath("desktop"),title:"出力先フォルダを選択"});return t.canceled?null:t.filePaths[0]}),ie.ipcMain.handle("epub:process",async(t,r)=>{const n=[];ne.debug({filePaths:r,count:r.length,types:r.map(u=>typeof u)},"受信したファイルパス");try{const u=Ue.getOutputDirectory();await Te.default.mkdir(u,{recursive:!0});const s=[],o=[],a=[];for(const i of r)try{ne.debug({filePath:i},"パスを確認中"),(await Te.default.stat(i)).isDirectory()?(ne.debug({filePath:i},"フォルダとして分類"),a.push(i)):Wa(i)?(ne.debug({filePath:i},"ZIPファイルとして分類"),o.push(i)):i.toLowerCase().endsWith(".epub")?(ne.debug({filePath:i},"EPUBファイルとして分類"),s.push(i)):ne.debug({filePath:i},"未対応のファイル形式")}catch(m){ne.error({err:m instanceof Error?m:new Error(String(m)),filePath:i},"パスの確認エラー")}if(a.length>0){ne.debug({folderPaths:a},"フォルダ内のEPUBファイルをスキャン開始");const i=await Dm(a,3);ne.debug({scannedCount:i.length},"スキャン完了");for(const m of i)Wa(m)?o.push(m):s.push(m)}for(const i of o)try{const m=await Cm(i);s.push(...m),n.push(...m)}catch(m){ne.error({err:m instanceof Error?m:new Error(String(m)),zipPath:i},"ZIP展開エラー");const v={fileId:`zip-${Date.now()}`,fileName:de.default.basename(i),totalImages:0,processedImages:0,status:"error",error:m instanceof Error?m.message:"不明なエラー"};e.webContents.send("epub:progress",v)}const f=await Am(s,u,i=>{e.webContents.send("epub:progress",i)},3);return await Ha(n),{success:!0,results:f}}catch(u){await Ha(n),ne.error({err:u instanceof Error?u:new Error(String(u)),stack:u instanceof Error?u.stack:"No stack trace"},"EPUB処理エラー");let s="不明なエラーが発生しました";return u instanceof Error&&(s=u.message,u.message.includes("ENOENT")||u.message.includes("no such file")?s=`ファイルが見つかりません: ${u.message}`:(u.message.includes("EACCES")||u.message.includes("permission"))&&(s=`ファイルへのアクセス権限がありません: ${u.message}`)),{success:!1,error:s}}}),ie.ipcMain.handle("settings:get",async()=>Ue.get()),ie.ipcMain.handle("settings:save",async(t,r)=>{if(Ue.update(r),r.alwaysOnTop!==void 0&&e.setAlwaysOnTop(r.alwaysOnTop),r.inactiveOpacity!==void 0||r.enableMouseHoverOpacity!==void 0){const n=Ue.get();e.removeAllListeners("blur"),e.removeAllListeners("focus"),fd(e,n.inactiveOpacity??rt.inactive.default,n.enableMouseHoverOpacity??!0)}return{success:!0}}),ie.ipcMain.handle("settings:reset",async()=>{Ue.resetToDefaults();const t=Ue.get();return e&&e.setAlwaysOnTop(t.alwaysOnTop),t}),ie.ipcMain.handle("settings:clearWindowBounds",async()=>(Ue.setWindowBounds(void 0),e&&(e.setSize(Vt.default.width,Vt.default.height),e.center()),{success:!0})),ie.ipcMain.handle("file:openFolder",async(t,r)=>{try{return await ie.shell.openPath(r),{success:!0}}catch(n){return console.error("フォルダを開けませんでした:",n),{success:!1,error:n instanceof Error?n.message:"不明なエラー"}}}),ie.ipcMain.handle("app:version",async()=>({version:ie.app.getVersion(),name:ie.app.getName(),electronVersion:process.versions.electron,nodeVersion:process.versions.node,chromiumVersion:process.versions.chrome,platform:process.platform,arch:process.arch}))}const Lm="ja",Ja={ja:{exitDialog:{title:"処理中のファイルがあります",message:"処理中のファイルがあります",detail:"処理を中断して終了してもよろしいですか？",buttons:{quit:"終了",cancel:"キャンセル"}},menu:{file:"ファイル",edit:"編集",view:"表示",help:"ヘルプ"}},en:{exitDialog:{title:"Files are being processed",message:"Files are being processed",detail:"Are you sure you want to quit and interrupt the processing?",buttons:{quit:"Quit",cancel:"Cancel"}},menu:{file:"File",edit:"Edit",view:"View",help:"Help"}}};function Fm(e){return Ja[e]||Ja[Lm]}function Vm(e,t){global.testHelpers={triggerClose:()=>{let r=null;const n=ie.dialog.showMessageBoxSync;if(ie.dialog.showMessageBoxSync=function(...u){return r=u.length===1?u[0]:u[1],1},e&&!e.isDestroyed()){const u={preventDefault:()=>{}};e.emit("close",u)}return ie.dialog.showMessageBoxSync=n,{dialogShown:r!==null,dialogOptions:r,isProcessing:t()}},getProcessingState:t,clearLocalStorage:async()=>e&&!e.isDestroyed()?(await e.webContents.executeJavaScript("localStorage.clear()"),{success:!0}):{success:!1,error:"Window not available"}}}function Um(e){global.isProcessing=e}let Ot,ui;typeof(typeof document>"u"?require("url").pathToFileURL(__filename).href:Tt&&Tt.tagName.toUpperCase()==="SCRIPT"&&Tt.src||new URL("index.cjs",document.baseURI).href)<"u"?(ui=Lf.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:Tt&&Tt.tagName.toUpperCase()==="SCRIPT"&&Tt.src||new URL("index.cjs",document.baseURI).href),Ot=zt.dirname(ui)):(Ot=globalThis.__dirname||"",ui=globalThis.__filename||"");let Oe=null,ze=null;ie.app.name="EPUB Image Extractor";if(process.platform==="darwin"&&ie.app.dock)try{const e=zt.join(Ot,"../../public/icon.png");ie.app.dock.setIcon(e)}catch{}function zm(){const e=Ue.get(),t=e.windowBounds;Oe=new ie.BrowserWindow({title:"EPUB Image Extractor",width:t?.width||Vt.default.width,height:t?.height||Vt.default.height,x:t?.x,y:t?.y,minWidth:Vt.minimum.width,minHeight:Vt.minimum.height,resizable:!0,alwaysOnTop:e.alwaysOnTop,show:!0,icon:process.platform==="darwin"?void 0:zt.join(Ot,"../../build/icon.png"),webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:zt.join(Ot,"../preload",Ot.includes("dist-electron-e2e")?"index.cjs":"index.js")}}),process.env.NODE_ENV==="development"?(Oe.loadURL("http://localhost:5173"),Oe.webContents.openDevTools()):Oe.loadFile(zt.join(Ot,"../../dist/index.html"));let r=!1;ie.ipcMain.on("app:updateProcessingState",(s,o)=>{r=o,Zn()&&Um(o)}),Oe.on("close",s=>{if(r){s.preventDefault();const a=Ue.get().language||"ja",l=Fm(a);ie.dialog.showMessageBoxSync(Oe,{type:"question",buttons:[l.exitDialog.buttons.quit,l.exitDialog.buttons.cancel],defaultId:1,title:l.exitDialog.title,message:l.exitDialog.message,detail:l.exitDialog.detail})===0&&Oe?.destroy()}}),Oe.on("closed",()=>{ze&&(clearTimeout(ze),ze=null),Oe=null}),Zn()&&Vm(Oe,()=>r);const n=()=>{if(!Oe)return;const s=Oe.getBounds();Ue.setWindowBounds(s)},u=()=>{ze&&clearTimeout(ze),ze=setTimeout(n,500)};Oe.on("resize",u),Oe.on("move",u),fd(Oe,e.inactiveOpacity??rt.inactive.default,e.enableMouseHoverOpacity??!0),Mm(Oe)}ie.app.whenReady().then(async()=>{if(zh(ie.app),await Ue.waitForInit(),process.platform==="darwin"){const e=[{label:ie.app.getName(),submenu:[{role:"hide"},{role:"hideOthers"},{role:"unhide"},{type:"separator"},{role:"quit"}]},{label:"Window",submenu:[{role:"close"},{role:"minimize"}]}];ie.Menu.setApplicationMenu(ie.Menu.buildFromTemplate(e))}else{const e=[{label:"File",submenu:[{role:"quit"}]}];ie.Menu.setApplicationMenu(ie.Menu.buildFromTemplate(e))}zm()});ie.app.on("before-quit",()=>{ze&&(clearTimeout(ze),ze=null)});ie.app.on("window-all-closed",()=>{ze&&(clearTimeout(ze),ze=null),ie.app.quit()});const Nt=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},li=new Set(["__proto__","prototype","constructor"]),Gm=new Set("0123456789");function is(e){const t=[];let r="",n="start",u=!1;for(const s of e)switch(s){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");u&&(r+=s),n="property",u=!u;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(u){u=!1,r+=s;break}if(li.has(r))return[];t.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(u){u=!1,r+=s;break}if(n==="property"){if(li.has(r))return[];t.push(r),r=""}n="index";break}case"]":{if(n==="index"){t.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!Gm.has(s))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),u&&(u=!1,r+="\\"),r+=s}}switch(u&&(r+="\\"),n){case"property":{if(li.has(r))return[];t.push(r);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function Mo(e,t){if(typeof t!="number"&&Array.isArray(e)){const r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function dd(e,t){if(Mo(e,t))throw new Error("Cannot use string index")}function xm(e,t,r){if(!Nt(e)||typeof t!="string")return r===void 0?e:r;const n=is(t);if(n.length===0)return r;for(let u=0;u<n.length;u++){const s=n[u];if(Mo(e,s)?e=u===n.length-1?void 0:null:e=e[s],e==null){if(u!==n.length-1)return r;break}}return e===void 0?r:e}function Xa(e,t,r){if(!Nt(e)||typeof t!="string")return e;const n=e,u=is(t);for(let s=0;s<u.length;s++){const o=u[s];dd(e,o),s===u.length-1?e[o]=r:Nt(e[o])||(e[o]=typeof u[s+1]=="number"?[]:{}),e=e[o]}return n}function Km(e,t){if(!Nt(e)||typeof t!="string")return!1;const r=is(t);for(let n=0;n<r.length;n++){const u=r[n];if(dd(e,u),n===r.length-1)return delete e[u],!0;if(e=e[u],!Nt(e))return!1}}function Bm(e,t){if(!Nt(e)||typeof t!="string")return!1;const r=is(t);if(r.length===0)return!1;for(const n of r){if(!Nt(e)||!(n in e)||Mo(e,n))return!1;e=e[n]}return!0}const vt=rr.default.homedir(),Lo=rr.default.tmpdir(),{env:Ut}=we.default,Hm=e=>{const t=pe.default.join(vt,"Library");return{data:pe.default.join(t,"Application Support",e),config:pe.default.join(t,"Preferences",e),cache:pe.default.join(t,"Caches",e),log:pe.default.join(t,"Logs",e),temp:pe.default.join(Lo,e)}},Wm=e=>{const t=Ut.APPDATA||pe.default.join(vt,"AppData","Roaming"),r=Ut.LOCALAPPDATA||pe.default.join(vt,"AppData","Local");return{data:pe.default.join(r,e,"Data"),config:pe.default.join(t,e,"Config"),cache:pe.default.join(r,e,"Cache"),log:pe.default.join(r,e,"Log"),temp:pe.default.join(Lo,e)}},Jm=e=>{const t=pe.default.basename(vt);return{data:pe.default.join(Ut.XDG_DATA_HOME||pe.default.join(vt,".local","share"),e),config:pe.default.join(Ut.XDG_CONFIG_HOME||pe.default.join(vt,".config"),e),cache:pe.default.join(Ut.XDG_CACHE_HOME||pe.default.join(vt,".cache"),e),log:pe.default.join(Ut.XDG_STATE_HOME||pe.default.join(vt,".local","state"),e),temp:pe.default.join(Lo,t,e)}};function Xm(e,{suffix:t="nodejs"}={}){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return t&&(e+=`-${t}`),we.default.platform==="darwin"?Hm(e):we.default.platform==="win32"?Wm(e):Jm(e)}const ht=(e,t)=>function(...n){return e.apply(void 0,n).catch(t)},st=(e,t)=>function(...n){try{return e.apply(void 0,n)}catch(u){return t(u)}},Ym=we.default.getuid?!we.default.getuid():!1,Zm=1e4,De=()=>{},_e={isChangeErrorOk:e=>{if(!_e.isNodeError(e))return!1;const{code:t}=e;return t==="ENOSYS"||!Ym&&(t==="EINVAL"||t==="EPERM")},isNodeError:e=>e instanceof Error,isRetriableError:e=>{if(!_e.isNodeError(e))return!1;const{code:t}=e;return t==="EMFILE"||t==="ENFILE"||t==="EAGAIN"||t==="EBUSY"||t==="EACCESS"||t==="EACCES"||t==="EACCS"||t==="EPERM"},onChangeError:e=>{if(!_e.isNodeError(e))throw e;if(!_e.isChangeErrorOk(e))throw e}};class Qm{constructor(){this.interval=25,this.intervalId=void 0,this.limit=Zm,this.queueActive=new Set,this.queueWaiting=new Set,this.init=()=>{this.intervalId||(this.intervalId=setInterval(this.tick,this.interval))},this.reset=()=>{this.intervalId&&(clearInterval(this.intervalId),delete this.intervalId)},this.add=t=>{this.queueWaiting.add(t),this.queueActive.size<this.limit/2?this.tick():this.init()},this.remove=t=>{this.queueWaiting.delete(t),this.queueActive.delete(t)},this.schedule=()=>new Promise(t=>{const r=()=>this.remove(n),n=()=>t(r);this.add(n)}),this.tick=()=>{if(!(this.queueActive.size>=this.limit)){if(!this.queueWaiting.size)return this.reset();for(const t of this.queueWaiting){if(this.queueActive.size>=this.limit)break;this.queueWaiting.delete(t),this.queueActive.add(t),t()}}}}}const ep=new Qm,mt=(e,t)=>function(n){return function u(...s){return ep.schedule().then(o=>{const a=f=>(o(),f),l=f=>{if(o(),Date.now()>=n)throw f;if(t(f)){const i=Math.round(100*Math.random());return new Promise(v=>setTimeout(v,i)).then(()=>u.apply(void 0,s))}throw f};return e.apply(void 0,s).then(a,l)})}},pt=(e,t)=>function(n){return function u(...s){try{return e.apply(void 0,s)}catch(o){if(Date.now()>n)throw o;if(t(o))return u.apply(void 0,s);throw o}}},Ie={attempt:{chmod:ht(Pe.promisify(ce.default.chmod),_e.onChangeError),chown:ht(Pe.promisify(ce.default.chown),_e.onChangeError),close:ht(Pe.promisify(ce.default.close),De),fsync:ht(Pe.promisify(ce.default.fsync),De),mkdir:ht(Pe.promisify(ce.default.mkdir),De),realpath:ht(Pe.promisify(ce.default.realpath),De),stat:ht(Pe.promisify(ce.default.stat),De),unlink:ht(Pe.promisify(ce.default.unlink),De),chmodSync:st(ce.default.chmodSync,_e.onChangeError),chownSync:st(ce.default.chownSync,_e.onChangeError),closeSync:st(ce.default.closeSync,De),existsSync:st(ce.default.existsSync,De),fsyncSync:st(ce.default.fsync,De),mkdirSync:st(ce.default.mkdirSync,De),realpathSync:st(ce.default.realpathSync,De),statSync:st(ce.default.statSync,De),unlinkSync:st(ce.default.unlinkSync,De)},retry:{close:mt(Pe.promisify(ce.default.close),_e.isRetriableError),fsync:mt(Pe.promisify(ce.default.fsync),_e.isRetriableError),open:mt(Pe.promisify(ce.default.open),_e.isRetriableError),readFile:mt(Pe.promisify(ce.default.readFile),_e.isRetriableError),rename:mt(Pe.promisify(ce.default.rename),_e.isRetriableError),stat:mt(Pe.promisify(ce.default.stat),_e.isRetriableError),write:mt(Pe.promisify(ce.default.write),_e.isRetriableError),writeFile:mt(Pe.promisify(ce.default.writeFile),_e.isRetriableError),closeSync:pt(ce.default.closeSync,_e.isRetriableError),fsyncSync:pt(ce.default.fsyncSync,_e.isRetriableError),openSync:pt(ce.default.openSync,_e.isRetriableError),readFileSync:pt(ce.default.readFileSync,_e.isRetriableError),renameSync:pt(ce.default.renameSync,_e.isRetriableError),statSync:pt(ce.default.statSync,_e.isRetriableError),writeSync:pt(ce.default.writeSync,_e.isRetriableError),writeFileSync:pt(ce.default.writeFileSync,_e.isRetriableError)}},tp="utf8",Ya=438,rp=511,np={},sp=rr.default.userInfo().uid,ip=rr.default.userInfo().gid,op=1e3,ap=!!we.default.getuid;we.default.getuid&&we.default.getuid();const Za=128,cp=e=>e instanceof Error&&"code"in e,Qa=e=>typeof e=="string",fi=e=>e===void 0,up=we.default.platform==="linux",hd=we.default.platform==="win32",Fo=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];hd||Fo.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");up&&Fo.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED");class lp{constructor(){this.callbacks=new Set,this.exited=!1,this.exit=t=>{if(!this.exited){this.exited=!0;for(const r of this.callbacks)r();t&&(hd&&t!=="SIGINT"&&t!=="SIGTERM"&&t!=="SIGKILL"?we.default.kill(we.default.pid,"SIGTERM"):we.default.kill(we.default.pid,t))}},this.hook=()=>{we.default.once("exit",()=>this.exit());for(const t of Fo)try{we.default.once(t,()=>this.exit(t))}catch{}},this.register=t=>(this.callbacks.add(t),()=>{this.callbacks.delete(t)}),this.hook()}}const fp=new lp,dp=fp.register,Ne={store:{},create:e=>{const t=`000000${Math.floor(Math.random()*16777215).toString(16)}`.slice(-6),u=`.tmp-${Date.now().toString().slice(-10)}${t}`;return`${e}${u}`},get:(e,t,r=!0)=>{const n=Ne.truncate(t(e));return n in Ne.store?Ne.get(e,t,r):(Ne.store[n]=r,[n,()=>delete Ne.store[n]])},purge:e=>{Ne.store[e]&&(delete Ne.store[e],Ie.attempt.unlink(e))},purgeSync:e=>{Ne.store[e]&&(delete Ne.store[e],Ie.attempt.unlinkSync(e))},purgeSyncAll:()=>{for(const e in Ne.store)Ne.purgeSync(e)},truncate:e=>{const t=pe.default.basename(e);if(t.length<=Za)return e;const r=/^(\.?)(.*?)((?:\.[^.]+)?(?:\.tmp-\d{10}[a-f0-9]{6})?)$/.exec(t);if(!r)return e;const n=t.length-Za;return`${e.slice(0,-t.length)}${r[1]}${r[2].slice(0,-n)}${r[3]}`}};dp(Ne.purgeSyncAll);function md(e,t,r=np){if(Qa(r))return md(e,t,{encoding:r});const n=Date.now()+((r.timeout??op)||-1);let u=null,s=null,o=null;try{const a=Ie.attempt.realpathSync(e),l=!!a;e=a||e,[s,u]=Ne.get(e,r.tmpCreate||Ne.create,r.tmpPurge!==!1);const f=ap&&fi(r.chown),i=fi(r.mode);if(l&&(f||i)){const m=Ie.attempt.statSync(e);m&&(r={...r},f&&(r.chown={uid:m.uid,gid:m.gid}),i&&(r.mode=m.mode))}if(!l){const m=pe.default.dirname(e);Ie.attempt.mkdirSync(m,{mode:rp,recursive:!0})}o=Ie.retry.openSync(n)(s,"w",r.mode||Ya),r.tmpCreated&&r.tmpCreated(s),Qa(t)?Ie.retry.writeSync(n)(o,t,0,r.encoding||tp):fi(t)||Ie.retry.writeSync(n)(o,t,0,t.length,0),r.fsync!==!1&&(r.fsyncWait!==!1?Ie.retry.fsyncSync(n)(o):Ie.attempt.fsync(o)),Ie.retry.closeSync(n)(o),o=null,r.chown&&(r.chown.uid!==sp||r.chown.gid!==ip)&&Ie.attempt.chownSync(s,r.chown.uid,r.chown.gid),r.mode&&r.mode!==Ya&&Ie.attempt.chmodSync(s,r.mode);try{Ie.retry.renameSync(n)(s,e)}catch(m){if(!cp(m)||m.code!=="ENAMETOOLONG")throw m;Ie.retry.renameSync(n)(s,Ne.truncate(e))}u(),s=null}finally{o&&Ie.attempt.closeSync(o),s&&Ne.purge(s)}}var hr={exports:{}},di={},it={},wt={},hi={},mi={},pi={},ec;function es(){return ec||(ec=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(c){if(super(),!e.IDENTIFIER.test(c))throw new Error("CodeGen: name must be a valid identifier");this.str=c}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(c){super(),this._items=typeof c=="string"?[c]:c}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const c=this._items[0];return c===""||c==='""'}get str(){var c;return(c=this._str)!==null&&c!==void 0?c:this._str=this._items.reduce((d,w)=>`${d}${w}`,"")}get names(){var c;return(c=this._names)!==null&&c!==void 0?c:this._names=this._items.reduce((d,w)=>(w instanceof r&&(d[w.str]=(d[w.str]||0)+1),d),{})}}e._Code=n,e.nil=new n("");function u(p,...c){const d=[p[0]];let w=0;for(;w<c.length;)a(d,c[w]),d.push(p[++w]);return new n(d)}e._=u;const s=new n("+");function o(p,...c){const d=[$(p[0])];let w=0;for(;w<c.length;)d.push(s),a(d,c[w]),d.push(s,$(p[++w]));return l(d),new n(d)}e.str=o;function a(p,c){c instanceof n?p.push(...c._items):c instanceof r?p.push(c):p.push(m(c))}e.addCodeArg=a;function l(p){let c=1;for(;c<p.length-1;){if(p[c]===s){const d=f(p[c-1],p[c+1]);if(d!==void 0){p.splice(c-1,3,d);continue}p[c++]="+"}c++}}function f(p,c){if(c==='""')return p;if(p==='""')return c;if(typeof p=="string")return c instanceof r||p[p.length-1]!=='"'?void 0:typeof c!="string"?`${p.slice(0,-1)}${c}"`:c[0]==='"'?p.slice(0,-1)+c.slice(1):void 0;if(typeof c=="string"&&c[0]==='"'&&!(p instanceof r))return`"${p}${c.slice(1)}`}function i(p,c){return c.emptyStr()?p:p.emptyStr()?c:o`${p}${c}`}e.strConcat=i;function m(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:$(Array.isArray(p)?p.join(","):p)}function v(p){return new n($(p))}e.stringify=v;function $(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=$;function S(p){return typeof p=="string"&&e.IDENTIFIER.test(p)?new n(`.${p}`):u`[${p}]`}e.getProperty=S;function y(p){if(typeof p=="string"&&e.IDENTIFIER.test(p))return new n(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}e.getEsmExportName=y;function h(p){return new n(p.toString())}e.regexpCode=h}(pi)),pi}var yi={},tc;function rc(){return tc||(tc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=es();class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var n;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class u{constructor({prefixes:f,parent:i}={}){this._names={},this._prefixes=f,this._parent=i}toName(f){return f instanceof t.Name?f:this.name(f)}name(f){return new t.Name(this._newName(f))}_newName(f){const i=this._names[f]||this._nameGroup(f);return`${f}${i.index++}`}_nameGroup(f){var i,m;if(!((m=(i=this._parent)===null||i===void 0?void 0:i._prefixes)===null||m===void 0)&&m.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}e.Scope=u;class s extends t.Name{constructor(f,i){super(i),this.prefix=f}setValue(f,{property:i,itemIndex:m}){this.value=f,this.scopePath=(0,t._)`.${new t.Name(i)}[${m}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends u{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?o:t.nil}}get(){return this._scope}name(f){return new s(f,this._newName(f))}value(f,i){var m;if(i.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(f),{prefix:$}=v,S=(m=i.key)!==null&&m!==void 0?m:i.ref;let y=this._values[$];if(y){const c=y.get(S);if(c)return c}else y=this._values[$]=new Map;y.set(S,v);const h=this._scope[$]||(this._scope[$]=[]),p=h.length;return h[p]=i.ref,v.setValue(i,{property:$,itemIndex:p}),v}getValue(f,i){const m=this._values[f];if(m)return m.get(i)}scopeRefs(f,i=this._values){return this._reduceValues(i,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,t._)`${f}${m.scopePath}`})}scopeCode(f=this._values,i,m){return this._reduceValues(f,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},i,m)}_reduceValues(f,i,m={},v){let $=t.nil;for(const S in f){const y=f[S];if(!y)continue;const h=m[S]=m[S]||new Map;y.forEach(p=>{if(h.has(p))return;h.set(p,n.Started);let c=i(p);if(c){const d=this.opts.es5?e.varKinds.var:e.varKinds.const;$=(0,t._)`${$}${d} ${p} = ${c};${this.opts._n}`}else if(c=v?.(p))$=(0,t._)`${$}${c}${this.opts._n}`;else throw new r(p);h.set(p,n.Completed)})}return $}}e.ValueScope=a}(yi)),yi}var nc;function oe(){return nc||(nc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=es(),r=rc();var n=es();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var u=rc();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return u.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return u.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return u.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return u.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(g,b){return this}}class o extends s{constructor(g,b,M){super(),this.varKind=g,this.name=b,this.rhs=M}render({es5:g,_n:b}){const M=g?r.varKinds.var:this.varKind,H=this.rhs===void 0?"":` = ${this.rhs}`;return`${M} ${this.name}${H};`+b}optimizeNames(g,b){if(g[this.name.str])return this.rhs&&(this.rhs=A(this.rhs,g,b)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(g,b,M){super(),this.lhs=g,this.rhs=b,this.sideEffects=M}render({_n:g}){return`${this.lhs} = ${this.rhs};`+g}optimizeNames(g,b){if(!(this.lhs instanceof t.Name&&!g[this.lhs.str]&&!this.sideEffects))return this.rhs=A(this.rhs,g,b),this}get names(){const g=this.lhs instanceof t.Name?{}:{...this.lhs.names};return I(g,this.rhs)}}class l extends a{constructor(g,b,M,H){super(g,M,H),this.op=b}render({_n:g}){return`${this.lhs} ${this.op}= ${this.rhs};`+g}}class f extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`${this.label}:`+g}}class i extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`break${this.label?` ${this.label}`:""};`+g}}class m extends s{constructor(g){super(),this.error=g}render({_n:g}){return`throw ${this.error};`+g}get names(){return this.error.names}}class v extends s{constructor(g){super(),this.code=g}render({_n:g}){return`${this.code};`+g}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(g,b){return this.code=A(this.code,g,b),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class $ extends s{constructor(g=[]){super(),this.nodes=g}render(g){return this.nodes.reduce((b,M)=>b+M.render(g),"")}optimizeNodes(){const{nodes:g}=this;let b=g.length;for(;b--;){const M=g[b].optimizeNodes();Array.isArray(M)?g.splice(b,1,...M):M?g[b]=M:g.splice(b,1)}return g.length>0?this:void 0}optimizeNames(g,b){const{nodes:M}=this;let H=M.length;for(;H--;){const W=M[H];W.optimizeNames(g,b)||(V(g,W.names),M.splice(H,1))}return M.length>0?this:void 0}get names(){return this.nodes.reduce((g,b)=>x(g,b.names),{})}}class S extends ${render(g){return"{"+g._n+super.render(g)+"}"+g._n}}class y extends ${}class h extends S{}h.kind="else";class p extends S{constructor(g,b){super(b),this.condition=g}render(g){let b=`if(${this.condition})`+super.render(g);return this.else&&(b+="else "+this.else.render(g)),b}optimizeNodes(){super.optimizeNodes();const g=this.condition;if(g===!0)return this.nodes;let b=this.else;if(b){const M=b.optimizeNodes();b=this.else=Array.isArray(M)?new h(M):M}if(b)return g===!1?b instanceof p?b:b.nodes:this.nodes.length?this:new p(L(g),b instanceof p?[b]:b.nodes);if(!(g===!1||!this.nodes.length))return this}optimizeNames(g,b){var M;if(this.else=(M=this.else)===null||M===void 0?void 0:M.optimizeNames(g,b),!!(super.optimizeNames(g,b)||this.else))return this.condition=A(this.condition,g,b),this}get names(){const g=super.names;return I(g,this.condition),this.else&&x(g,this.else.names),g}}p.kind="if";class c extends S{}c.kind="for";class d extends c{constructor(g){super(),this.iteration=g}render(g){return`for(${this.iteration})`+super.render(g)}optimizeNames(g,b){if(super.optimizeNames(g,b))return this.iteration=A(this.iteration,g,b),this}get names(){return x(super.names,this.iteration.names)}}class w extends c{constructor(g,b,M,H){super(),this.varKind=g,this.name=b,this.from=M,this.to=H}render(g){const b=g.es5?r.varKinds.var:this.varKind,{name:M,from:H,to:W}=this;return`for(${b} ${M}=${H}; ${M}<${W}; ${M}++)`+super.render(g)}get names(){const g=I(super.names,this.from);return I(g,this.to)}}class E extends c{constructor(g,b,M,H){super(),this.loop=g,this.varKind=b,this.name=M,this.iterable=H}render(g){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(g)}optimizeNames(g,b){if(super.optimizeNames(g,b))return this.iterable=A(this.iterable,g,b),this}get names(){return x(super.names,this.iterable.names)}}class _ extends S{constructor(g,b,M){super(),this.name=g,this.args=b,this.async=M}render(g){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(g)}}_.kind="func";class R extends ${render(g){return"return "+super.render(g)}}R.kind="return";class N extends S{render(g){let b="try"+super.render(g);return this.catch&&(b+=this.catch.render(g)),this.finally&&(b+=this.finally.render(g)),b}optimizeNodes(){var g,b;return super.optimizeNodes(),(g=this.catch)===null||g===void 0||g.optimizeNodes(),(b=this.finally)===null||b===void 0||b.optimizeNodes(),this}optimizeNames(g,b){var M,H;return super.optimizeNames(g,b),(M=this.catch)===null||M===void 0||M.optimizeNames(g,b),(H=this.finally)===null||H===void 0||H.optimizeNames(g,b),this}get names(){const g=super.names;return this.catch&&x(g,this.catch.names),this.finally&&x(g,this.finally.names),g}}class C extends S{constructor(g){super(),this.error=g}render(g){return`catch(${this.error})`+super.render(g)}}C.kind="catch";class U extends S{render(g){return"finally"+super.render(g)}}U.kind="finally";class F{constructor(g,b={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...b,_n:b.lines?`
`:""},this._extScope=g,this._scope=new r.Scope({parent:g}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(g){return this._scope.name(g)}scopeName(g){return this._extScope.name(g)}scopeValue(g,b){const M=this._extScope.value(g,b);return(this._values[M.prefix]||(this._values[M.prefix]=new Set)).add(M),M}getScopeValue(g,b){return this._extScope.getValue(g,b)}scopeRefs(g){return this._extScope.scopeRefs(g,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(g,b,M,H){const W=this._scope.toName(b);return M!==void 0&&H&&(this._constants[W.str]=M),this._leafNode(new o(g,W,M)),W}const(g,b,M){return this._def(r.varKinds.const,g,b,M)}let(g,b,M){return this._def(r.varKinds.let,g,b,M)}var(g,b,M){return this._def(r.varKinds.var,g,b,M)}assign(g,b,M){return this._leafNode(new a(g,b,M))}add(g,b){return this._leafNode(new l(g,e.operators.ADD,b))}code(g){return typeof g=="function"?g():g!==t.nil&&this._leafNode(new v(g)),this}object(...g){const b=["{"];for(const[M,H]of g)b.length>1&&b.push(","),b.push(M),(M!==H||this.opts.es5)&&(b.push(":"),(0,t.addCodeArg)(b,H));return b.push("}"),new t._Code(b)}if(g,b,M){if(this._blockNode(new p(g)),b&&M)this.code(b).else().code(M).endIf();else if(b)this.code(b).endIf();else if(M)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(g){return this._elseNode(new p(g))}else(){return this._elseNode(new h)}endIf(){return this._endBlockNode(p,h)}_for(g,b){return this._blockNode(g),b&&this.code(b).endFor(),this}for(g,b){return this._for(new d(g),b)}forRange(g,b,M,H,W=this.opts.es5?r.varKinds.var:r.varKinds.let){const X=this._scope.toName(g);return this._for(new w(W,X,b,M),()=>H(X))}forOf(g,b,M,H=r.varKinds.const){const W=this._scope.toName(g);if(this.opts.es5){const X=b instanceof t.Name?b:this.var("_arr",b);return this.forRange("_i",0,(0,t._)`${X}.length`,Y=>{this.var(W,(0,t._)`${X}[${Y}]`),M(W)})}return this._for(new E("of",H,W,b),()=>M(W))}forIn(g,b,M,H=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(g,(0,t._)`Object.keys(${b})`,M);const W=this._scope.toName(g);return this._for(new E("in",H,W,b),()=>M(W))}endFor(){return this._endBlockNode(c)}label(g){return this._leafNode(new f(g))}break(g){return this._leafNode(new i(g))}return(g){const b=new R;if(this._blockNode(b),this.code(g),b.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(g,b,M){if(!b&&!M)throw new Error('CodeGen: "try" without "catch" and "finally"');const H=new N;if(this._blockNode(H),this.code(g),b){const W=this.name("e");this._currNode=H.catch=new C(W),b(W)}return M&&(this._currNode=H.finally=new U,this.code(M)),this._endBlockNode(C,U)}throw(g){return this._leafNode(new m(g))}block(g,b){return this._blockStarts.push(this._nodes.length),g&&this.code(g).endBlock(b),this}endBlock(g){const b=this._blockStarts.pop();if(b===void 0)throw new Error("CodeGen: not in self-balancing block");const M=this._nodes.length-b;if(M<0||g!==void 0&&M!==g)throw new Error(`CodeGen: wrong number of nodes: ${M} vs ${g} expected`);return this._nodes.length=b,this}func(g,b=t.nil,M,H){return this._blockNode(new _(g,b,M)),H&&this.code(H).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(g=1){for(;g-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(g){return this._currNode.nodes.push(g),this}_blockNode(g){this._currNode.nodes.push(g),this._nodes.push(g)}_endBlockNode(g,b){const M=this._currNode;if(M instanceof g||b&&M instanceof b)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${b?`${g.kind}/${b.kind}`:g.kind}"`)}_elseNode(g){const b=this._currNode;if(!(b instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=b.else=g,this}get _root(){return this._nodes[0]}get _currNode(){const g=this._nodes;return g[g.length-1]}set _currNode(g){const b=this._nodes;b[b.length-1]=g}}e.CodeGen=F;function x(O,g){for(const b in g)O[b]=(O[b]||0)+(g[b]||0);return O}function I(O,g){return g instanceof t._CodeOrName?x(O,g.names):O}function A(O,g,b){if(O instanceof t.Name)return M(O);if(!H(O))return O;return new t._Code(O._items.reduce((W,X)=>(X instanceof t.Name&&(X=M(X)),X instanceof t._Code?W.push(...X._items):W.push(X),W),[]));function M(W){const X=b[W.str];return X===void 0||g[W.str]!==1?W:(delete g[W.str],X)}function H(W){return W instanceof t._Code&&W._items.some(X=>X instanceof t.Name&&g[X.str]===1&&b[X.str]!==void 0)}}function V(O,g){for(const b in g)O[b]=(O[b]||0)-(g[b]||0)}function L(O){return typeof O=="boolean"||typeof O=="number"||O===null?!O:(0,t._)`!${k(O)}`}e.not=L;const K=P(e.operators.AND);function B(...O){return O.reduce(K)}e.and=B;const G=P(e.operators.OR);function q(...O){return O.reduce(G)}e.or=q;function P(O){return(g,b)=>g===t.nil?b:b===t.nil?g:(0,t._)`${k(g)} ${O} ${k(b)}`}function k(O){return O instanceof t.Name?O:(0,t._)`(${O})`}}(mi)),mi}var ue={},sc;function he(){if(sc)return ue;sc=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.checkStrictMode=ue.getErrorPath=ue.Type=ue.useFunc=ue.setEvaluated=ue.evaluatedPropsToName=ue.mergeEvaluated=ue.eachItem=ue.unescapeJsonPointer=ue.escapeJsonPointer=ue.escapeFragment=ue.unescapeFragment=ue.schemaRefOrVal=ue.schemaHasRulesButRef=ue.schemaHasRules=ue.checkUnknownRules=ue.alwaysValidSchema=ue.toHash=void 0;const e=oe(),t=es();function r(E){const _={};for(const R of E)_[R]=!0;return _}ue.toHash=r;function n(E,_){return typeof _=="boolean"?_:Object.keys(_).length===0?!0:(u(E,_),!s(_,E.self.RULES.all))}ue.alwaysValidSchema=n;function u(E,_=E.schema){const{opts:R,self:N}=E;if(!R.strictSchema||typeof _=="boolean")return;const C=N.RULES.keywords;for(const U in _)C[U]||w(E,`unknown keyword: "${U}"`)}ue.checkUnknownRules=u;function s(E,_){if(typeof E=="boolean")return!E;for(const R in E)if(_[R])return!0;return!1}ue.schemaHasRules=s;function o(E,_){if(typeof E=="boolean")return!E;for(const R in E)if(R!=="$ref"&&_.all[R])return!0;return!1}ue.schemaHasRulesButRef=o;function a({topSchemaRef:E,schemaPath:_},R,N,C){if(!C){if(typeof R=="number"||typeof R=="boolean")return R;if(typeof R=="string")return(0,e._)`${R}`}return(0,e._)`${E}${_}${(0,e.getProperty)(N)}`}ue.schemaRefOrVal=a;function l(E){return m(decodeURIComponent(E))}ue.unescapeFragment=l;function f(E){return encodeURIComponent(i(E))}ue.escapeFragment=f;function i(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}ue.escapeJsonPointer=i;function m(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}ue.unescapeJsonPointer=m;function v(E,_){if(Array.isArray(E))for(const R of E)_(R);else _(E)}ue.eachItem=v;function $({mergeNames:E,mergeToName:_,mergeValues:R,resultToName:N}){return(C,U,F,x)=>{const I=F===void 0?U:F instanceof e.Name?(U instanceof e.Name?E(C,U,F):_(C,U,F),F):U instanceof e.Name?(_(C,F,U),U):R(U,F);return x===e.Name&&!(I instanceof e.Name)?N(C,I):I}}ue.mergeEvaluated={props:$({mergeNames:(E,_,R)=>E.if((0,e._)`${R} !== true && ${_} !== undefined`,()=>{E.if((0,e._)`${_} === true`,()=>E.assign(R,!0),()=>E.assign(R,(0,e._)`${R} || {}`).code((0,e._)`Object.assign(${R}, ${_})`))}),mergeToName:(E,_,R)=>E.if((0,e._)`${R} !== true`,()=>{_===!0?E.assign(R,!0):(E.assign(R,(0,e._)`${R} || {}`),y(E,R,_))}),mergeValues:(E,_)=>E===!0?!0:{...E,..._},resultToName:S}),items:$({mergeNames:(E,_,R)=>E.if((0,e._)`${R} !== true && ${_} !== undefined`,()=>E.assign(R,(0,e._)`${_} === true ? true : ${R} > ${_} ? ${R} : ${_}`)),mergeToName:(E,_,R)=>E.if((0,e._)`${R} !== true`,()=>E.assign(R,_===!0?!0:(0,e._)`${R} > ${_} ? ${R} : ${_}`)),mergeValues:(E,_)=>E===!0?!0:Math.max(E,_),resultToName:(E,_)=>E.var("items",_)})};function S(E,_){if(_===!0)return E.var("props",!0);const R=E.var("props",(0,e._)`{}`);return _!==void 0&&y(E,R,_),R}ue.evaluatedPropsToName=S;function y(E,_,R){Object.keys(R).forEach(N=>E.assign((0,e._)`${_}${(0,e.getProperty)(N)}`,!0))}ue.setEvaluated=y;const h={};function p(E,_){return E.scopeValue("func",{ref:_,code:h[_.code]||(h[_.code]=new t._Code(_.code))})}ue.useFunc=p;var c;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(c||(ue.Type=c={}));function d(E,_,R){if(E instanceof e.Name){const N=_===c.Num;return R?N?(0,e._)`"[" + ${E} + "]"`:(0,e._)`"['" + ${E} + "']"`:N?(0,e._)`"/" + ${E}`:(0,e._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return R?(0,e.getProperty)(E).toString():"/"+i(E)}ue.getErrorPath=d;function w(E,_,R=E.opts.strictSchema){if(R){if(_=`strict mode: ${_}`,R===!0)throw new Error(_);E.self.logger.warn(_)}}return ue.checkStrictMode=w,ue}var mr={},ic;function We(){if(ic)return mr;ic=1,Object.defineProperty(mr,"__esModule",{value:!0});const e=oe(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return mr.default=t,mr}var oc;function os(){return oc||(oc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=oe(),r=he(),n=We();e.keywordError={message:({keyword:h})=>(0,t.str)`must pass "${h}" keyword validation`},e.keyword$DataError={message:({keyword:h,schemaType:p})=>p?(0,t.str)`"${h}" keyword must be ${p} ($data)`:(0,t.str)`"${h}" keyword is invalid ($data)`};function u(h,p=e.keywordError,c,d){const{it:w}=h,{gen:E,compositeRule:_,allErrors:R}=w,N=m(h,p,c);d??(_||R)?l(E,N):f(w,(0,t._)`[${N}]`)}e.reportError=u;function s(h,p=e.keywordError,c){const{it:d}=h,{gen:w,compositeRule:E,allErrors:_}=d,R=m(h,p,c);l(w,R),E||_||f(d,n.default.vErrors)}e.reportExtraError=s;function o(h,p){h.assign(n.default.errors,p),h.if((0,t._)`${n.default.vErrors} !== null`,()=>h.if(p,()=>h.assign((0,t._)`${n.default.vErrors}.length`,p),()=>h.assign(n.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:h,keyword:p,schemaValue:c,data:d,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const _=h.name("err");h.forRange("i",w,n.default.errors,R=>{h.const(_,(0,t._)`${n.default.vErrors}[${R}]`),h.if((0,t._)`${_}.instancePath === undefined`,()=>h.assign((0,t._)`${_}.instancePath`,(0,t.strConcat)(n.default.instancePath,E.errorPath))),h.assign((0,t._)`${_}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${p}`),E.opts.verbose&&(h.assign((0,t._)`${_}.schema`,c),h.assign((0,t._)`${_}.data`,d))})}e.extendErrors=a;function l(h,p){const c=h.const("err",p);h.if((0,t._)`${n.default.vErrors} === null`,()=>h.assign(n.default.vErrors,(0,t._)`[${c}]`),(0,t._)`${n.default.vErrors}.push(${c})`),h.code((0,t._)`${n.default.errors}++`)}function f(h,p){const{gen:c,validateName:d,schemaEnv:w}=h;w.$async?c.throw((0,t._)`new ${h.ValidationError}(${p})`):(c.assign((0,t._)`${d}.errors`,p),c.return(!1))}const i={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function m(h,p,c){const{createErrors:d}=h.it;return d===!1?(0,t._)`{}`:v(h,p,c)}function v(h,p,c={}){const{gen:d,it:w}=h,E=[$(w,c),S(h,c)];return y(h,p,E),d.object(...E)}function $({errorPath:h},{instancePath:p}){const c=p?(0,t.str)`${h}${(0,r.getErrorPath)(p,r.Type.Str)}`:h;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,c)]}function S({keyword:h,it:{errSchemaPath:p}},{schemaPath:c,parentSchema:d}){let w=d?p:(0,t.str)`${p}/${h}`;return c&&(w=(0,t.str)`${w}${(0,r.getErrorPath)(c,r.Type.Str)}`),[i.schemaPath,w]}function y(h,{params:p,message:c},d){const{keyword:w,data:E,schemaValue:_,it:R}=h,{opts:N,propertyName:C,topSchemaRef:U,schemaPath:F}=R;d.push([i.keyword,w],[i.params,typeof p=="function"?p(h):p||(0,t._)`{}`]),N.messages&&d.push([i.message,typeof c=="function"?c(h):c]),N.verbose&&d.push([i.schema,_],[i.parentSchema,(0,t._)`${U}${F}`],[n.default.data,E]),C&&d.push([i.propertyName,C])}}(hi)),hi}var ac;function hp(){if(ac)return wt;ac=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.boolOrEmptySchema=wt.topBoolOrEmptySchema=void 0;const e=os(),t=oe(),r=We(),n={message:"boolean schema is false"};function u(a){const{gen:l,schema:f,validateName:i}=a;f===!1?o(a,!1):typeof f=="object"&&f.$async===!0?l.return(r.default.data):(l.assign((0,t._)`${i}.errors`,null),l.return(!0))}wt.topBoolOrEmptySchema=u;function s(a,l){const{gen:f,schema:i}=a;i===!1?(f.var(l,!1),o(a)):f.var(l,!0)}wt.boolOrEmptySchema=s;function o(a,l){const{gen:f,data:i}=a,m={gen:f,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(m,n,void 0,l)}return wt}var be={},Et={},cc;function pd(){if(cc)return Et;cc=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.getRules=Et.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(u){return typeof u=="string"&&t.has(u)}Et.isJSONType=r;function n(){const u={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...u,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},u.number,u.string,u.array,u.object],post:{rules:[]},all:{},keywords:{}}}return Et.getRules=n,Et}var ot={},uc;function yd(){if(uc)return ot;uc=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.shouldUseRule=ot.shouldUseGroup=ot.schemaHasRulesForType=void 0;function e({schema:n,self:u},s){const o=u.RULES.types[s];return o&&o!==!0&&t(n,o)}ot.schemaHasRulesForType=e;function t(n,u){return u.rules.some(s=>r(n,s))}ot.shouldUseGroup=t;function r(n,u){var s;return n[u.keyword]!==void 0||((s=u.definition.implements)===null||s===void 0?void 0:s.some(o=>n[o]!==void 0))}return ot.shouldUseRule=r,ot}var lc;function ts(){if(lc)return be;lc=1,Object.defineProperty(be,"__esModule",{value:!0}),be.reportTypeError=be.checkDataTypes=be.checkDataType=be.coerceAndCheckDataType=be.getJSONTypes=be.getSchemaTypes=be.DataType=void 0;const e=pd(),t=yd(),r=os(),n=oe(),u=he();var s;(function(c){c[c.Correct=0]="Correct",c[c.Wrong=1]="Wrong"})(s||(be.DataType=s={}));function o(c){const d=a(c.type);if(d.includes("null")){if(c.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!d.length&&c.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');c.nullable===!0&&d.push("null")}return d}be.getSchemaTypes=o;function a(c){const d=Array.isArray(c)?c:c?[c]:[];if(d.every(e.isJSONType))return d;throw new Error("type must be JSONType or JSONType[]: "+d.join(","))}be.getJSONTypes=a;function l(c,d){const{gen:w,data:E,opts:_}=c,R=i(d,_.coerceTypes),N=d.length>0&&!(R.length===0&&d.length===1&&(0,t.schemaHasRulesForType)(c,d[0]));if(N){const C=S(d,E,_.strictNumbers,s.Wrong);w.if(C,()=>{R.length?m(c,d,R):h(c)})}return N}be.coerceAndCheckDataType=l;const f=new Set(["string","number","integer","boolean","null"]);function i(c,d){return d?c.filter(w=>f.has(w)||d==="array"&&w==="array"):[]}function m(c,d,w){const{gen:E,data:_,opts:R}=c,N=E.let("dataType",(0,n._)`typeof ${_}`),C=E.let("coerced",(0,n._)`undefined`);R.coerceTypes==="array"&&E.if((0,n._)`${N} == 'object' && Array.isArray(${_}) && ${_}.length == 1`,()=>E.assign(_,(0,n._)`${_}[0]`).assign(N,(0,n._)`typeof ${_}`).if(S(d,_,R.strictNumbers),()=>E.assign(C,_))),E.if((0,n._)`${C} !== undefined`);for(const F of w)(f.has(F)||F==="array"&&R.coerceTypes==="array")&&U(F);E.else(),h(c),E.endIf(),E.if((0,n._)`${C} !== undefined`,()=>{E.assign(_,C),v(c,C)});function U(F){switch(F){case"string":E.elseIf((0,n._)`${N} == "number" || ${N} == "boolean"`).assign(C,(0,n._)`"" + ${_}`).elseIf((0,n._)`${_} === null`).assign(C,(0,n._)`""`);return;case"number":E.elseIf((0,n._)`${N} == "boolean" || ${_} === null
              || (${N} == "string" && ${_} && ${_} == +${_})`).assign(C,(0,n._)`+${_}`);return;case"integer":E.elseIf((0,n._)`${N} === "boolean" || ${_} === null
              || (${N} === "string" && ${_} && ${_} == +${_} && !(${_} % 1))`).assign(C,(0,n._)`+${_}`);return;case"boolean":E.elseIf((0,n._)`${_} === "false" || ${_} === 0 || ${_} === null`).assign(C,!1).elseIf((0,n._)`${_} === "true" || ${_} === 1`).assign(C,!0);return;case"null":E.elseIf((0,n._)`${_} === "" || ${_} === 0 || ${_} === false`),E.assign(C,null);return;case"array":E.elseIf((0,n._)`${N} === "string" || ${N} === "number"
              || ${N} === "boolean" || ${_} === null`).assign(C,(0,n._)`[${_}]`)}}}function v({gen:c,parentData:d,parentDataProperty:w},E){c.if((0,n._)`${d} !== undefined`,()=>c.assign((0,n._)`${d}[${w}]`,E))}function $(c,d,w,E=s.Correct){const _=E===s.Correct?n.operators.EQ:n.operators.NEQ;let R;switch(c){case"null":return(0,n._)`${d} ${_} null`;case"array":R=(0,n._)`Array.isArray(${d})`;break;case"object":R=(0,n._)`${d} && typeof ${d} == "object" && !Array.isArray(${d})`;break;case"integer":R=N((0,n._)`!(${d} % 1) && !isNaN(${d})`);break;case"number":R=N();break;default:return(0,n._)`typeof ${d} ${_} ${c}`}return E===s.Correct?R:(0,n.not)(R);function N(C=n.nil){return(0,n.and)((0,n._)`typeof ${d} == "number"`,C,w?(0,n._)`isFinite(${d})`:n.nil)}}be.checkDataType=$;function S(c,d,w,E){if(c.length===1)return $(c[0],d,w,E);let _;const R=(0,u.toHash)(c);if(R.array&&R.object){const N=(0,n._)`typeof ${d} != "object"`;_=R.null?N:(0,n._)`!${d} || ${N}`,delete R.null,delete R.array,delete R.object}else _=n.nil;R.number&&delete R.integer;for(const N in R)_=(0,n.and)(_,$(N,d,w,E));return _}be.checkDataTypes=S;const y={message:({schema:c})=>`must be ${c}`,params:({schema:c,schemaValue:d})=>typeof c=="string"?(0,n._)`{type: ${c}}`:(0,n._)`{type: ${d}}`};function h(c){const d=p(c);(0,r.reportError)(d,y)}be.reportTypeError=h;function p(c){const{gen:d,data:w,schema:E}=c,_=(0,u.schemaRefOrVal)(c,E,"type");return{gen:d,keyword:"type",data:w,schema:E.type,schemaCode:_,schemaValue:_,parentSchema:E,params:{},it:c}}return be}var Wt={},fc;function mp(){if(fc)return Wt;fc=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.assignDefaults=void 0;const e=oe(),t=he();function r(u,s){const{properties:o,items:a}=u.schema;if(s==="object"&&o)for(const l in o)n(u,l,o[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,f)=>n(u,f,l.default))}Wt.assignDefaults=r;function n(u,s,o){const{gen:a,compositeRule:l,data:f,opts:i}=u;if(o===void 0)return;const m=(0,e._)`${f}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(u,`default is ignored for: ${m}`);return}let v=(0,e._)`${m} === undefined`;i.useDefaults==="empty"&&(v=(0,e._)`${v} || ${m} === null || ${m} === ""`),a.if(v,(0,e._)`${m} = ${(0,e.stringify)(o)}`)}return Wt}var xe={},ye={},dc;function Je(){if(dc)return ye;dc=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.validateUnion=ye.validateArray=ye.usePattern=ye.callValidateCode=ye.schemaProperties=ye.allSchemaProperties=ye.noPropertyInData=ye.propertyInData=ye.isOwnProperty=ye.hasPropFunc=ye.reportMissingProp=ye.checkMissingProp=ye.checkReportMissingProp=void 0;const e=oe(),t=he(),r=We(),n=he();function u(c,d){const{gen:w,data:E,it:_}=c;w.if(i(w,E,d,_.opts.ownProperties),()=>{c.setParams({missingProperty:(0,e._)`${d}`},!0),c.error()})}ye.checkReportMissingProp=u;function s({gen:c,data:d,it:{opts:w}},E,_){return(0,e.or)(...E.map(R=>(0,e.and)(i(c,d,R,w.ownProperties),(0,e._)`${_} = ${R}`)))}ye.checkMissingProp=s;function o(c,d){c.setParams({missingProperty:d},!0),c.error()}ye.reportMissingProp=o;function a(c){return c.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}ye.hasPropFunc=a;function l(c,d,w){return(0,e._)`${a(c)}.call(${d}, ${w})`}ye.isOwnProperty=l;function f(c,d,w,E){const _=(0,e._)`${d}${(0,e.getProperty)(w)} !== undefined`;return E?(0,e._)`${_} && ${l(c,d,w)}`:_}ye.propertyInData=f;function i(c,d,w,E){const _=(0,e._)`${d}${(0,e.getProperty)(w)} === undefined`;return E?(0,e.or)(_,(0,e.not)(l(c,d,w))):_}ye.noPropertyInData=i;function m(c){return c?Object.keys(c).filter(d=>d!=="__proto__"):[]}ye.allSchemaProperties=m;function v(c,d){return m(d).filter(w=>!(0,t.alwaysValidSchema)(c,d[w]))}ye.schemaProperties=v;function $({schemaCode:c,data:d,it:{gen:w,topSchemaRef:E,schemaPath:_,errorPath:R},it:N},C,U,F){const x=F?(0,e._)`${c}, ${d}, ${E}${_}`:d,I=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,R)],[r.default.parentData,N.parentData],[r.default.parentDataProperty,N.parentDataProperty],[r.default.rootData,r.default.rootData]];N.opts.dynamicRef&&I.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const A=(0,e._)`${x}, ${w.object(...I)}`;return U!==e.nil?(0,e._)`${C}.call(${U}, ${A})`:(0,e._)`${C}(${A})`}ye.callValidateCode=$;const S=(0,e._)`new RegExp`;function y({gen:c,it:{opts:d}},w){const E=d.unicodeRegExp?"u":"",{regExp:_}=d.code,R=_(w,E);return c.scopeValue("pattern",{key:R.toString(),ref:R,code:(0,e._)`${_.code==="new RegExp"?S:(0,n.useFunc)(c,_)}(${w}, ${E})`})}ye.usePattern=y;function h(c){const{gen:d,data:w,keyword:E,it:_}=c,R=d.name("valid");if(_.allErrors){const C=d.let("valid",!0);return N(()=>d.assign(C,!1)),C}return d.var(R,!0),N(()=>d.break()),R;function N(C){const U=d.const("len",(0,e._)`${w}.length`);d.forRange("i",0,U,F=>{c.subschema({keyword:E,dataProp:F,dataPropType:t.Type.Num},R),d.if((0,e.not)(R),C)})}}ye.validateArray=h;function p(c){const{gen:d,schema:w,keyword:E,it:_}=c;if(!Array.isArray(w))throw new Error("ajv implementation error");if(w.some(U=>(0,t.alwaysValidSchema)(_,U))&&!_.opts.unevaluated)return;const N=d.let("valid",!1),C=d.name("_valid");d.block(()=>w.forEach((U,F)=>{const x=c.subschema({keyword:E,schemaProp:F,compositeRule:!0},C);d.assign(N,(0,e._)`${N} || ${C}`),c.mergeValidEvaluated(x,C)||d.if((0,e.not)(N))})),c.result(N,()=>c.reset(),()=>c.error(!0))}return ye.validateUnion=p,ye}var hc;function pp(){if(hc)return xe;hc=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.validateKeywordUsage=xe.validSchemaType=xe.funcKeywordCode=xe.macroKeywordCode=void 0;const e=oe(),t=We(),r=Je(),n=os();function u(v,$){const{gen:S,keyword:y,schema:h,parentSchema:p,it:c}=v,d=$.macro.call(c.self,h,p,c),w=f(S,y,d);c.opts.validateSchema!==!1&&c.self.validateSchema(d,!0);const E=S.name("valid");v.subschema({schema:d,schemaPath:e.nil,errSchemaPath:`${c.errSchemaPath}/${y}`,topSchemaRef:w,compositeRule:!0},E),v.pass(E,()=>v.error(!0))}xe.macroKeywordCode=u;function s(v,$){var S;const{gen:y,keyword:h,schema:p,parentSchema:c,$data:d,it:w}=v;l(w,$);const E=!d&&$.compile?$.compile.call(w.self,p,c,w):$.validate,_=f(y,h,E),R=y.let("valid");v.block$data(R,N),v.ok((S=$.valid)!==null&&S!==void 0?S:R);function N(){if($.errors===!1)F(),$.modifying&&o(v),x(()=>v.error());else{const I=$.async?C():U();$.modifying&&o(v),x(()=>a(v,I))}}function C(){const I=y.let("ruleErrs",null);return y.try(()=>F((0,e._)`await `),A=>y.assign(R,!1).if((0,e._)`${A} instanceof ${w.ValidationError}`,()=>y.assign(I,(0,e._)`${A}.errors`),()=>y.throw(A))),I}function U(){const I=(0,e._)`${_}.errors`;return y.assign(I,null),F(e.nil),I}function F(I=$.async?(0,e._)`await `:e.nil){const A=w.opts.passContext?t.default.this:t.default.self,V=!("compile"in $&&!d||$.schema===!1);y.assign(R,(0,e._)`${I}${(0,r.callValidateCode)(v,_,A,V)}`,$.modifying)}function x(I){var A;y.if((0,e.not)((A=$.valid)!==null&&A!==void 0?A:R),I)}}xe.funcKeywordCode=s;function o(v){const{gen:$,data:S,it:y}=v;$.if(y.parentData,()=>$.assign(S,(0,e._)`${y.parentData}[${y.parentDataProperty}]`))}function a(v,$){const{gen:S}=v;S.if((0,e._)`Array.isArray(${$})`,()=>{S.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${$} : ${t.default.vErrors}.concat(${$})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)(v)},()=>v.error())}function l({schemaEnv:v},$){if($.async&&!v.$async)throw new Error("async keyword in sync schema")}function f(v,$,S){if(S===void 0)throw new Error(`keyword "${$}" failed to compile`);return v.scopeValue("keyword",typeof S=="function"?{ref:S}:{ref:S,code:(0,e.stringify)(S)})}function i(v,$,S=!1){return!$.length||$.some(y=>y==="array"?Array.isArray(v):y==="object"?v&&typeof v=="object"&&!Array.isArray(v):typeof v==y||S&&typeof v>"u")}xe.validSchemaType=i;function m({schema:v,opts:$,self:S,errSchemaPath:y},h,p){if(Array.isArray(h.keyword)?!h.keyword.includes(p):h.keyword!==p)throw new Error("ajv implementation error");const c=h.dependencies;if(c?.some(d=>!Object.prototype.hasOwnProperty.call(v,d)))throw new Error(`parent schema must have dependencies of ${p}: ${c.join(",")}`);if(h.validateSchema&&!h.validateSchema(v[p])){const w=`keyword "${p}" value is invalid at path "${y}": `+S.errorsText(h.validateSchema.errors);if($.validateSchema==="log")S.logger.error(w);else throw new Error(w)}}return xe.validateKeywordUsage=m,xe}var at={},mc;function yp(){if(mc)return at;mc=1,Object.defineProperty(at,"__esModule",{value:!0}),at.extendSubschemaMode=at.extendSubschemaData=at.getSubschema=void 0;const e=oe(),t=he();function r(s,{keyword:o,schemaProp:a,schema:l,schemaPath:f,errSchemaPath:i,topSchemaRef:m}){if(o!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const v=s.schema[o];return a===void 0?{schema:v,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:v[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(l!==void 0){if(f===void 0||i===void 0||m===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:f,topSchemaRef:m,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}at.getSubschema=r;function n(s,o,{dataProp:a,dataPropType:l,data:f,dataTypes:i,propertyName:m}){if(f!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:v}=o;if(a!==void 0){const{errorPath:S,dataPathArr:y,opts:h}=o,p=v.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);$(p),s.errorPath=(0,e.str)`${S}${(0,t.getErrorPath)(a,l,h.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...y,s.parentDataProperty]}if(f!==void 0){const S=f instanceof e.Name?f:v.let("data",f,!0);$(S),m!==void 0&&(s.propertyName=m)}i&&(s.dataTypes=i);function $(S){s.data=S,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,S]}}at.extendSubschemaData=n;function u(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:l,createErrors:f,allErrors:i}){l!==void 0&&(s.compositeRule=l),f!==void 0&&(s.createErrors=f),i!==void 0&&(s.allErrors=i),s.jtdDiscriminator=o,s.jtdMetadata=a}return at.extendSubschemaMode=u,at}var je={},gi,pc;function as(){return pc||(pc=1,gi=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,u,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(u=n;u--!==0;)if(!e(t[u],r[u]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(u=n;u--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[u]))return!1;for(u=n;u--!==0;){var o=s[u];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}),gi}var vi={exports:{}},yc;function gp(){if(yc)return vi.exports;yc=1;var e=vi.exports=function(n,u,s){typeof u=="function"&&(s=u,u={}),s=u.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(u,o,a,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,u,s,o,a,l,f,i,m,v){if(o&&typeof o=="object"&&!Array.isArray(o)){u(o,a,l,f,i,m,v);for(var $ in o){var S=o[$];if(Array.isArray(S)){if($ in e.arrayKeywords)for(var y=0;y<S.length;y++)t(n,u,s,S[y],a+"/"+$+"/"+y,l,a,$,o,y)}else if($ in e.propsKeywords){if(S&&typeof S=="object")for(var h in S)t(n,u,s,S[h],a+"/"+$+"/"+r(h),l,a,$,o,h)}else($ in e.keywords||n.allKeys&&!($ in e.skipKeywords))&&t(n,u,s,S,a+"/"+$,l,a,$,o)}s(o,a,l,f,i,m,v)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return vi.exports}var gc;function cs(){if(gc)return je;gc=1,Object.defineProperty(je,"__esModule",{value:!0}),je.getSchemaRefs=je.resolveUrl=je.normalizeId=je._getFullPath=je.getFullPath=je.inlineRef=void 0;const e=he(),t=as(),r=gp(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function u(y,h=!0){return typeof y=="boolean"?!0:h===!0?!o(y):h?a(y)<=h:!1}je.inlineRef=u;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(y){for(const h in y){if(s.has(h))return!0;const p=y[h];if(Array.isArray(p)&&p.some(o)||typeof p=="object"&&o(p))return!0}return!1}function a(y){let h=0;for(const p in y){if(p==="$ref")return 1/0;if(h++,!n.has(p)&&(typeof y[p]=="object"&&(0,e.eachItem)(y[p],c=>h+=a(c)),h===1/0))return 1/0}return h}function l(y,h="",p){p!==!1&&(h=m(h));const c=y.parse(h);return f(y,c)}je.getFullPath=l;function f(y,h){return y.serialize(h).split("#")[0]+"#"}je._getFullPath=f;const i=/#\/?$/;function m(y){return y?y.replace(i,""):""}je.normalizeId=m;function v(y,h,p){return p=m(p),y.resolve(h,p)}je.resolveUrl=v;const $=/^[a-z_][-a-z0-9._]*$/i;function S(y,h){if(typeof y=="boolean")return{};const{schemaId:p,uriResolver:c}=this.opts,d=m(y[p]||h),w={"":d},E=l(c,d,!1),_={},R=new Set;return r(y,{allKeys:!0},(U,F,x,I)=>{if(I===void 0)return;const A=E+F;let V=w[I];typeof U[p]=="string"&&(V=L.call(this,U[p])),K.call(this,U.$anchor),K.call(this,U.$dynamicAnchor),w[F]=V;function L(B){const G=this.opts.uriResolver.resolve;if(B=m(V?G(V,B):B),R.has(B))throw C(B);R.add(B);let q=this.refs[B];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?N(U,q.schema,B):B!==m(A)&&(B[0]==="#"?(N(U,_[B],B),_[B]=U):this.refs[B]=A),B}function K(B){if(typeof B=="string"){if(!$.test(B))throw new Error(`invalid anchor "${B}"`);L.call(this,`#${B}`)}}}),_;function N(U,F,x){if(F!==void 0&&!t(U,F))throw C(x)}function C(U){return new Error(`reference "${U}" resolves to more than one schema`)}}return je.getSchemaRefs=S,je}var vc;function us(){if(vc)return it;vc=1,Object.defineProperty(it,"__esModule",{value:!0}),it.getData=it.KeywordCxt=it.validateFunctionCode=void 0;const e=hp(),t=ts(),r=yd(),n=ts(),u=mp(),s=pp(),o=yp(),a=oe(),l=We(),f=cs(),i=he(),m=os();function v(T){if(E(T)&&(R(T),w(T))){h(T);return}$(T,()=>(0,e.topBoolOrEmptySchema)(T))}it.validateFunctionCode=v;function $({gen:T,validateName:j,schema:D,schemaEnv:z,opts:J},Z){J.code.es5?T.func(j,(0,a._)`${l.default.data}, ${l.default.valCxt}`,z.$async,()=>{T.code((0,a._)`"use strict"; ${c(D,J)}`),y(T,J),T.code(Z)}):T.func(j,(0,a._)`${l.default.data}, ${S(J)}`,z.$async,()=>T.code(c(D,J)).code(Z))}function S(T){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${T.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function y(T,j){T.if(l.default.valCxt,()=>{T.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),T.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),T.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),T.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),j.dynamicRef&&T.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{T.var(l.default.instancePath,(0,a._)`""`),T.var(l.default.parentData,(0,a._)`undefined`),T.var(l.default.parentDataProperty,(0,a._)`undefined`),T.var(l.default.rootData,l.default.data),j.dynamicRef&&T.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function h(T){const{schema:j,opts:D,gen:z}=T;$(T,()=>{D.$comment&&j.$comment&&I(T),U(T),z.let(l.default.vErrors,null),z.let(l.default.errors,0),D.unevaluated&&p(T),N(T),A(T)})}function p(T){const{gen:j,validateName:D}=T;T.evaluated=j.const("evaluated",(0,a._)`${D}.evaluated`),j.if((0,a._)`${T.evaluated}.dynamicProps`,()=>j.assign((0,a._)`${T.evaluated}.props`,(0,a._)`undefined`)),j.if((0,a._)`${T.evaluated}.dynamicItems`,()=>j.assign((0,a._)`${T.evaluated}.items`,(0,a._)`undefined`))}function c(T,j){const D=typeof T=="object"&&T[j.schemaId];return D&&(j.code.source||j.code.process)?(0,a._)`/*# sourceURL=${D} */`:a.nil}function d(T,j){if(E(T)&&(R(T),w(T))){_(T,j);return}(0,e.boolOrEmptySchema)(T,j)}function w({schema:T,self:j}){if(typeof T=="boolean")return!T;for(const D in T)if(j.RULES.all[D])return!0;return!1}function E(T){return typeof T.schema!="boolean"}function _(T,j){const{schema:D,gen:z,opts:J}=T;J.$comment&&D.$comment&&I(T),F(T),x(T);const Z=z.const("_errs",l.default.errors);N(T,Z),z.var(j,(0,a._)`${Z} === ${l.default.errors}`)}function R(T){(0,i.checkUnknownRules)(T),C(T)}function N(T,j){if(T.opts.jtd)return L(T,[],!1,j);const D=(0,t.getSchemaTypes)(T.schema),z=(0,t.coerceAndCheckDataType)(T,D);L(T,D,!z,j)}function C(T){const{schema:j,errSchemaPath:D,opts:z,self:J}=T;j.$ref&&z.ignoreKeywordsWithRef&&(0,i.schemaHasRulesButRef)(j,J.RULES)&&J.logger.warn(`$ref: keywords ignored in schema at path "${D}"`)}function U(T){const{schema:j,opts:D}=T;j.default!==void 0&&D.useDefaults&&D.strictSchema&&(0,i.checkStrictMode)(T,"default is ignored in the schema root")}function F(T){const j=T.schema[T.opts.schemaId];j&&(T.baseId=(0,f.resolveUrl)(T.opts.uriResolver,T.baseId,j))}function x(T){if(T.schema.$async&&!T.schemaEnv.$async)throw new Error("async schema in sync schema")}function I({gen:T,schemaEnv:j,schema:D,errSchemaPath:z,opts:J}){const Z=D.$comment;if(J.$comment===!0)T.code((0,a._)`${l.default.self}.logger.log(${Z})`);else if(typeof J.$comment=="function"){const Q=(0,a.str)`${z}/$comment`,ae=T.scopeValue("root",{ref:j.root});T.code((0,a._)`${l.default.self}.opts.$comment(${Z}, ${Q}, ${ae}.schema)`)}}function A(T){const{gen:j,schemaEnv:D,validateName:z,ValidationError:J,opts:Z}=T;D.$async?j.if((0,a._)`${l.default.errors} === 0`,()=>j.return(l.default.data),()=>j.throw((0,a._)`new ${J}(${l.default.vErrors})`)):(j.assign((0,a._)`${z}.errors`,l.default.vErrors),Z.unevaluated&&V(T),j.return((0,a._)`${l.default.errors} === 0`))}function V({gen:T,evaluated:j,props:D,items:z}){D instanceof a.Name&&T.assign((0,a._)`${j}.props`,D),z instanceof a.Name&&T.assign((0,a._)`${j}.items`,z)}function L(T,j,D,z){const{gen:J,schema:Z,data:Q,allErrors:ae,opts:te,self:se}=T,{RULES:ee}=se;if(Z.$ref&&(te.ignoreKeywordsWithRef||!(0,i.schemaHasRulesButRef)(Z,ee))){J.block(()=>H(T,"$ref",ee.all.$ref.definition));return}te.jtd||B(T,j),J.block(()=>{for(const re of ee.rules)ve(re);ve(ee.post)});function ve(re){(0,r.shouldUseGroup)(Z,re)&&(re.type?(J.if((0,n.checkDataType)(re.type,Q,te.strictNumbers)),K(T,re),j.length===1&&j[0]===re.type&&D&&(J.else(),(0,n.reportTypeError)(T)),J.endIf()):K(T,re),ae||J.if((0,a._)`${l.default.errors} === ${z||0}`))}}function K(T,j){const{gen:D,schema:z,opts:{useDefaults:J}}=T;J&&(0,u.assignDefaults)(T,j.type),D.block(()=>{for(const Z of j.rules)(0,r.shouldUseRule)(z,Z)&&H(T,Z.keyword,Z.definition,j.type)})}function B(T,j){T.schemaEnv.meta||!T.opts.strictTypes||(G(T,j),T.opts.allowUnionTypes||q(T,j),P(T,T.dataTypes))}function G(T,j){if(j.length){if(!T.dataTypes.length){T.dataTypes=j;return}j.forEach(D=>{O(T.dataTypes,D)||b(T,`type "${D}" not allowed by context "${T.dataTypes.join(",")}"`)}),g(T,j)}}function q(T,j){j.length>1&&!(j.length===2&&j.includes("null"))&&b(T,"use allowUnionTypes to allow union type keyword")}function P(T,j){const D=T.self.RULES.all;for(const z in D){const J=D[z];if(typeof J=="object"&&(0,r.shouldUseRule)(T.schema,J)){const{type:Z}=J.definition;Z.length&&!Z.some(Q=>k(j,Q))&&b(T,`missing type "${Z.join(",")}" for keyword "${z}"`)}}}function k(T,j){return T.includes(j)||j==="number"&&T.includes("integer")}function O(T,j){return T.includes(j)||j==="integer"&&T.includes("number")}function g(T,j){const D=[];for(const z of T.dataTypes)O(j,z)?D.push(z):j.includes("integer")&&z==="number"&&D.push("integer");T.dataTypes=D}function b(T,j){const D=T.schemaEnv.baseId+T.errSchemaPath;j+=` at "${D}" (strictTypes)`,(0,i.checkStrictMode)(T,j,T.opts.strictTypes)}class M{constructor(j,D,z){if((0,s.validateKeywordUsage)(j,D,z),this.gen=j.gen,this.allErrors=j.allErrors,this.keyword=z,this.data=j.data,this.schema=j.schema[z],this.$data=D.$data&&j.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,i.schemaRefOrVal)(j,this.schema,z,this.$data),this.schemaType=D.schemaType,this.parentSchema=j.schema,this.params={},this.it=j,this.def=D,this.$data)this.schemaCode=j.gen.const("vSchema",Y(this.$data,j));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,D.schemaType,D.allowUndefined))throw new Error(`${z} value must be ${JSON.stringify(D.schemaType)}`);("code"in D?D.trackErrors:D.errors!==!1)&&(this.errsCount=j.gen.const("_errs",l.default.errors))}result(j,D,z){this.failResult((0,a.not)(j),D,z)}failResult(j,D,z){this.gen.if(j),z?z():this.error(),D?(this.gen.else(),D(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(j,D){this.failResult((0,a.not)(j),void 0,D)}fail(j){if(j===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(j),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(j){if(!this.$data)return this.fail(j);const{schemaCode:D}=this;this.fail((0,a._)`${D} !== undefined && (${(0,a.or)(this.invalid$data(),j)})`)}error(j,D,z){if(D){this.setParams(D),this._error(j,z),this.setParams({});return}this._error(j,z)}_error(j,D){(j?m.reportExtraError:m.reportError)(this,this.def.error,D)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(j){this.allErrors||this.gen.if(j)}setParams(j,D){D?Object.assign(this.params,j):this.params=j}block$data(j,D,z=a.nil){this.gen.block(()=>{this.check$data(j,z),D()})}check$data(j=a.nil,D=a.nil){if(!this.$data)return;const{gen:z,schemaCode:J,schemaType:Z,def:Q}=this;z.if((0,a.or)((0,a._)`${J} === undefined`,D)),j!==a.nil&&z.assign(j,!0),(Z.length||Q.validateSchema)&&(z.elseIf(this.invalid$data()),this.$dataError(),j!==a.nil&&z.assign(j,!1)),z.else()}invalid$data(){const{gen:j,schemaCode:D,schemaType:z,def:J,it:Z}=this;return(0,a.or)(Q(),ae());function Q(){if(z.length){if(!(D instanceof a.Name))throw new Error("ajv implementation error");const te=Array.isArray(z)?z:[z];return(0,a._)`${(0,n.checkDataTypes)(te,D,Z.opts.strictNumbers,n.DataType.Wrong)}`}return a.nil}function ae(){if(J.validateSchema){const te=j.scopeValue("validate$data",{ref:J.validateSchema});return(0,a._)`!${te}(${D})`}return a.nil}}subschema(j,D){const z=(0,o.getSubschema)(this.it,j);(0,o.extendSubschemaData)(z,this.it,j),(0,o.extendSubschemaMode)(z,j);const J={...this.it,...z,items:void 0,props:void 0};return d(J,D),J}mergeEvaluated(j,D){const{it:z,gen:J}=this;z.opts.unevaluated&&(z.props!==!0&&j.props!==void 0&&(z.props=i.mergeEvaluated.props(J,j.props,z.props,D)),z.items!==!0&&j.items!==void 0&&(z.items=i.mergeEvaluated.items(J,j.items,z.items,D)))}mergeValidEvaluated(j,D){const{it:z,gen:J}=this;if(z.opts.unevaluated&&(z.props!==!0||z.items!==!0))return J.if(D,()=>this.mergeEvaluated(j,a.Name)),!0}}it.KeywordCxt=M;function H(T,j,D,z){const J=new M(T,D,j);"code"in D?D.code(J,z):J.$data&&D.validate?(0,s.funcKeywordCode)(J,D):"macro"in D?(0,s.macroKeywordCode)(J,D):(D.compile||D.validate)&&(0,s.funcKeywordCode)(J,D)}const W=/^\/(?:[^~]|~0|~1)*$/,X=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Y(T,{dataLevel:j,dataNames:D,dataPathArr:z}){let J,Z;if(T==="")return l.default.rootData;if(T[0]==="/"){if(!W.test(T))throw new Error(`Invalid JSON-pointer: ${T}`);J=T,Z=l.default.rootData}else{const se=X.exec(T);if(!se)throw new Error(`Invalid JSON-pointer: ${T}`);const ee=+se[1];if(J=se[2],J==="#"){if(ee>=j)throw new Error(te("property/index",ee));return z[j-ee]}if(ee>j)throw new Error(te("data",ee));if(Z=D[j-ee],!J)return Z}let Q=Z;const ae=J.split("/");for(const se of ae)se&&(Z=(0,a._)`${Z}${(0,a.getProperty)((0,i.unescapeJsonPointer)(se))}`,Q=(0,a._)`${Q} && ${Z}`);return Q;function te(se,ee){return`Cannot access ${se} ${ee} levels up, current level is ${j}`}}return it.getData=Y,it}var pr={},$c;function Vo(){if($c)return pr;$c=1,Object.defineProperty(pr,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return pr.default=e,pr}var yr={},_c;function ls(){if(_c)return yr;_c=1,Object.defineProperty(yr,"__esModule",{value:!0});const e=cs();class t extends Error{constructor(n,u,s,o){super(o||`can't resolve reference ${s} from id ${u}`),this.missingRef=(0,e.resolveUrl)(n,u,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return yr.default=t,yr}var Me={},wc;function fs(){if(wc)return Me;wc=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.resolveSchema=Me.getCompilingSchema=Me.resolveRef=Me.compileSchema=Me.SchemaEnv=void 0;const e=oe(),t=Vo(),r=We(),n=cs(),u=he(),s=us();class o{constructor(p){var c;this.refs={},this.dynamicAnchors={};let d;typeof p.schema=="object"&&(d=p.schema),this.schema=p.schema,this.schemaId=p.schemaId,this.root=p.root||this,this.baseId=(c=p.baseId)!==null&&c!==void 0?c:(0,n.normalizeId)(d?.[p.schemaId||"$id"]),this.schemaPath=p.schemaPath,this.localRefs=p.localRefs,this.meta=p.meta,this.$async=d?.$async,this.refs={}}}Me.SchemaEnv=o;function a(h){const p=i.call(this,h);if(p)return p;const c=(0,n.getFullPath)(this.opts.uriResolver,h.root.baseId),{es5:d,lines:w}=this.opts.code,{ownProperties:E}=this.opts,_=new e.CodeGen(this.scope,{es5:d,lines:w,ownProperties:E});let R;h.$async&&(R=_.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const N=_.scopeName("validate");h.validateName=N;const C={gen:_,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:_.scopeValue("schema",this.opts.code.source===!0?{ref:h.schema,code:(0,e.stringify)(h.schema)}:{ref:h.schema}),validateName:N,ValidationError:R,schema:h.schema,schemaEnv:h,rootId:c,baseId:h.baseId||c,schemaPath:e.nil,errSchemaPath:h.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let U;try{this._compilations.add(h),(0,s.validateFunctionCode)(C),_.optimize(this.opts.code.optimize);const F=_.toString();U=`${_.scopeRefs(r.default.scope)}return ${F}`,this.opts.code.process&&(U=this.opts.code.process(U,h));const I=new Function(`${r.default.self}`,`${r.default.scope}`,U)(this,this.scope.get());if(this.scope.value(N,{ref:I}),I.errors=null,I.schema=h.schema,I.schemaEnv=h,h.$async&&(I.$async=!0),this.opts.code.source===!0&&(I.source={validateName:N,validateCode:F,scopeValues:_._values}),this.opts.unevaluated){const{props:A,items:V}=C;I.evaluated={props:A instanceof e.Name?void 0:A,items:V instanceof e.Name?void 0:V,dynamicProps:A instanceof e.Name,dynamicItems:V instanceof e.Name},I.source&&(I.source.evaluated=(0,e.stringify)(I.evaluated))}return h.validate=I,h}catch(F){throw delete h.validate,delete h.validateName,U&&this.logger.error("Error compiling schema, function code:",U),F}finally{this._compilations.delete(h)}}Me.compileSchema=a;function l(h,p,c){var d;c=(0,n.resolveUrl)(this.opts.uriResolver,p,c);const w=h.refs[c];if(w)return w;let E=v.call(this,h,c);if(E===void 0){const _=(d=h.localRefs)===null||d===void 0?void 0:d[c],{schemaId:R}=this.opts;_&&(E=new o({schema:_,schemaId:R,root:h,baseId:p}))}if(E!==void 0)return h.refs[c]=f.call(this,E)}Me.resolveRef=l;function f(h){return(0,n.inlineRef)(h.schema,this.opts.inlineRefs)?h.schema:h.validate?h:a.call(this,h)}function i(h){for(const p of this._compilations)if(m(p,h))return p}Me.getCompilingSchema=i;function m(h,p){return h.schema===p.schema&&h.root===p.root&&h.baseId===p.baseId}function v(h,p){let c;for(;typeof(c=this.refs[p])=="string";)p=c;return c||this.schemas[p]||$.call(this,h,p)}function $(h,p){const c=this.opts.uriResolver.parse(p),d=(0,n._getFullPath)(this.opts.uriResolver,c);let w=(0,n.getFullPath)(this.opts.uriResolver,h.baseId,void 0);if(Object.keys(h.schema).length>0&&d===w)return y.call(this,c,h);const E=(0,n.normalizeId)(d),_=this.refs[E]||this.schemas[E];if(typeof _=="string"){const R=$.call(this,h,_);return typeof R?.schema!="object"?void 0:y.call(this,c,R)}if(typeof _?.schema=="object"){if(_.validate||a.call(this,_),E===(0,n.normalizeId)(p)){const{schema:R}=_,{schemaId:N}=this.opts,C=R[N];return C&&(w=(0,n.resolveUrl)(this.opts.uriResolver,w,C)),new o({schema:R,schemaId:N,root:h,baseId:w})}return y.call(this,c,_)}}Me.resolveSchema=$;const S=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(h,{baseId:p,schema:c,root:d}){var w;if(((w=h.fragment)===null||w===void 0?void 0:w[0])!=="/")return;for(const R of h.fragment.slice(1).split("/")){if(typeof c=="boolean")return;const N=c[(0,u.unescapeFragment)(R)];if(N===void 0)return;c=N;const C=typeof c=="object"&&c[this.opts.schemaId];!S.has(R)&&C&&(p=(0,n.resolveUrl)(this.opts.uriResolver,p,C))}let E;if(typeof c!="boolean"&&c.$ref&&!(0,u.schemaHasRulesButRef)(c,this.RULES)){const R=(0,n.resolveUrl)(this.opts.uriResolver,p,c.$ref);E=$.call(this,d,R)}const{schemaId:_}=this.opts;if(E=E||new o({schema:c,schemaId:_,root:d,baseId:p}),E.schema!==E.root.schema)return E}return Me}const vp="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",$p="Meta-schema for $data reference (JSON AnySchema extension proposal)",_p="object",wp=["$data"],Ep={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Sp=!1,bp={$id:vp,description:$p,type:_p,required:wp,properties:Ep,additionalProperties:Sp};var gr={},Jt={exports:{}},$i,Ec;function Rp(){return Ec||(Ec=1,$i={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),$i}var _i,Sc;function Pp(){if(Sc)return _i;Sc=1;const{HEX:e}=Rp(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function r(y){if(a(y,".")<3)return{host:y,isIPV4:!1};const h=y.match(t)||[],[p]=h;return p?{host:o(p,"."),isIPV4:!0}:{host:y,isIPV4:!1}}function n(y,h=!1){let p="",c=!0;for(const d of y){if(e[d]===void 0)return;d!=="0"&&c===!0&&(c=!1),c||(p+=d)}return h&&p.length===0&&(p="0"),p}function u(y){let h=0;const p={error:!1,address:"",zone:""},c=[],d=[];let w=!1,E=!1,_=!1;function R(){if(d.length){if(w===!1){const N=n(d);if(N!==void 0)c.push(N);else return p.error=!0,!1}d.length=0}return!0}for(let N=0;N<y.length;N++){const C=y[N];if(!(C==="["||C==="]"))if(C===":"){if(E===!0&&(_=!0),!R())break;if(h++,c.push(":"),h>7){p.error=!0;break}N-1>=0&&y[N-1]===":"&&(E=!0);continue}else if(C==="%"){if(!R())break;w=!0}else{d.push(C);continue}}return d.length&&(w?p.zone=d.join(""):_?c.push(d.join("")):c.push(n(d))),p.address=c.join(""),p}function s(y){if(a(y,":")<2)return{host:y,isIPV6:!1};const h=u(y);if(h.error)return{host:y,isIPV6:!1};{let p=h.address,c=h.address;return h.zone&&(p+="%"+h.zone,c+="%25"+h.zone),{host:p,escapedHost:c,isIPV6:!0}}}function o(y,h){let p="",c=!0;const d=y.length;for(let w=0;w<d;w++){const E=y[w];E==="0"&&c?(w+1<=d&&y[w+1]===h||w+1===d)&&(p+=E,c=!1):(E===h?c=!0:c=!1,p+=E)}return p}function a(y,h){let p=0;for(let c=0;c<y.length;c++)y[c]===h&&p++;return p}const l=/^\.\.?\//u,f=/^\/\.(?:\/|$)/u,i=/^\/\.\.(?:\/|$)/u,m=/^\/?(?:.|\n)*?(?=\/|$)/u;function v(y){const h=[];for(;y.length;)if(y.match(l))y=y.replace(l,"");else if(y.match(f))y=y.replace(f,"/");else if(y.match(i))y=y.replace(i,"/"),h.pop();else if(y==="."||y==="..")y="";else{const p=y.match(m);if(p){const c=p[0];y=y.slice(c.length),h.push(c)}else throw new Error("Unexpected dot segment condition")}return h.join("")}function $(y,h){const p=h!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=p(y.scheme)),y.userinfo!==void 0&&(y.userinfo=p(y.userinfo)),y.host!==void 0&&(y.host=p(y.host)),y.path!==void 0&&(y.path=p(y.path)),y.query!==void 0&&(y.query=p(y.query)),y.fragment!==void 0&&(y.fragment=p(y.fragment)),y}function S(y){const h=[];if(y.userinfo!==void 0&&(h.push(y.userinfo),h.push("@")),y.host!==void 0){let p=unescape(y.host);const c=r(p);if(c.isIPV4)p=c.host;else{const d=s(c.host);d.isIPV6===!0?p=`[${d.escapedHost}]`:p=y.host}h.push(p)}return(typeof y.port=="number"||typeof y.port=="string")&&(h.push(":"),h.push(String(y.port))),h.length?h.join(""):void 0}return _i={recomposeAuthority:S,normalizeComponentEncoding:$,removeDotSegments:v,normalizeIPv4:r,normalizeIPv6:s,stringArrayToHexStripped:n},_i}var wi,bc;function Op(){if(bc)return wi;bc=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function r(c){return typeof c.secure=="boolean"?c.secure:String(c.scheme).toLowerCase()==="wss"}function n(c){return c.host||(c.error=c.error||"HTTP URIs must have a host."),c}function u(c){const d=String(c.scheme).toLowerCase()==="https";return(c.port===(d?443:80)||c.port==="")&&(c.port=void 0),c.path||(c.path="/"),c}function s(c){return c.secure=r(c),c.resourceName=(c.path||"/")+(c.query?"?"+c.query:""),c.path=void 0,c.query=void 0,c}function o(c){if((c.port===(r(c)?443:80)||c.port==="")&&(c.port=void 0),typeof c.secure=="boolean"&&(c.scheme=c.secure?"wss":"ws",c.secure=void 0),c.resourceName){const[d,w]=c.resourceName.split("?");c.path=d&&d!=="/"?d:void 0,c.query=w,c.resourceName=void 0}return c.fragment=void 0,c}function a(c,d){if(!c.path)return c.error="URN can not be parsed",c;const w=c.path.match(t);if(w){const E=d.scheme||c.scheme||"urn";c.nid=w[1].toLowerCase(),c.nss=w[2];const _=`${E}:${d.nid||c.nid}`,R=p[_];c.path=void 0,R&&(c=R.parse(c,d))}else c.error=c.error||"URN can not be parsed.";return c}function l(c,d){const w=d.scheme||c.scheme||"urn",E=c.nid.toLowerCase(),_=`${w}:${d.nid||E}`,R=p[_];R&&(c=R.serialize(c,d));const N=c,C=c.nss;return N.path=`${E||d.nid}:${C}`,d.skipEscape=!0,N}function f(c,d){const w=c;return w.uuid=w.nss,w.nss=void 0,!d.tolerant&&(!w.uuid||!e.test(w.uuid))&&(w.error=w.error||"UUID is not valid."),w}function i(c){const d=c;return d.nss=(c.uuid||"").toLowerCase(),d}const m={scheme:"http",domainHost:!0,parse:n,serialize:u},v={scheme:"https",domainHost:m.domainHost,parse:n,serialize:u},$={scheme:"ws",domainHost:!0,parse:s,serialize:o},S={scheme:"wss",domainHost:$.domainHost,parse:$.parse,serialize:$.serialize},p={http:m,https:v,ws:$,wss:S,urn:{scheme:"urn",parse:a,serialize:l,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:f,serialize:i,skipNormalize:!0}};return wi=p,wi}var Rc;function gd(){if(Rc)return Jt.exports;Rc=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:r,recomposeAuthority:n,normalizeComponentEncoding:u}=Pp(),s=Op();function o(h,p){return typeof h=="string"?h=i(S(h,p),p):typeof h=="object"&&(h=S(i(h,p),p)),h}function a(h,p,c){const d=Object.assign({scheme:"null"},c),w=l(S(h,d),S(p,d),d,!0);return i(w,{...d,skipEscape:!0})}function l(h,p,c,d){const w={};return d||(h=S(i(h,c),c),p=S(i(p,c),c)),c=c||{},!c.tolerant&&p.scheme?(w.scheme=p.scheme,w.userinfo=p.userinfo,w.host=p.host,w.port=p.port,w.path=r(p.path||""),w.query=p.query):(p.userinfo!==void 0||p.host!==void 0||p.port!==void 0?(w.userinfo=p.userinfo,w.host=p.host,w.port=p.port,w.path=r(p.path||""),w.query=p.query):(p.path?(p.path.charAt(0)==="/"?w.path=r(p.path):((h.userinfo!==void 0||h.host!==void 0||h.port!==void 0)&&!h.path?w.path="/"+p.path:h.path?w.path=h.path.slice(0,h.path.lastIndexOf("/")+1)+p.path:w.path=p.path,w.path=r(w.path)),w.query=p.query):(w.path=h.path,p.query!==void 0?w.query=p.query:w.query=h.query),w.userinfo=h.userinfo,w.host=h.host,w.port=h.port),w.scheme=h.scheme),w.fragment=p.fragment,w}function f(h,p,c){return typeof h=="string"?(h=unescape(h),h=i(u(S(h,c),!0),{...c,skipEscape:!0})):typeof h=="object"&&(h=i(u(h,!0),{...c,skipEscape:!0})),typeof p=="string"?(p=unescape(p),p=i(u(S(p,c),!0),{...c,skipEscape:!0})):typeof p=="object"&&(p=i(u(p,!0),{...c,skipEscape:!0})),h.toLowerCase()===p.toLowerCase()}function i(h,p){const c={host:h.host,scheme:h.scheme,userinfo:h.userinfo,port:h.port,path:h.path,query:h.query,nid:h.nid,nss:h.nss,uuid:h.uuid,fragment:h.fragment,reference:h.reference,resourceName:h.resourceName,secure:h.secure,error:""},d=Object.assign({},p),w=[],E=s[(d.scheme||c.scheme||"").toLowerCase()];E&&E.serialize&&E.serialize(c,d),c.path!==void 0&&(d.skipEscape?c.path=unescape(c.path):(c.path=escape(c.path),c.scheme!==void 0&&(c.path=c.path.split("%3A").join(":")))),d.reference!=="suffix"&&c.scheme&&w.push(c.scheme,":");const _=n(c);if(_!==void 0&&(d.reference!=="suffix"&&w.push("//"),w.push(_),c.path&&c.path.charAt(0)!=="/"&&w.push("/")),c.path!==void 0){let R=c.path;!d.absolutePath&&(!E||!E.absolutePath)&&(R=r(R)),_===void 0&&(R=R.replace(/^\/\//u,"/%2F")),w.push(R)}return c.query!==void 0&&w.push("?",c.query),c.fragment!==void 0&&w.push("#",c.fragment),w.join("")}const m=Array.from({length:127},(h,p)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(p)));function v(h){let p=0;for(let c=0,d=h.length;c<d;++c)if(p=h.charCodeAt(c),p>126||m[p])return!0;return!1}const $=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function S(h,p){const c=Object.assign({},p),d={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},w=h.indexOf("%")!==-1;let E=!1;c.reference==="suffix"&&(h=(c.scheme?c.scheme+":":"")+"//"+h);const _=h.match($);if(_){if(d.scheme=_[1],d.userinfo=_[3],d.host=_[4],d.port=parseInt(_[5],10),d.path=_[6]||"",d.query=_[7],d.fragment=_[8],isNaN(d.port)&&(d.port=_[5]),d.host){const N=t(d.host);if(N.isIPV4===!1){const C=e(N.host);d.host=C.host.toLowerCase(),E=C.isIPV6}else d.host=N.host,E=!0}d.scheme===void 0&&d.userinfo===void 0&&d.host===void 0&&d.port===void 0&&d.query===void 0&&!d.path?d.reference="same-document":d.scheme===void 0?d.reference="relative":d.fragment===void 0?d.reference="absolute":d.reference="uri",c.reference&&c.reference!=="suffix"&&c.reference!==d.reference&&(d.error=d.error||"URI is not a "+c.reference+" reference.");const R=s[(c.scheme||d.scheme||"").toLowerCase()];if(!c.unicodeSupport&&(!R||!R.unicodeSupport)&&d.host&&(c.domainHost||R&&R.domainHost)&&E===!1&&v(d.host))try{d.host=URL.domainToASCII(d.host.toLowerCase())}catch(N){d.error=d.error||"Host's domain name can not be converted to ASCII: "+N}(!R||R&&!R.skipNormalize)&&(w&&d.scheme!==void 0&&(d.scheme=unescape(d.scheme)),w&&d.host!==void 0&&(d.host=unescape(d.host)),d.path&&(d.path=escape(unescape(d.path))),d.fragment&&(d.fragment=encodeURI(decodeURIComponent(d.fragment)))),R&&R.parse&&R.parse(d,c)}else d.error=d.error||"URI can not be parsed.";return d}const y={SCHEMES:s,normalize:o,resolve:a,resolveComponents:l,equal:f,serialize:i,parse:S};return Jt.exports=y,Jt.exports.default=y,Jt.exports.fastUri=y,Jt.exports}var Pc;function Ip(){if(Pc)return gr;Pc=1,Object.defineProperty(gr,"__esModule",{value:!0});const e=gd();return e.code='require("ajv/dist/runtime/uri").default',gr.default=e,gr}var Oc;function Np(){return Oc||(Oc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=us();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=oe();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Vo(),u=ls(),s=pd(),o=fs(),a=oe(),l=cs(),f=ts(),i=he(),m=bp,v=Ip(),$=(q,P)=>new RegExp(q,P);$.code="new RegExp";const S=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),h={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},c=200;function d(q){var P,k,O,g,b,M,H,W,X,Y,T,j,D,z,J,Z,Q,ae,te,se,ee,ve,re,Se,Qe;const Ae=q.strict,et=(P=q.code)===null||P===void 0?void 0:P.optimize,ft=et===!0||et===void 0?1:et||0,nt=(O=(k=q.code)===null||k===void 0?void 0:k.regExp)!==null&&O!==void 0?O:$,_t=(g=q.uriResolver)!==null&&g!==void 0?g:v.default;return{strictSchema:(M=(b=q.strictSchema)!==null&&b!==void 0?b:Ae)!==null&&M!==void 0?M:!0,strictNumbers:(W=(H=q.strictNumbers)!==null&&H!==void 0?H:Ae)!==null&&W!==void 0?W:!0,strictTypes:(Y=(X=q.strictTypes)!==null&&X!==void 0?X:Ae)!==null&&Y!==void 0?Y:"log",strictTuples:(j=(T=q.strictTuples)!==null&&T!==void 0?T:Ae)!==null&&j!==void 0?j:"log",strictRequired:(z=(D=q.strictRequired)!==null&&D!==void 0?D:Ae)!==null&&z!==void 0?z:!1,code:q.code?{...q.code,optimize:ft,regExp:nt}:{optimize:ft,regExp:nt},loopRequired:(J=q.loopRequired)!==null&&J!==void 0?J:c,loopEnum:(Z=q.loopEnum)!==null&&Z!==void 0?Z:c,meta:(Q=q.meta)!==null&&Q!==void 0?Q:!0,messages:(ae=q.messages)!==null&&ae!==void 0?ae:!0,inlineRefs:(te=q.inlineRefs)!==null&&te!==void 0?te:!0,schemaId:(se=q.schemaId)!==null&&se!==void 0?se:"$id",addUsedSchema:(ee=q.addUsedSchema)!==null&&ee!==void 0?ee:!0,validateSchema:(ve=q.validateSchema)!==null&&ve!==void 0?ve:!0,validateFormats:(re=q.validateFormats)!==null&&re!==void 0?re:!0,unicodeRegExp:(Se=q.unicodeRegExp)!==null&&Se!==void 0?Se:!0,int32range:(Qe=q.int32range)!==null&&Qe!==void 0?Qe:!0,uriResolver:_t}}class w{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...d(P)};const{es5:k,lines:O}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:y,es5:k,lines:O}),this.logger=x(P.logger);const g=P.validateFormats;P.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,h,P,"NOT SUPPORTED"),E.call(this,p,P,"DEPRECATED","warn"),this._metaOpts=U.call(this),P.formats&&N.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&C.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),R.call(this),P.validateFormats=g}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:k,schemaId:O}=this.opts;let g=m;O==="id"&&(g={...m},g.id=g.$id,delete g.$id),k&&P&&this.addMetaSchema(g,g[O],!1)}defaultMeta(){const{meta:P,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[k]||P:void 0}validate(P,k){let O;if(typeof P=="string"){if(O=this.getSchema(P),!O)throw new Error(`no schema with key or ref "${P}"`)}else O=this.compile(P);const g=O(k);return"$async"in O||(this.errors=O.errors),g}compile(P,k){const O=this._addSchema(P,k);return O.validate||this._compileSchemaEnv(O)}compileAsync(P,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:O}=this.opts;return g.call(this,P,k);async function g(Y,T){await b.call(this,Y.$schema);const j=this._addSchema(Y,T);return j.validate||M.call(this,j)}async function b(Y){Y&&!this.getSchema(Y)&&await g.call(this,{$ref:Y},!0)}async function M(Y){try{return this._compileSchemaEnv(Y)}catch(T){if(!(T instanceof u.default))throw T;return H.call(this,T),await W.call(this,T.missingSchema),M.call(this,Y)}}function H({missingSchema:Y,missingRef:T}){if(this.refs[Y])throw new Error(`AnySchema ${Y} is loaded but ${T} cannot be resolved`)}async function W(Y){const T=await X.call(this,Y);this.refs[Y]||await b.call(this,T.$schema),this.refs[Y]||this.addSchema(T,Y,k)}async function X(Y){const T=this._loading[Y];if(T)return T;try{return await(this._loading[Y]=O(Y))}finally{delete this._loading[Y]}}}addSchema(P,k,O,g=this.opts.validateSchema){if(Array.isArray(P)){for(const M of P)this.addSchema(M,void 0,O,g);return this}let b;if(typeof P=="object"){const{schemaId:M}=this.opts;if(b=P[M],b!==void 0&&typeof b!="string")throw new Error(`schema ${M} must be string`)}return k=(0,l.normalizeId)(k||b),this._checkUnique(k),this.schemas[k]=this._addSchema(P,O,k,g,!0),this}addMetaSchema(P,k,O=this.opts.validateSchema){return this.addSchema(P,k,!0,O),this}validateSchema(P,k){if(typeof P=="boolean")return!0;let O;if(O=P.$schema,O!==void 0&&typeof O!="string")throw new Error("$schema must be a string");if(O=O||this.opts.defaultMeta||this.defaultMeta(),!O)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const g=this.validate(O,P);if(!g&&k){const b="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(b);else throw new Error(b)}return g}getSchema(P){let k;for(;typeof(k=_.call(this,P))=="string";)P=k;if(k===void 0){const{schemaId:O}=this.opts,g=new o.SchemaEnv({schema:{},schemaId:O});if(k=o.resolveSchema.call(this,g,P),!k)return;this.refs[P]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=_.call(this,P);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const k=P;this._cache.delete(k);let O=P[this.opts.schemaId];return O&&(O=(0,l.normalizeId)(O),delete this.schemas[O],delete this.refs[O]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const k of P)this.addKeyword(k);return this}addKeyword(P,k){let O;if(typeof P=="string")O=P,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=O);else if(typeof P=="object"&&k===void 0){if(k=P,O=k.keyword,Array.isArray(O)&&!O.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(A.call(this,O,k),!k)return(0,i.eachItem)(O,b=>V.call(this,b)),this;K.call(this,k);const g={...k,type:(0,f.getJSONTypes)(k.type),schemaType:(0,f.getJSONTypes)(k.schemaType)};return(0,i.eachItem)(O,g.type.length===0?b=>V.call(this,b,g):b=>g.type.forEach(M=>V.call(this,b,g,M))),this}getKeyword(P){const k=this.RULES.all[P];return typeof k=="object"?k.definition:!!k}removeKeyword(P){const{RULES:k}=this;delete k.keywords[P],delete k.all[P];for(const O of k.rules){const g=O.rules.findIndex(b=>b.keyword===P);g>=0&&O.rules.splice(g,1)}return this}addFormat(P,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[P]=k,this}errorsText(P=this.errors,{separator:k=", ",dataVar:O="data"}={}){return!P||P.length===0?"No errors":P.map(g=>`${O}${g.instancePath} ${g.message}`).reduce((g,b)=>g+k+b)}$dataMetaSchema(P,k){const O=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const g of k){const b=g.split("/").slice(1);let M=P;for(const H of b)M=M[H];for(const H in O){const W=O[H];if(typeof W!="object")continue;const{$data:X}=W.definition,Y=M[H];X&&Y&&(M[H]=G(Y))}}return P}_removeAllSchemas(P,k){for(const O in P){const g=P[O];(!k||k.test(O))&&(typeof g=="string"?delete P[O]:g&&!g.meta&&(this._cache.delete(g.schema),delete P[O]))}}_addSchema(P,k,O,g=this.opts.validateSchema,b=this.opts.addUsedSchema){let M;const{schemaId:H}=this.opts;if(typeof P=="object")M=P[H];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let W=this._cache.get(P);if(W!==void 0)return W;O=(0,l.normalizeId)(M||O);const X=l.getSchemaRefs.call(this,P,O);return W=new o.SchemaEnv({schema:P,schemaId:H,meta:k,baseId:O,localRefs:X}),this._cache.set(W.schema,W),b&&!O.startsWith("#")&&(O&&this._checkUnique(O),this.refs[O]=W),g&&this.validateSchema(P,!0),W}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):o.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const k=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,P)}finally{this.opts=k}}}w.ValidationError=n.default,w.MissingRefError=u.default,e.default=w;function E(q,P,k,O="error"){for(const g in q){const b=g;b in P&&this.logger[O](`${k}: option ${g}. ${q[b]}`)}}function _(q){return q=(0,l.normalizeId)(q),this.schemas[q]||this.refs[q]}function R(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const P in q)this.addSchema(q[P],P)}function N(){for(const q in this.opts.formats){const P=this.opts.formats[q];P&&this.addFormat(q,P)}}function C(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in q){const k=q[P];k.keyword||(k.keyword=P),this.addKeyword(k)}}function U(){const q={...this.opts};for(const P of S)delete q[P];return q}const F={log(){},warn(){},error(){}};function x(q){if(q===!1)return F;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const I=/^[a-z_$][a-z0-9_$:-]*$/i;function A(q,P){const{RULES:k}=this;if((0,i.eachItem)(q,O=>{if(k.keywords[O])throw new Error(`Keyword ${O} is already defined`);if(!I.test(O))throw new Error(`Keyword ${O} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function V(q,P,k){var O;const g=P?.post;if(k&&g)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:b}=this;let M=g?b.post:b.rules.find(({type:W})=>W===k);if(M||(M={type:k,rules:[]},b.rules.push(M)),b.keywords[q]=!0,!P)return;const H={keyword:q,definition:{...P,type:(0,f.getJSONTypes)(P.type),schemaType:(0,f.getJSONTypes)(P.schemaType)}};P.before?L.call(this,M,H,P.before):M.rules.push(H),b.all[q]=H,(O=P.implements)===null||O===void 0||O.forEach(W=>this.addKeyword(W))}function L(q,P,k){const O=q.rules.findIndex(g=>g.keyword===k);O>=0?q.rules.splice(O,0,P):(q.rules.push(P),this.logger.warn(`rule ${k} is not defined`))}function K(q){let{metaSchema:P}=q;P!==void 0&&(q.$data&&this.opts.$data&&(P=G(P)),q.validateSchema=this.compile(P,!0))}const B={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(q){return{anyOf:[q,B]}}}(di)),di}var vr={},$r={},_r={},Ic;function Tp(){if(Ic)return _r;Ic=1,Object.defineProperty(_r,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return _r.default=e,_r}var yt={},Nc;function Uo(){if(Nc)return yt;Nc=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.callRef=yt.getValidate=void 0;const e=ls(),t=Je(),r=oe(),n=We(),u=fs(),s=he(),o={keyword:"$ref",schemaType:"string",code(f){const{gen:i,schema:m,it:v}=f,{baseId:$,schemaEnv:S,validateName:y,opts:h,self:p}=v,{root:c}=S;if((m==="#"||m==="#/")&&$===c.baseId)return w();const d=u.resolveRef.call(p,c,$,m);if(d===void 0)throw new e.default(v.opts.uriResolver,$,m);if(d instanceof u.SchemaEnv)return E(d);return _(d);function w(){if(S===c)return l(f,y,S,S.$async);const R=i.scopeValue("root",{ref:c});return l(f,(0,r._)`${R}.validate`,c,c.$async)}function E(R){const N=a(f,R);l(f,N,R,R.$async)}function _(R){const N=i.scopeValue("schema",h.code.source===!0?{ref:R,code:(0,r.stringify)(R)}:{ref:R}),C=i.name("valid"),U=f.subschema({schema:R,dataTypes:[],schemaPath:r.nil,topSchemaRef:N,errSchemaPath:m},C);f.mergeEvaluated(U),f.ok(C)}}};function a(f,i){const{gen:m}=f;return i.validate?m.scopeValue("validate",{ref:i.validate}):(0,r._)`${m.scopeValue("wrapper",{ref:i})}.validate`}yt.getValidate=a;function l(f,i,m,v){const{gen:$,it:S}=f,{allErrors:y,schemaEnv:h,opts:p}=S,c=p.passContext?n.default.this:r.nil;v?d():w();function d(){if(!h.$async)throw new Error("async schema referenced by sync schema");const R=$.let("valid");$.try(()=>{$.code((0,r._)`await ${(0,t.callValidateCode)(f,i,c)}`),_(i),y||$.assign(R,!0)},N=>{$.if((0,r._)`!(${N} instanceof ${S.ValidationError})`,()=>$.throw(N)),E(N),y||$.assign(R,!1)}),f.ok(R)}function w(){f.result((0,t.callValidateCode)(f,i,c),()=>_(i),()=>E(i))}function E(R){const N=(0,r._)`${R}.errors`;$.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${N} : ${n.default.vErrors}.concat(${N})`),$.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function _(R){var N;if(!S.opts.unevaluated)return;const C=(N=m?.validate)===null||N===void 0?void 0:N.evaluated;if(S.props!==!0)if(C&&!C.dynamicProps)C.props!==void 0&&(S.props=s.mergeEvaluated.props($,C.props,S.props));else{const U=$.var("props",(0,r._)`${R}.evaluated.props`);S.props=s.mergeEvaluated.props($,U,S.props,r.Name)}if(S.items!==!0)if(C&&!C.dynamicItems)C.items!==void 0&&(S.items=s.mergeEvaluated.items($,C.items,S.items));else{const U=$.var("items",(0,r._)`${R}.evaluated.items`);S.items=s.mergeEvaluated.items($,U,S.items,r.Name)}}}return yt.callRef=l,yt.default=o,yt}var Tc;function Ap(){if(Tc)return $r;Tc=1,Object.defineProperty($r,"__esModule",{value:!0});const e=Tp(),t=Uo(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return $r.default=r,$r}var wr={},Er={},Ac;function jp(){if(Ac)return Er;Ac=1,Object.defineProperty(Er,"__esModule",{value:!0});const e=oe(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${r[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${r[s].okStr}, limit: ${o}}`},u={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(s){const{keyword:o,data:a,schemaCode:l}=s;s.fail$data((0,e._)`${a} ${r[o].fail} ${l} || isNaN(${a})`)}};return Er.default=u,Er}var Sr={},jc;function Cp(){if(jc)return Sr;jc=1,Object.defineProperty(Sr,"__esModule",{value:!0});const e=oe(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,e._)`{multipleOf: ${n}}`},code(n){const{gen:u,data:s,schemaCode:o,it:a}=n,l=a.opts.multipleOfPrecision,f=u.let("res"),i=l?(0,e._)`Math.abs(Math.round(${f}) - ${f}) > 1e-${l}`:(0,e._)`${f} !== parseInt(${f})`;n.fail$data((0,e._)`(${o} === 0 || (${f} = ${s}/${o}, ${i}))`)}};return Sr.default=r,Sr}var br={},Rr={},Cc;function kp(){if(Cc)return Rr;Cc=1,Object.defineProperty(Rr,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,u=0,s;for(;u<r;)n++,s=t.charCodeAt(u++),s>=55296&&s<=56319&&u<r&&(s=t.charCodeAt(u),(s&64512)===56320&&u++);return n}return Rr.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Rr}var kc;function qp(){if(kc)return br;kc=1,Object.defineProperty(br,"__esModule",{value:!0});const e=oe(),t=he(),r=kp(),u={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:l,it:f}=s,i=o==="maxLength"?e.operators.GT:e.operators.LT,m=f.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,r.default)}(${a})`;s.fail$data((0,e._)`${m} ${i} ${l}`)}};return br.default=u,br}var Pr={},qc;function Dp(){if(qc)return Pr;qc=1,Object.defineProperty(Pr,"__esModule",{value:!0});const e=Je(),t=oe(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:u})=>(0,t.str)`must match pattern "${u}"`,params:({schemaCode:u})=>(0,t._)`{pattern: ${u}}`},code(u){const{data:s,$data:o,schema:a,schemaCode:l,it:f}=u,i=f.opts.unicodeRegExp?"u":"",m=o?(0,t._)`(new RegExp(${l}, ${i}))`:(0,e.usePattern)(u,a);u.fail$data((0,t._)`!${m}.test(${s})`)}};return Pr.default=n,Pr}var Or={},Dc;function Mp(){if(Dc)return Or;Dc=1,Object.defineProperty(Or,"__esModule",{value:!0});const e=oe(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:u}){const s=n==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${u} properties`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:u,data:s,schemaCode:o}=n,a=u==="maxProperties"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return Or.default=r,Or}var Ir={},Mc;function Lp(){if(Mc)return Ir;Mc=1,Object.defineProperty(Ir,"__esModule",{value:!0});const e=Je(),t=oe(),r=he(),u={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:l,data:f,$data:i,it:m}=s,{opts:v}=m;if(!i&&a.length===0)return;const $=a.length>=v.loopRequired;if(m.allErrors?S():y(),v.strictRequired){const c=s.parentSchema.properties,{definedProperties:d}=s.it;for(const w of a)if(c?.[w]===void 0&&!d.has(w)){const E=m.schemaEnv.baseId+m.errSchemaPath,_=`required property "${w}" is not defined at "${E}" (strictRequired)`;(0,r.checkStrictMode)(m,_,m.opts.strictRequired)}}function S(){if($||i)s.block$data(t.nil,h);else for(const c of a)(0,e.checkReportMissingProp)(s,c)}function y(){const c=o.let("missing");if($||i){const d=o.let("valid",!0);s.block$data(d,()=>p(c,d)),s.ok(d)}else o.if((0,e.checkMissingProp)(s,a,c)),(0,e.reportMissingProp)(s,c),o.else()}function h(){o.forOf("prop",l,c=>{s.setParams({missingProperty:c}),o.if((0,e.noPropertyInData)(o,f,c,v.ownProperties),()=>s.error())})}function p(c,d){s.setParams({missingProperty:c}),o.forOf(c,l,()=>{o.assign(d,(0,e.propertyInData)(o,f,c,v.ownProperties)),o.if((0,t.not)(d),()=>{s.error(),o.break()})},t.nil)}}};return Ir.default=u,Ir}var Nr={},Lc;function Fp(){if(Lc)return Nr;Lc=1,Object.defineProperty(Nr,"__esModule",{value:!0});const e=oe(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:u}){const s=n==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${u} items`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:u,data:s,schemaCode:o}=n,a=u==="maxItems"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return Nr.default=r,Nr}var Tr={},Ar={},Fc;function zo(){if(Fc)return Ar;Fc=1,Object.defineProperty(Ar,"__esModule",{value:!0});const e=as();return e.code='require("ajv/dist/runtime/equal").default',Ar.default=e,Ar}var Vc;function Vp(){if(Vc)return Tr;Vc=1,Object.defineProperty(Tr,"__esModule",{value:!0});const e=ts(),t=oe(),r=he(),n=zo(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:l,$data:f,schema:i,parentSchema:m,schemaCode:v,it:$}=o;if(!f&&!i)return;const S=a.let("valid"),y=m.items?(0,e.getSchemaTypes)(m.items):[];o.block$data(S,h,(0,t._)`${v} === false`),o.ok(S);function h(){const w=a.let("i",(0,t._)`${l}.length`),E=a.let("j");o.setParams({i:w,j:E}),a.assign(S,!0),a.if((0,t._)`${w} > 1`,()=>(p()?c:d)(w,E))}function p(){return y.length>0&&!y.some(w=>w==="object"||w==="array")}function c(w,E){const _=a.name("item"),R=(0,e.checkDataTypes)(y,_,$.opts.strictNumbers,e.DataType.Wrong),N=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${w}--;`,()=>{a.let(_,(0,t._)`${l}[${w}]`),a.if(R,(0,t._)`continue`),y.length>1&&a.if((0,t._)`typeof ${_} == "string"`,(0,t._)`${_} += "_"`),a.if((0,t._)`typeof ${N}[${_}] == "number"`,()=>{a.assign(E,(0,t._)`${N}[${_}]`),o.error(),a.assign(S,!1).break()}).code((0,t._)`${N}[${_}] = ${w}`)})}function d(w,E){const _=(0,r.useFunc)(a,n.default),R=a.name("outer");a.label(R).for((0,t._)`;${w}--;`,()=>a.for((0,t._)`${E} = ${w}; ${E}--;`,()=>a.if((0,t._)`${_}(${l}[${w}], ${l}[${E}])`,()=>{o.error(),a.assign(S,!1).break(R)})))}}};return Tr.default=s,Tr}var jr={},Uc;function Up(){if(Uc)return jr;Uc=1,Object.defineProperty(jr,"__esModule",{value:!0});const e=oe(),t=he(),r=zo(),u={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:l,schemaCode:f,schema:i}=s;l||i&&typeof i=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,r.default)}(${a}, ${f})`):s.fail((0,e._)`${i} !== ${a}`)}};return jr.default=u,jr}var Cr={},zc;function zp(){if(zc)return Cr;zc=1,Object.defineProperty(Cr,"__esModule",{value:!0});const e=oe(),t=he(),r=zo(),u={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:l,schema:f,schemaCode:i,it:m}=s;if(!l&&f.length===0)throw new Error("enum must have non-empty array");const v=f.length>=m.opts.loopEnum;let $;const S=()=>$??($=(0,t.useFunc)(o,r.default));let y;if(v||l)y=o.let("valid"),s.block$data(y,h);else{if(!Array.isArray(f))throw new Error("ajv implementation error");const c=o.const("vSchema",i);y=(0,e.or)(...f.map((d,w)=>p(c,w)))}s.pass(y);function h(){o.assign(y,!1),o.forOf("v",i,c=>o.if((0,e._)`${S()}(${a}, ${c})`,()=>o.assign(y,!0).break()))}function p(c,d){const w=f[d];return typeof w=="object"&&w!==null?(0,e._)`${S()}(${a}, ${c}[${d}])`:(0,e._)`${a} === ${w}`}}};return Cr.default=u,Cr}var Gc;function Gp(){if(Gc)return wr;Gc=1,Object.defineProperty(wr,"__esModule",{value:!0});const e=jp(),t=Cp(),r=qp(),n=Dp(),u=Mp(),s=Lp(),o=Fp(),a=Vp(),l=Up(),f=zp(),i=[e.default,t.default,r.default,n.default,u.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,f.default];return wr.default=i,wr}var kr={},At={},xc;function vd(){if(xc)return At;xc=1,Object.defineProperty(At,"__esModule",{value:!0}),At.validateAdditionalItems=void 0;const e=oe(),t=he(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:l}=o;if(!Array.isArray(l)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}u(s,l)}};function u(s,o){const{gen:a,schema:l,data:f,keyword:i,it:m}=s;m.items=!0;const v=a.const("len",(0,e._)`${f}.length`);if(l===!1)s.setParams({len:o.length}),s.pass((0,e._)`${v} <= ${o.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(m,l)){const S=a.var("valid",(0,e._)`${v} <= ${o.length}`);a.if((0,e.not)(S),()=>$(S)),s.ok(S)}function $(S){a.forRange("i",o.length,v,y=>{s.subschema({keyword:i,dataProp:y,dataPropType:t.Type.Num},S),m.allErrors||a.if((0,e.not)(S),()=>a.break())})}}return At.validateAdditionalItems=u,At.default=n,At}var qr={},jt={},Kc;function $d(){if(Kc)return jt;Kc=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.validateTuple=void 0;const e=oe(),t=he(),r=Je(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return u(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,r.validateArray)(s))}};function u(s,o,a=s.schema){const{gen:l,parentSchema:f,data:i,keyword:m,it:v}=s;y(f),v.opts.unevaluated&&a.length&&v.items!==!0&&(v.items=t.mergeEvaluated.items(l,a.length,v.items));const $=l.name("valid"),S=l.const("len",(0,e._)`${i}.length`);a.forEach((h,p)=>{(0,t.alwaysValidSchema)(v,h)||(l.if((0,e._)`${S} > ${p}`,()=>s.subschema({keyword:m,schemaProp:p,dataProp:p},$)),s.ok($))});function y(h){const{opts:p,errSchemaPath:c}=v,d=a.length,w=d===h.minItems&&(d===h.maxItems||h[o]===!1);if(p.strictTuples&&!w){const E=`"${m}" is ${d}-tuple, but minItems or maxItems/${o} are not specified or different at path "${c}"`;(0,t.checkStrictMode)(v,E,p.strictTuples)}}}return jt.validateTuple=u,jt.default=n,jt}var Bc;function xp(){if(Bc)return qr;Bc=1,Object.defineProperty(qr,"__esModule",{value:!0});const e=$d(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return qr.default=t,qr}var Dr={},Hc;function Kp(){if(Hc)return Dr;Hc=1,Object.defineProperty(Dr,"__esModule",{value:!0});const e=oe(),t=he(),r=Je(),n=vd(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:l,it:f}=o,{prefixItems:i}=l;f.items=!0,!(0,t.alwaysValidSchema)(f,a)&&(i?(0,n.validateAdditionalItems)(o,i):o.ok((0,r.validateArray)(o)))}};return Dr.default=s,Dr}var Mr={},Wc;function Bp(){if(Wc)return Mr;Wc=1,Object.defineProperty(Mr,"__esModule",{value:!0});const e=oe(),t=he(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:u,max:s}})=>s===void 0?(0,e.str)`must contain at least ${u} valid item(s)`:(0,e.str)`must contain at least ${u} and no more than ${s} valid item(s)`,params:({params:{min:u,max:s}})=>s===void 0?(0,e._)`{minContains: ${u}}`:(0,e._)`{minContains: ${u}, maxContains: ${s}}`},code(u){const{gen:s,schema:o,parentSchema:a,data:l,it:f}=u;let i,m;const{minContains:v,maxContains:$}=a;f.opts.next?(i=v===void 0?1:v,m=$):i=1;const S=s.const("len",(0,e._)`${l}.length`);if(u.setParams({min:i,max:m}),m===void 0&&i===0){(0,t.checkStrictMode)(f,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(m!==void 0&&i>m){(0,t.checkStrictMode)(f,'"minContains" > "maxContains" is always invalid'),u.fail();return}if((0,t.alwaysValidSchema)(f,o)){let d=(0,e._)`${S} >= ${i}`;m!==void 0&&(d=(0,e._)`${d} && ${S} <= ${m}`),u.pass(d);return}f.items=!0;const y=s.name("valid");m===void 0&&i===1?p(y,()=>s.if(y,()=>s.break())):i===0?(s.let(y,!0),m!==void 0&&s.if((0,e._)`${l}.length > 0`,h)):(s.let(y,!1),h()),u.result(y,()=>u.reset());function h(){const d=s.name("_valid"),w=s.let("count",0);p(d,()=>s.if(d,()=>c(w)))}function p(d,w){s.forRange("i",0,S,E=>{u.subschema({keyword:"contains",dataProp:E,dataPropType:t.Type.Num,compositeRule:!0},d),w()})}function c(d){s.code((0,e._)`${d}++`),m===void 0?s.if((0,e._)`${d} >= ${i}`,()=>s.assign(y,!0).break()):(s.if((0,e._)`${d} > ${m}`,()=>s.assign(y,!1).break()),i===1?s.assign(y,!0):s.if((0,e._)`${d} >= ${i}`,()=>s.assign(y,!0)))}}};return Mr.default=n,Mr}var Ei={},Jc;function Go(){return Jc||(Jc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=oe(),r=he(),n=Je();e.error={message:({params:{property:l,depsCount:f,deps:i}})=>{const m=f===1?"property":"properties";return(0,t.str)`must have ${m} ${i} when property ${l} is present`},params:({params:{property:l,depsCount:f,deps:i,missingProperty:m}})=>(0,t._)`{property: ${l},
    missingProperty: ${m},
    depsCount: ${f},
    deps: ${i}}`};const u={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[f,i]=s(l);o(l,f),a(l,i)}};function s({schema:l}){const f={},i={};for(const m in l){if(m==="__proto__")continue;const v=Array.isArray(l[m])?f:i;v[m]=l[m]}return[f,i]}function o(l,f=l.schema){const{gen:i,data:m,it:v}=l;if(Object.keys(f).length===0)return;const $=i.let("missing");for(const S in f){const y=f[S];if(y.length===0)continue;const h=(0,n.propertyInData)(i,m,S,v.opts.ownProperties);l.setParams({property:S,depsCount:y.length,deps:y.join(", ")}),v.allErrors?i.if(h,()=>{for(const p of y)(0,n.checkReportMissingProp)(l,p)}):(i.if((0,t._)`${h} && (${(0,n.checkMissingProp)(l,y,$)})`),(0,n.reportMissingProp)(l,$),i.else())}}e.validatePropertyDeps=o;function a(l,f=l.schema){const{gen:i,data:m,keyword:v,it:$}=l,S=i.name("valid");for(const y in f)(0,r.alwaysValidSchema)($,f[y])||(i.if((0,n.propertyInData)(i,m,y,$.opts.ownProperties),()=>{const h=l.subschema({keyword:v,schemaProp:y},S);l.mergeValidEvaluated(h,S)},()=>i.var(S,!0)),l.ok(S))}e.validateSchemaDeps=a,e.default=u}(Ei)),Ei}var Lr={},Xc;function Hp(){if(Xc)return Lr;Xc=1,Object.defineProperty(Lr,"__esModule",{value:!0});const e=oe(),t=he(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:u})=>(0,e._)`{propertyName: ${u.propertyName}}`},code(u){const{gen:s,schema:o,data:a,it:l}=u;if((0,t.alwaysValidSchema)(l,o))return;const f=s.name("valid");s.forIn("key",a,i=>{u.setParams({propertyName:i}),u.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},f),s.if((0,e.not)(f),()=>{u.error(!0),l.allErrors||s.break()})}),u.ok(f)}};return Lr.default=n,Lr}var Fr={},Yc;function _d(){if(Yc)return Fr;Yc=1,Object.defineProperty(Fr,"__esModule",{value:!0});const e=Je(),t=oe(),r=We(),n=he(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:l,parentSchema:f,data:i,errsCount:m,it:v}=o;if(!m)throw new Error("ajv implementation error");const{allErrors:$,opts:S}=v;if(v.props=!0,S.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(v,l))return;const y=(0,e.allSchemaProperties)(f.properties),h=(0,e.allSchemaProperties)(f.patternProperties);p(),o.ok((0,t._)`${m} === ${r.default.errors}`);function p(){a.forIn("key",i,_=>{!y.length&&!h.length?w(_):a.if(c(_),()=>w(_))})}function c(_){let R;if(y.length>8){const N=(0,n.schemaRefOrVal)(v,f.properties,"properties");R=(0,e.isOwnProperty)(a,N,_)}else y.length?R=(0,t.or)(...y.map(N=>(0,t._)`${_} === ${N}`)):R=t.nil;return h.length&&(R=(0,t.or)(R,...h.map(N=>(0,t._)`${(0,e.usePattern)(o,N)}.test(${_})`))),(0,t.not)(R)}function d(_){a.code((0,t._)`delete ${i}[${_}]`)}function w(_){if(S.removeAdditional==="all"||S.removeAdditional&&l===!1){d(_);return}if(l===!1){o.setParams({additionalProperty:_}),o.error(),$||a.break();return}if(typeof l=="object"&&!(0,n.alwaysValidSchema)(v,l)){const R=a.name("valid");S.removeAdditional==="failing"?(E(_,R,!1),a.if((0,t.not)(R),()=>{o.reset(),d(_)})):(E(_,R),$||a.if((0,t.not)(R),()=>a.break()))}}function E(_,R,N){const C={keyword:"additionalProperties",dataProp:_,dataPropType:n.Type.Str};N===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(C,R)}}};return Fr.default=s,Fr}var Vr={},Zc;function Wp(){if(Zc)return Vr;Zc=1,Object.defineProperty(Vr,"__esModule",{value:!0});const e=us(),t=Je(),r=he(),n=_d(),u={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:l,data:f,it:i}=s;i.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(i,n.default,"additionalProperties"));const m=(0,t.allSchemaProperties)(a);for(const h of m)i.definedProperties.add(h);i.opts.unevaluated&&m.length&&i.props!==!0&&(i.props=r.mergeEvaluated.props(o,(0,r.toHash)(m),i.props));const v=m.filter(h=>!(0,r.alwaysValidSchema)(i,a[h]));if(v.length===0)return;const $=o.name("valid");for(const h of v)S(h)?y(h):(o.if((0,t.propertyInData)(o,f,h,i.opts.ownProperties)),y(h),i.allErrors||o.else().var($,!0),o.endIf()),s.it.definedProperties.add(h),s.ok($);function S(h){return i.opts.useDefaults&&!i.compositeRule&&a[h].default!==void 0}function y(h){s.subschema({keyword:"properties",schemaProp:h,dataProp:h},$)}}};return Vr.default=u,Vr}var Ur={},Qc;function Jp(){if(Qc)return Ur;Qc=1,Object.defineProperty(Ur,"__esModule",{value:!0});const e=Je(),t=oe(),r=he(),n=he(),u={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:l,parentSchema:f,it:i}=s,{opts:m}=i,v=(0,e.allSchemaProperties)(a),$=v.filter(w=>(0,r.alwaysValidSchema)(i,a[w]));if(v.length===0||$.length===v.length&&(!i.opts.unevaluated||i.props===!0))return;const S=m.strictSchema&&!m.allowMatchingProperties&&f.properties,y=o.name("valid");i.props!==!0&&!(i.props instanceof t.Name)&&(i.props=(0,n.evaluatedPropsToName)(o,i.props));const{props:h}=i;p();function p(){for(const w of v)S&&c(w),i.allErrors?d(w):(o.var(y,!0),d(w),o.if(y))}function c(w){for(const E in S)new RegExp(w).test(E)&&(0,r.checkStrictMode)(i,`property ${E} matches pattern ${w} (use allowMatchingProperties)`)}function d(w){o.forIn("key",l,E=>{o.if((0,t._)`${(0,e.usePattern)(s,w)}.test(${E})`,()=>{const _=$.includes(w);_||s.subschema({keyword:"patternProperties",schemaProp:w,dataProp:E,dataPropType:n.Type.Str},y),i.opts.unevaluated&&h!==!0?o.assign((0,t._)`${h}[${E}]`,!0):!_&&!i.allErrors&&o.if((0,t.not)(y),()=>o.break())})})}}};return Ur.default=u,Ur}var zr={},eu;function Xp(){if(eu)return zr;eu=1,Object.defineProperty(zr,"__esModule",{value:!0});const e=he(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:u,it:s}=r;if((0,e.alwaysValidSchema)(s,u)){r.fail();return}const o=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),r.failResult(o,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return zr.default=t,zr}var Gr={},tu;function Yp(){if(tu)return Gr;tu=1,Object.defineProperty(Gr,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Je().validateUnion,error:{message:"must match a schema in anyOf"}};return Gr.default=t,Gr}var xr={},ru;function Zp(){if(ru)return xr;ru=1,Object.defineProperty(xr,"__esModule",{value:!0});const e=oe(),t=he(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:u})=>(0,e._)`{passingSchemas: ${u.passing}}`},code(u){const{gen:s,schema:o,parentSchema:a,it:l}=u;if(!Array.isArray(o))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const f=o,i=s.let("valid",!1),m=s.let("passing",null),v=s.name("_valid");u.setParams({passing:m}),s.block($),u.result(i,()=>u.reset(),()=>u.error(!0));function $(){f.forEach((S,y)=>{let h;(0,t.alwaysValidSchema)(l,S)?s.var(v,!0):h=u.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},v),y>0&&s.if((0,e._)`${v} && ${i}`).assign(i,!1).assign(m,(0,e._)`[${m}, ${y}]`).else(),s.if(v,()=>{s.assign(i,!0),s.assign(m,y),h&&u.mergeEvaluated(h,e.Name)})})}}};return xr.default=n,xr}var Kr={},nu;function Qp(){if(nu)return Kr;nu=1,Object.defineProperty(Kr,"__esModule",{value:!0});const e=he(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:u,it:s}=r;if(!Array.isArray(u))throw new Error("ajv implementation error");const o=n.name("valid");u.forEach((a,l)=>{if((0,e.alwaysValidSchema)(s,a))return;const f=r.subschema({keyword:"allOf",schemaProp:l},o);r.ok(o),r.mergeEvaluated(f)})}};return Kr.default=t,Kr}var Br={},su;function ey(){if(su)return Br;su=1,Object.defineProperty(Br,"__esModule",{value:!0});const e=oe(),t=he(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const f=u(l,"then"),i=u(l,"else");if(!f&&!i)return;const m=o.let("valid",!0),v=o.name("_valid");if($(),s.reset(),f&&i){const y=o.let("ifClause");s.setParams({ifClause:y}),o.if(v,S("then",y),S("else",y))}else f?o.if(v,S("then")):o.if((0,e.not)(v),S("else"));s.pass(m,()=>s.error(!0));function $(){const y=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);s.mergeEvaluated(y)}function S(y,h){return()=>{const p=s.subschema({keyword:y},v);o.assign(m,v),s.mergeValidEvaluated(p,m),h?o.assign(h,(0,e._)`${y}`):s.setParams({ifClause:y})}}}};function u(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return Br.default=n,Br}var Hr={},iu;function ty(){if(iu)return Hr;iu=1,Object.defineProperty(Hr,"__esModule",{value:!0});const e=he(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:u}){n.if===void 0&&(0,e.checkStrictMode)(u,`"${r}" without "if" is ignored`)}};return Hr.default=t,Hr}var ou;function ry(){if(ou)return kr;ou=1,Object.defineProperty(kr,"__esModule",{value:!0});const e=vd(),t=xp(),r=$d(),n=Kp(),u=Bp(),s=Go(),o=Hp(),a=_d(),l=Wp(),f=Jp(),i=Xp(),m=Yp(),v=Zp(),$=Qp(),S=ey(),y=ty();function h(p=!1){const c=[i.default,m.default,v.default,$.default,S.default,y.default,o.default,a.default,s.default,l.default,f.default];return p?c.push(t.default,n.default):c.push(e.default,r.default),c.push(u.default),c}return kr.default=h,kr}var Wr={},Ct={},au;function wd(){if(au)return Ct;au=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.dynamicAnchor=void 0;const e=oe(),t=We(),r=fs(),n=Uo(),u={keyword:"$dynamicAnchor",schemaType:"string",code:a=>s(a,a.schema)};function s(a,l){const{gen:f,it:i}=a;i.schemaEnv.root.dynamicAnchors[l]=!0;const m=(0,e._)`${t.default.dynamicAnchors}${(0,e.getProperty)(l)}`,v=i.errSchemaPath==="#"?i.validateName:o(a);f.if((0,e._)`!${m}`,()=>f.assign(m,v))}Ct.dynamicAnchor=s;function o(a){const{schemaEnv:l,schema:f,self:i}=a.it,{root:m,baseId:v,localRefs:$,meta:S}=l.root,{schemaId:y}=i.opts,h=new r.SchemaEnv({schema:f,schemaId:y,root:m,baseId:v,localRefs:$,meta:S});return r.compileSchema.call(i,h),(0,n.getValidate)(a,h)}return Ct.default=u,Ct}var kt={},cu;function Ed(){if(cu)return kt;cu=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.dynamicRef=void 0;const e=oe(),t=We(),r=Uo(),n={keyword:"$dynamicRef",schemaType:"string",code:s=>u(s,s.schema)};function u(s,o){const{gen:a,keyword:l,it:f}=s;if(o[0]!=="#")throw new Error(`"${l}" only supports hash fragment reference`);const i=o.slice(1);if(f.allErrors)m();else{const $=a.let("valid",!1);m($),s.ok($)}function m($){if(f.schemaEnv.root.dynamicAnchors[i]){const S=a.let("_v",(0,e._)`${t.default.dynamicAnchors}${(0,e.getProperty)(i)}`);a.if(S,v(S,$),v(f.validateName,$))}else v(f.validateName,$)()}function v($,S){return S?()=>a.block(()=>{(0,r.callRef)(s,$),a.let(S,!0)}):()=>(0,r.callRef)(s,$)}}return kt.dynamicRef=u,kt.default=n,kt}var Jr={},uu;function ny(){if(uu)return Jr;uu=1,Object.defineProperty(Jr,"__esModule",{value:!0});const e=wd(),t=he(),r={keyword:"$recursiveAnchor",schemaType:"boolean",code(n){n.schema?(0,e.dynamicAnchor)(n,""):(0,t.checkStrictMode)(n.it,"$recursiveAnchor: false is ignored")}};return Jr.default=r,Jr}var Xr={},lu;function sy(){if(lu)return Xr;lu=1,Object.defineProperty(Xr,"__esModule",{value:!0});const e=Ed(),t={keyword:"$recursiveRef",schemaType:"string",code:r=>(0,e.dynamicRef)(r,r.schema)};return Xr.default=t,Xr}var fu;function iy(){if(fu)return Wr;fu=1,Object.defineProperty(Wr,"__esModule",{value:!0});const e=wd(),t=Ed(),r=ny(),n=sy(),u=[e.default,t.default,r.default,n.default];return Wr.default=u,Wr}var Yr={},Zr={},du;function oy(){if(du)return Zr;du=1,Object.defineProperty(Zr,"__esModule",{value:!0});const e=Go(),t={keyword:"dependentRequired",type:"object",schemaType:"object",error:e.error,code:r=>(0,e.validatePropertyDeps)(r)};return Zr.default=t,Zr}var Qr={},hu;function ay(){if(hu)return Qr;hu=1,Object.defineProperty(Qr,"__esModule",{value:!0});const e=Go(),t={keyword:"dependentSchemas",type:"object",schemaType:"object",code:r=>(0,e.validateSchemaDeps)(r)};return Qr.default=t,Qr}var en={},mu;function cy(){if(mu)return en;mu=1,Object.defineProperty(en,"__esModule",{value:!0});const e=he(),t={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:r,parentSchema:n,it:u}){n.contains===void 0&&(0,e.checkStrictMode)(u,`"${r}" without "contains" is ignored`)}};return en.default=t,en}var pu;function uy(){if(pu)return Yr;pu=1,Object.defineProperty(Yr,"__esModule",{value:!0});const e=oy(),t=ay(),r=cy(),n=[e.default,t.default,r.default];return Yr.default=n,Yr}var tn={},rn={},yu;function ly(){if(yu)return rn;yu=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=oe(),t=he(),r=We(),u={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:{message:"must NOT have unevaluated properties",params:({params:s})=>(0,e._)`{unevaluatedProperty: ${s.unevaluatedProperty}}`},code(s){const{gen:o,schema:a,data:l,errsCount:f,it:i}=s;if(!f)throw new Error("ajv implementation error");const{allErrors:m,props:v}=i;v instanceof e.Name?o.if((0,e._)`${v} !== true`,()=>o.forIn("key",l,h=>o.if(S(v,h),()=>$(h)))):v!==!0&&o.forIn("key",l,h=>v===void 0?$(h):o.if(y(v,h),()=>$(h))),i.props=!0,s.ok((0,e._)`${f} === ${r.default.errors}`);function $(h){if(a===!1){s.setParams({unevaluatedProperty:h}),s.error(),m||o.break();return}if(!(0,t.alwaysValidSchema)(i,a)){const p=o.name("valid");s.subschema({keyword:"unevaluatedProperties",dataProp:h,dataPropType:t.Type.Str},p),m||o.if((0,e.not)(p),()=>o.break())}}function S(h,p){return(0,e._)`!${h} || !${h}[${p}]`}function y(h,p){const c=[];for(const d in h)h[d]===!0&&c.push((0,e._)`${p} !== ${d}`);return(0,e.and)(...c)}}};return rn.default=u,rn}var nn={},gu;function fy(){if(gu)return nn;gu=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=oe(),t=he(),n={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:{message:({params:{len:u}})=>(0,e.str)`must NOT have more than ${u} items`,params:({params:{len:u}})=>(0,e._)`{limit: ${u}}`},code(u){const{gen:s,schema:o,data:a,it:l}=u,f=l.items||0;if(f===!0)return;const i=s.const("len",(0,e._)`${a}.length`);if(o===!1)u.setParams({len:f}),u.fail((0,e._)`${i} > ${f}`);else if(typeof o=="object"&&!(0,t.alwaysValidSchema)(l,o)){const v=s.var("valid",(0,e._)`${i} <= ${f}`);s.if((0,e.not)(v),()=>m(v,f)),u.ok(v)}l.items=!0;function m(v,$){s.forRange("i",$,i,S=>{u.subschema({keyword:"unevaluatedItems",dataProp:S,dataPropType:t.Type.Num},v),l.allErrors||s.if((0,e.not)(v),()=>s.break())})}}};return nn.default=n,nn}var vu;function dy(){if(vu)return tn;vu=1,Object.defineProperty(tn,"__esModule",{value:!0});const e=ly(),t=fy(),r=[e.default,t.default];return tn.default=r,tn}var sn={},on={},$u;function hy(){if($u)return on;$u=1,Object.defineProperty(on,"__esModule",{value:!0});const e=oe(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,e._)`{format: ${n}}`},code(n,u){const{gen:s,data:o,$data:a,schema:l,schemaCode:f,it:i}=n,{opts:m,errSchemaPath:v,schemaEnv:$,self:S}=i;if(!m.validateFormats)return;a?y():h();function y(){const p=s.scopeValue("formats",{ref:S.formats,code:m.code.formats}),c=s.const("fDef",(0,e._)`${p}[${f}]`),d=s.let("fType"),w=s.let("format");s.if((0,e._)`typeof ${c} == "object" && !(${c} instanceof RegExp)`,()=>s.assign(d,(0,e._)`${c}.type || "string"`).assign(w,(0,e._)`${c}.validate`),()=>s.assign(d,(0,e._)`"string"`).assign(w,c)),n.fail$data((0,e.or)(E(),_()));function E(){return m.strictSchema===!1?e.nil:(0,e._)`${f} && !${w}`}function _(){const R=$.$async?(0,e._)`(${c}.async ? await ${w}(${o}) : ${w}(${o}))`:(0,e._)`${w}(${o})`,N=(0,e._)`(typeof ${w} == "function" ? ${R} : ${w}.test(${o}))`;return(0,e._)`${w} && ${w} !== true && ${d} === ${u} && !${N}`}}function h(){const p=S.formats[l];if(!p){E();return}if(p===!0)return;const[c,d,w]=_(p);c===u&&n.pass(R());function E(){if(m.strictSchema===!1){S.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${l}" ignored in schema at path "${v}"`}}function _(N){const C=N instanceof RegExp?(0,e.regexpCode)(N):m.code.formats?(0,e._)`${m.code.formats}${(0,e.getProperty)(l)}`:void 0,U=s.scopeValue("formats",{key:l,ref:N,code:C});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,e._)`${U}.validate`]:["string",N,U]}function R(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!$.$async)throw new Error("async format in sync schema");return(0,e._)`await ${w}(${o})`}return typeof d=="function"?(0,e._)`${w}(${o})`:(0,e._)`${w}.test(${o})`}}}};return on.default=r,on}var _u;function my(){if(_u)return sn;_u=1,Object.defineProperty(sn,"__esModule",{value:!0});const t=[hy().default];return sn.default=t,sn}var St={},wu;function py(){return wu||(wu=1,Object.defineProperty(St,"__esModule",{value:!0}),St.contentVocabulary=St.metadataVocabulary=void 0,St.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],St.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),St}var Eu;function yy(){if(Eu)return vr;Eu=1,Object.defineProperty(vr,"__esModule",{value:!0});const e=Ap(),t=Gp(),r=ry(),n=iy(),u=uy(),s=dy(),o=my(),a=py(),l=[n.default,e.default,t.default,(0,r.default)(!0),o.default,a.metadataVocabulary,a.contentVocabulary,u.default,s.default];return vr.default=l,vr}var an={},Xt={},Su;function gy(){if(Su)return Xt;Su=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(Xt.DiscrError=e={})),Xt}var bu;function vy(){if(bu)return an;bu=1,Object.defineProperty(an,"__esModule",{value:!0});const e=oe(),t=gy(),r=fs(),n=ls(),u=he(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:f}})=>(0,e._)`{error: ${a}, tag: ${f}, tagValue: ${l}}`},code(a){const{gen:l,data:f,schema:i,parentSchema:m,it:v}=a,{oneOf:$}=m;if(!v.opts.discriminator)throw new Error("discriminator: requires discriminator option");const S=i.propertyName;if(typeof S!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!$)throw new Error("discriminator: requires oneOf keyword");const y=l.let("valid",!1),h=l.const("tag",(0,e._)`${f}${(0,e.getProperty)(S)}`);l.if((0,e._)`typeof ${h} == "string"`,()=>p(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:h,tagName:S})),a.ok(y);function p(){const w=d();l.if(!1);for(const E in w)l.elseIf((0,e._)`${h} === ${E}`),l.assign(y,c(w[E]));l.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:h,tagName:S}),l.endIf()}function c(w){const E=l.name("valid"),_=a.subschema({keyword:"oneOf",schemaProp:w},E);return a.mergeEvaluated(_,e.Name),E}function d(){var w;const E={},_=N(m);let R=!0;for(let F=0;F<$.length;F++){let x=$[F];if(x?.$ref&&!(0,u.schemaHasRulesButRef)(x,v.self.RULES)){const A=x.$ref;if(x=r.resolveRef.call(v.self,v.schemaEnv.root,v.baseId,A),x instanceof r.SchemaEnv&&(x=x.schema),x===void 0)throw new n.default(v.opts.uriResolver,v.baseId,A)}const I=(w=x?.properties)===null||w===void 0?void 0:w[S];if(typeof I!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${S}"`);R=R&&(_||N(x)),C(I,F)}if(!R)throw new Error(`discriminator: "${S}" must be required`);return E;function N({required:F}){return Array.isArray(F)&&F.includes(S)}function C(F,x){if(F.const)U(F.const,x);else if(F.enum)for(const I of F.enum)U(I,x);else throw new Error(`discriminator: "properties/${S}" must have "const" or "enum"`)}function U(F,x){if(typeof F!="string"||F in E)throw new Error(`discriminator: "${S}" values must be unique strings`);E[F]=x}}}};return an.default=o,an}var cn={};const $y="https://json-schema.org/draft/2020-12/schema",_y="https://json-schema.org/draft/2020-12/schema",wy={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},Ey="meta",Sy="Core and Validation specifications meta-schema",by=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],Ry=["object","boolean"],Py="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",Oy={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},Iy={$schema:$y,$id:_y,$vocabulary:wy,$dynamicAnchor:Ey,title:Sy,allOf:by,type:Ry,$comment:Py,properties:Oy},Ny="https://json-schema.org/draft/2020-12/schema",Ty="https://json-schema.org/draft/2020-12/meta/applicator",Ay={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},jy="meta",Cy="Applicator vocabulary meta-schema",ky=["object","boolean"],qy={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},Dy={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},My={$schema:Ny,$id:Ty,$vocabulary:Ay,$dynamicAnchor:jy,title:Cy,type:ky,properties:qy,$defs:Dy},Ly="https://json-schema.org/draft/2020-12/schema",Fy="https://json-schema.org/draft/2020-12/meta/unevaluated",Vy={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},Uy="meta",zy="Unevaluated applicator vocabulary meta-schema",Gy=["object","boolean"],xy={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},Ky={$schema:Ly,$id:Fy,$vocabulary:Vy,$dynamicAnchor:Uy,title:zy,type:Gy,properties:xy},By="https://json-schema.org/draft/2020-12/schema",Hy="https://json-schema.org/draft/2020-12/meta/content",Wy={"https://json-schema.org/draft/2020-12/vocab/content":!0},Jy="meta",Xy="Content vocabulary meta-schema",Yy=["object","boolean"],Zy={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},Qy={$schema:By,$id:Hy,$vocabulary:Wy,$dynamicAnchor:Jy,title:Xy,type:Yy,properties:Zy},eg="https://json-schema.org/draft/2020-12/schema",tg="https://json-schema.org/draft/2020-12/meta/core",rg={"https://json-schema.org/draft/2020-12/vocab/core":!0},ng="meta",sg="Core vocabulary meta-schema",ig=["object","boolean"],og={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},ag={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},cg={$schema:eg,$id:tg,$vocabulary:rg,$dynamicAnchor:ng,title:sg,type:ig,properties:og,$defs:ag},ug="https://json-schema.org/draft/2020-12/schema",lg="https://json-schema.org/draft/2020-12/meta/format-annotation",fg={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},dg="meta",hg="Format vocabulary meta-schema for annotation results",mg=["object","boolean"],pg={format:{type:"string"}},yg={$schema:ug,$id:lg,$vocabulary:fg,$dynamicAnchor:dg,title:hg,type:mg,properties:pg},gg="https://json-schema.org/draft/2020-12/schema",vg="https://json-schema.org/draft/2020-12/meta/meta-data",$g={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},_g="meta",wg="Meta-data vocabulary meta-schema",Eg=["object","boolean"],Sg={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},bg={$schema:gg,$id:vg,$vocabulary:$g,$dynamicAnchor:_g,title:wg,type:Eg,properties:Sg},Rg="https://json-schema.org/draft/2020-12/schema",Pg="https://json-schema.org/draft/2020-12/meta/validation",Og={"https://json-schema.org/draft/2020-12/vocab/validation":!0},Ig="meta",Ng="Validation vocabulary meta-schema",Tg=["object","boolean"],Ag={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},jg={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Cg={$schema:Rg,$id:Pg,$vocabulary:Og,$dynamicAnchor:Ig,title:Ng,type:Tg,properties:Ag,$defs:jg};var Ru;function kg(){if(Ru)return cn;Ru=1,Object.defineProperty(cn,"__esModule",{value:!0});const e=Iy,t=My,r=Ky,n=Qy,u=cg,s=yg,o=bg,a=Cg,l=["/properties"];function f(i){return[e,t,r,n,u,m(this,s),o,m(this,a)].forEach(v=>this.addMetaSchema(v,void 0,!1)),this;function m(v,$){return i?v.$dataMetaSchema($,l):$}}return cn.default=f,cn}var Pu;function qg(){return Pu||(Pu=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv2020=void 0;const r=Np(),n=yy(),u=vy(),s=kg(),o="https://json-schema.org/draft/2020-12/schema";class a extends r.default{constructor($={}){super({...$,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),n.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(u.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:$,meta:S}=this.opts;S&&(s.default.call(this,$),this.refs["http://json-schema.org/schema"]=o)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}t.Ajv2020=a,e.exports=t=a,e.exports.Ajv2020=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var l=us();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var f=oe();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return f.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return f.CodeGen}});var i=Vo();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return i.default}});var m=ls();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return m.default}})}(hr,hr.exports)),hr.exports}var Dg=qg(),un={exports:{}},Si={},Ou;function Mg(){return Ou||(Ou=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(F,x){return{validate:F,compare:x}}e.fullFormats={date:t(s,o),time:t(l(!0),f),"date-time":t(v(!0),$),"iso-time":t(l(),i),"iso-date-time":t(v(),S),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:p,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:U,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:d,int32:{type:"number",validate:_},int64:{type:"number",validate:R},float:{type:"number",validate:N},double:{type:"number",validate:N},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,f),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,$),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,i),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,S),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(F){return F%4===0&&(F%100!==0||F%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,u=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(F){const x=n.exec(F);if(!x)return!1;const I=+x[1],A=+x[2],V=+x[3];return A>=1&&A<=12&&V>=1&&V<=(A===2&&r(I)?29:u[A])}function o(F,x){if(F&&x)return F>x?1:F<x?-1:0}const a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(F){return function(I){const A=a.exec(I);if(!A)return!1;const V=+A[1],L=+A[2],K=+A[3],B=A[4],G=A[5]==="-"?-1:1,q=+(A[6]||0),P=+(A[7]||0);if(q>23||P>59||F&&!B)return!1;if(V<=23&&L<=59&&K<60)return!0;const k=L-P*G,O=V-q*G-(k<0?1:0);return(O===23||O===-1)&&(k===59||k===-1)&&K<61}}function f(F,x){if(!(F&&x))return;const I=new Date("2020-01-01T"+F).valueOf(),A=new Date("2020-01-01T"+x).valueOf();if(I&&A)return I-A}function i(F,x){if(!(F&&x))return;const I=a.exec(F),A=a.exec(x);if(I&&A)return F=I[1]+I[2]+I[3],x=A[1]+A[2]+A[3],F>x?1:F<x?-1:0}const m=/t|\s/i;function v(F){const x=l(F);return function(A){const V=A.split(m);return V.length===2&&s(V[0])&&x(V[1])}}function $(F,x){if(!(F&&x))return;const I=new Date(F).valueOf(),A=new Date(x).valueOf();if(I&&A)return I-A}function S(F,x){if(!(F&&x))return;const[I,A]=F.split(m),[V,L]=x.split(m),K=o(I,V);if(K!==void 0)return K||f(A,L)}const y=/\/|:/,h=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function p(F){return y.test(F)&&h.test(F)}const c=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function d(F){return c.lastIndex=0,c.test(F)}const w=-2147483648,E=2**31-1;function _(F){return Number.isInteger(F)&&F<=E&&F>=w}function R(F){return Number.isInteger(F)}function N(){return!0}const C=/[^\\]\\Z/;function U(F){if(C.test(F))return!1;try{return new RegExp(F),!0}catch{return!1}}}(Si)),Si}var bi={},ln={exports:{}},Ri={},ct={},bt={},Pi={},Oi={},Ii={},Iu;function rs(){return Iu||(Iu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(c){if(super(),!e.IDENTIFIER.test(c))throw new Error("CodeGen: name must be a valid identifier");this.str=c}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(c){super(),this._items=typeof c=="string"?[c]:c}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const c=this._items[0];return c===""||c==='""'}get str(){var c;return(c=this._str)!==null&&c!==void 0?c:this._str=this._items.reduce((d,w)=>`${d}${w}`,"")}get names(){var c;return(c=this._names)!==null&&c!==void 0?c:this._names=this._items.reduce((d,w)=>(w instanceof r&&(d[w.str]=(d[w.str]||0)+1),d),{})}}e._Code=n,e.nil=new n("");function u(p,...c){const d=[p[0]];let w=0;for(;w<c.length;)a(d,c[w]),d.push(p[++w]);return new n(d)}e._=u;const s=new n("+");function o(p,...c){const d=[$(p[0])];let w=0;for(;w<c.length;)d.push(s),a(d,c[w]),d.push(s,$(p[++w]));return l(d),new n(d)}e.str=o;function a(p,c){c instanceof n?p.push(...c._items):c instanceof r?p.push(c):p.push(m(c))}e.addCodeArg=a;function l(p){let c=1;for(;c<p.length-1;){if(p[c]===s){const d=f(p[c-1],p[c+1]);if(d!==void 0){p.splice(c-1,3,d);continue}p[c++]="+"}c++}}function f(p,c){if(c==='""')return p;if(p==='""')return c;if(typeof p=="string")return c instanceof r||p[p.length-1]!=='"'?void 0:typeof c!="string"?`${p.slice(0,-1)}${c}"`:c[0]==='"'?p.slice(0,-1)+c.slice(1):void 0;if(typeof c=="string"&&c[0]==='"'&&!(p instanceof r))return`"${p}${c.slice(1)}`}function i(p,c){return c.emptyStr()?p:p.emptyStr()?c:o`${p}${c}`}e.strConcat=i;function m(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:$(Array.isArray(p)?p.join(","):p)}function v(p){return new n($(p))}e.stringify=v;function $(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=$;function S(p){return typeof p=="string"&&e.IDENTIFIER.test(p)?new n(`.${p}`):u`[${p}]`}e.getProperty=S;function y(p){if(typeof p=="string"&&e.IDENTIFIER.test(p))return new n(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}e.getEsmExportName=y;function h(p){return new n(p.toString())}e.regexpCode=h}(Ii)),Ii}var Ni={},Nu;function Tu(){return Nu||(Nu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=rs();class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var n;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class u{constructor({prefixes:f,parent:i}={}){this._names={},this._prefixes=f,this._parent=i}toName(f){return f instanceof t.Name?f:this.name(f)}name(f){return new t.Name(this._newName(f))}_newName(f){const i=this._names[f]||this._nameGroup(f);return`${f}${i.index++}`}_nameGroup(f){var i,m;if(!((m=(i=this._parent)===null||i===void 0?void 0:i._prefixes)===null||m===void 0)&&m.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}e.Scope=u;class s extends t.Name{constructor(f,i){super(i),this.prefix=f}setValue(f,{property:i,itemIndex:m}){this.value=f,this.scopePath=(0,t._)`.${new t.Name(i)}[${m}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends u{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?o:t.nil}}get(){return this._scope}name(f){return new s(f,this._newName(f))}value(f,i){var m;if(i.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(f),{prefix:$}=v,S=(m=i.key)!==null&&m!==void 0?m:i.ref;let y=this._values[$];if(y){const c=y.get(S);if(c)return c}else y=this._values[$]=new Map;y.set(S,v);const h=this._scope[$]||(this._scope[$]=[]),p=h.length;return h[p]=i.ref,v.setValue(i,{property:$,itemIndex:p}),v}getValue(f,i){const m=this._values[f];if(m)return m.get(i)}scopeRefs(f,i=this._values){return this._reduceValues(i,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,t._)`${f}${m.scopePath}`})}scopeCode(f=this._values,i,m){return this._reduceValues(f,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},i,m)}_reduceValues(f,i,m={},v){let $=t.nil;for(const S in f){const y=f[S];if(!y)continue;const h=m[S]=m[S]||new Map;y.forEach(p=>{if(h.has(p))return;h.set(p,n.Started);let c=i(p);if(c){const d=this.opts.es5?e.varKinds.var:e.varKinds.const;$=(0,t._)`${$}${d} ${p} = ${c};${this.opts._n}`}else if(c=v?.(p))$=(0,t._)`${$}${c}${this.opts._n}`;else throw new r(p);h.set(p,n.Completed)})}return $}}e.ValueScope=a}(Ni)),Ni}var Au;function fe(){return Au||(Au=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=rs(),r=Tu();var n=rs();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var u=Tu();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return u.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return u.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return u.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return u.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(g,b){return this}}class o extends s{constructor(g,b,M){super(),this.varKind=g,this.name=b,this.rhs=M}render({es5:g,_n:b}){const M=g?r.varKinds.var:this.varKind,H=this.rhs===void 0?"":` = ${this.rhs}`;return`${M} ${this.name}${H};`+b}optimizeNames(g,b){if(g[this.name.str])return this.rhs&&(this.rhs=A(this.rhs,g,b)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(g,b,M){super(),this.lhs=g,this.rhs=b,this.sideEffects=M}render({_n:g}){return`${this.lhs} = ${this.rhs};`+g}optimizeNames(g,b){if(!(this.lhs instanceof t.Name&&!g[this.lhs.str]&&!this.sideEffects))return this.rhs=A(this.rhs,g,b),this}get names(){const g=this.lhs instanceof t.Name?{}:{...this.lhs.names};return I(g,this.rhs)}}class l extends a{constructor(g,b,M,H){super(g,M,H),this.op=b}render({_n:g}){return`${this.lhs} ${this.op}= ${this.rhs};`+g}}class f extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`${this.label}:`+g}}class i extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`break${this.label?` ${this.label}`:""};`+g}}class m extends s{constructor(g){super(),this.error=g}render({_n:g}){return`throw ${this.error};`+g}get names(){return this.error.names}}class v extends s{constructor(g){super(),this.code=g}render({_n:g}){return`${this.code};`+g}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(g,b){return this.code=A(this.code,g,b),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class $ extends s{constructor(g=[]){super(),this.nodes=g}render(g){return this.nodes.reduce((b,M)=>b+M.render(g),"")}optimizeNodes(){const{nodes:g}=this;let b=g.length;for(;b--;){const M=g[b].optimizeNodes();Array.isArray(M)?g.splice(b,1,...M):M?g[b]=M:g.splice(b,1)}return g.length>0?this:void 0}optimizeNames(g,b){const{nodes:M}=this;let H=M.length;for(;H--;){const W=M[H];W.optimizeNames(g,b)||(V(g,W.names),M.splice(H,1))}return M.length>0?this:void 0}get names(){return this.nodes.reduce((g,b)=>x(g,b.names),{})}}class S extends ${render(g){return"{"+g._n+super.render(g)+"}"+g._n}}class y extends ${}class h extends S{}h.kind="else";class p extends S{constructor(g,b){super(b),this.condition=g}render(g){let b=`if(${this.condition})`+super.render(g);return this.else&&(b+="else "+this.else.render(g)),b}optimizeNodes(){super.optimizeNodes();const g=this.condition;if(g===!0)return this.nodes;let b=this.else;if(b){const M=b.optimizeNodes();b=this.else=Array.isArray(M)?new h(M):M}if(b)return g===!1?b instanceof p?b:b.nodes:this.nodes.length?this:new p(L(g),b instanceof p?[b]:b.nodes);if(!(g===!1||!this.nodes.length))return this}optimizeNames(g,b){var M;if(this.else=(M=this.else)===null||M===void 0?void 0:M.optimizeNames(g,b),!!(super.optimizeNames(g,b)||this.else))return this.condition=A(this.condition,g,b),this}get names(){const g=super.names;return I(g,this.condition),this.else&&x(g,this.else.names),g}}p.kind="if";class c extends S{}c.kind="for";class d extends c{constructor(g){super(),this.iteration=g}render(g){return`for(${this.iteration})`+super.render(g)}optimizeNames(g,b){if(super.optimizeNames(g,b))return this.iteration=A(this.iteration,g,b),this}get names(){return x(super.names,this.iteration.names)}}class w extends c{constructor(g,b,M,H){super(),this.varKind=g,this.name=b,this.from=M,this.to=H}render(g){const b=g.es5?r.varKinds.var:this.varKind,{name:M,from:H,to:W}=this;return`for(${b} ${M}=${H}; ${M}<${W}; ${M}++)`+super.render(g)}get names(){const g=I(super.names,this.from);return I(g,this.to)}}class E extends c{constructor(g,b,M,H){super(),this.loop=g,this.varKind=b,this.name=M,this.iterable=H}render(g){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(g)}optimizeNames(g,b){if(super.optimizeNames(g,b))return this.iterable=A(this.iterable,g,b),this}get names(){return x(super.names,this.iterable.names)}}class _ extends S{constructor(g,b,M){super(),this.name=g,this.args=b,this.async=M}render(g){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(g)}}_.kind="func";class R extends ${render(g){return"return "+super.render(g)}}R.kind="return";class N extends S{render(g){let b="try"+super.render(g);return this.catch&&(b+=this.catch.render(g)),this.finally&&(b+=this.finally.render(g)),b}optimizeNodes(){var g,b;return super.optimizeNodes(),(g=this.catch)===null||g===void 0||g.optimizeNodes(),(b=this.finally)===null||b===void 0||b.optimizeNodes(),this}optimizeNames(g,b){var M,H;return super.optimizeNames(g,b),(M=this.catch)===null||M===void 0||M.optimizeNames(g,b),(H=this.finally)===null||H===void 0||H.optimizeNames(g,b),this}get names(){const g=super.names;return this.catch&&x(g,this.catch.names),this.finally&&x(g,this.finally.names),g}}class C extends S{constructor(g){super(),this.error=g}render(g){return`catch(${this.error})`+super.render(g)}}C.kind="catch";class U extends S{render(g){return"finally"+super.render(g)}}U.kind="finally";class F{constructor(g,b={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...b,_n:b.lines?`
`:""},this._extScope=g,this._scope=new r.Scope({parent:g}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(g){return this._scope.name(g)}scopeName(g){return this._extScope.name(g)}scopeValue(g,b){const M=this._extScope.value(g,b);return(this._values[M.prefix]||(this._values[M.prefix]=new Set)).add(M),M}getScopeValue(g,b){return this._extScope.getValue(g,b)}scopeRefs(g){return this._extScope.scopeRefs(g,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(g,b,M,H){const W=this._scope.toName(b);return M!==void 0&&H&&(this._constants[W.str]=M),this._leafNode(new o(g,W,M)),W}const(g,b,M){return this._def(r.varKinds.const,g,b,M)}let(g,b,M){return this._def(r.varKinds.let,g,b,M)}var(g,b,M){return this._def(r.varKinds.var,g,b,M)}assign(g,b,M){return this._leafNode(new a(g,b,M))}add(g,b){return this._leafNode(new l(g,e.operators.ADD,b))}code(g){return typeof g=="function"?g():g!==t.nil&&this._leafNode(new v(g)),this}object(...g){const b=["{"];for(const[M,H]of g)b.length>1&&b.push(","),b.push(M),(M!==H||this.opts.es5)&&(b.push(":"),(0,t.addCodeArg)(b,H));return b.push("}"),new t._Code(b)}if(g,b,M){if(this._blockNode(new p(g)),b&&M)this.code(b).else().code(M).endIf();else if(b)this.code(b).endIf();else if(M)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(g){return this._elseNode(new p(g))}else(){return this._elseNode(new h)}endIf(){return this._endBlockNode(p,h)}_for(g,b){return this._blockNode(g),b&&this.code(b).endFor(),this}for(g,b){return this._for(new d(g),b)}forRange(g,b,M,H,W=this.opts.es5?r.varKinds.var:r.varKinds.let){const X=this._scope.toName(g);return this._for(new w(W,X,b,M),()=>H(X))}forOf(g,b,M,H=r.varKinds.const){const W=this._scope.toName(g);if(this.opts.es5){const X=b instanceof t.Name?b:this.var("_arr",b);return this.forRange("_i",0,(0,t._)`${X}.length`,Y=>{this.var(W,(0,t._)`${X}[${Y}]`),M(W)})}return this._for(new E("of",H,W,b),()=>M(W))}forIn(g,b,M,H=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(g,(0,t._)`Object.keys(${b})`,M);const W=this._scope.toName(g);return this._for(new E("in",H,W,b),()=>M(W))}endFor(){return this._endBlockNode(c)}label(g){return this._leafNode(new f(g))}break(g){return this._leafNode(new i(g))}return(g){const b=new R;if(this._blockNode(b),this.code(g),b.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(g,b,M){if(!b&&!M)throw new Error('CodeGen: "try" without "catch" and "finally"');const H=new N;if(this._blockNode(H),this.code(g),b){const W=this.name("e");this._currNode=H.catch=new C(W),b(W)}return M&&(this._currNode=H.finally=new U,this.code(M)),this._endBlockNode(C,U)}throw(g){return this._leafNode(new m(g))}block(g,b){return this._blockStarts.push(this._nodes.length),g&&this.code(g).endBlock(b),this}endBlock(g){const b=this._blockStarts.pop();if(b===void 0)throw new Error("CodeGen: not in self-balancing block");const M=this._nodes.length-b;if(M<0||g!==void 0&&M!==g)throw new Error(`CodeGen: wrong number of nodes: ${M} vs ${g} expected`);return this._nodes.length=b,this}func(g,b=t.nil,M,H){return this._blockNode(new _(g,b,M)),H&&this.code(H).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(g=1){for(;g-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(g){return this._currNode.nodes.push(g),this}_blockNode(g){this._currNode.nodes.push(g),this._nodes.push(g)}_endBlockNode(g,b){const M=this._currNode;if(M instanceof g||b&&M instanceof b)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${b?`${g.kind}/${b.kind}`:g.kind}"`)}_elseNode(g){const b=this._currNode;if(!(b instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=b.else=g,this}get _root(){return this._nodes[0]}get _currNode(){const g=this._nodes;return g[g.length-1]}set _currNode(g){const b=this._nodes;b[b.length-1]=g}}e.CodeGen=F;function x(O,g){for(const b in g)O[b]=(O[b]||0)+(g[b]||0);return O}function I(O,g){return g instanceof t._CodeOrName?x(O,g.names):O}function A(O,g,b){if(O instanceof t.Name)return M(O);if(!H(O))return O;return new t._Code(O._items.reduce((W,X)=>(X instanceof t.Name&&(X=M(X)),X instanceof t._Code?W.push(...X._items):W.push(X),W),[]));function M(W){const X=b[W.str];return X===void 0||g[W.str]!==1?W:(delete g[W.str],X)}function H(W){return W instanceof t._Code&&W._items.some(X=>X instanceof t.Name&&g[X.str]===1&&b[X.str]!==void 0)}}function V(O,g){for(const b in g)O[b]=(O[b]||0)-(g[b]||0)}function L(O){return typeof O=="boolean"||typeof O=="number"||O===null?!O:(0,t._)`!${k(O)}`}e.not=L;const K=P(e.operators.AND);function B(...O){return O.reduce(K)}e.and=B;const G=P(e.operators.OR);function q(...O){return O.reduce(G)}e.or=q;function P(O){return(g,b)=>g===t.nil?b:b===t.nil?g:(0,t._)`${k(g)} ${O} ${k(b)}`}function k(O){return O instanceof t.Name?O:(0,t._)`(${O})`}}(Oi)),Oi}var le={},ju;function me(){if(ju)return le;ju=1,Object.defineProperty(le,"__esModule",{value:!0}),le.checkStrictMode=le.getErrorPath=le.Type=le.useFunc=le.setEvaluated=le.evaluatedPropsToName=le.mergeEvaluated=le.eachItem=le.unescapeJsonPointer=le.escapeJsonPointer=le.escapeFragment=le.unescapeFragment=le.schemaRefOrVal=le.schemaHasRulesButRef=le.schemaHasRules=le.checkUnknownRules=le.alwaysValidSchema=le.toHash=void 0;const e=fe(),t=rs();function r(E){const _={};for(const R of E)_[R]=!0;return _}le.toHash=r;function n(E,_){return typeof _=="boolean"?_:Object.keys(_).length===0?!0:(u(E,_),!s(_,E.self.RULES.all))}le.alwaysValidSchema=n;function u(E,_=E.schema){const{opts:R,self:N}=E;if(!R.strictSchema||typeof _=="boolean")return;const C=N.RULES.keywords;for(const U in _)C[U]||w(E,`unknown keyword: "${U}"`)}le.checkUnknownRules=u;function s(E,_){if(typeof E=="boolean")return!E;for(const R in E)if(_[R])return!0;return!1}le.schemaHasRules=s;function o(E,_){if(typeof E=="boolean")return!E;for(const R in E)if(R!=="$ref"&&_.all[R])return!0;return!1}le.schemaHasRulesButRef=o;function a({topSchemaRef:E,schemaPath:_},R,N,C){if(!C){if(typeof R=="number"||typeof R=="boolean")return R;if(typeof R=="string")return(0,e._)`${R}`}return(0,e._)`${E}${_}${(0,e.getProperty)(N)}`}le.schemaRefOrVal=a;function l(E){return m(decodeURIComponent(E))}le.unescapeFragment=l;function f(E){return encodeURIComponent(i(E))}le.escapeFragment=f;function i(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}le.escapeJsonPointer=i;function m(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}le.unescapeJsonPointer=m;function v(E,_){if(Array.isArray(E))for(const R of E)_(R);else _(E)}le.eachItem=v;function $({mergeNames:E,mergeToName:_,mergeValues:R,resultToName:N}){return(C,U,F,x)=>{const I=F===void 0?U:F instanceof e.Name?(U instanceof e.Name?E(C,U,F):_(C,U,F),F):U instanceof e.Name?(_(C,F,U),U):R(U,F);return x===e.Name&&!(I instanceof e.Name)?N(C,I):I}}le.mergeEvaluated={props:$({mergeNames:(E,_,R)=>E.if((0,e._)`${R} !== true && ${_} !== undefined`,()=>{E.if((0,e._)`${_} === true`,()=>E.assign(R,!0),()=>E.assign(R,(0,e._)`${R} || {}`).code((0,e._)`Object.assign(${R}, ${_})`))}),mergeToName:(E,_,R)=>E.if((0,e._)`${R} !== true`,()=>{_===!0?E.assign(R,!0):(E.assign(R,(0,e._)`${R} || {}`),y(E,R,_))}),mergeValues:(E,_)=>E===!0?!0:{...E,..._},resultToName:S}),items:$({mergeNames:(E,_,R)=>E.if((0,e._)`${R} !== true && ${_} !== undefined`,()=>E.assign(R,(0,e._)`${_} === true ? true : ${R} > ${_} ? ${R} : ${_}`)),mergeToName:(E,_,R)=>E.if((0,e._)`${R} !== true`,()=>E.assign(R,_===!0?!0:(0,e._)`${R} > ${_} ? ${R} : ${_}`)),mergeValues:(E,_)=>E===!0?!0:Math.max(E,_),resultToName:(E,_)=>E.var("items",_)})};function S(E,_){if(_===!0)return E.var("props",!0);const R=E.var("props",(0,e._)`{}`);return _!==void 0&&y(E,R,_),R}le.evaluatedPropsToName=S;function y(E,_,R){Object.keys(R).forEach(N=>E.assign((0,e._)`${_}${(0,e.getProperty)(N)}`,!0))}le.setEvaluated=y;const h={};function p(E,_){return E.scopeValue("func",{ref:_,code:h[_.code]||(h[_.code]=new t._Code(_.code))})}le.useFunc=p;var c;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(c||(le.Type=c={}));function d(E,_,R){if(E instanceof e.Name){const N=_===c.Num;return R?N?(0,e._)`"[" + ${E} + "]"`:(0,e._)`"['" + ${E} + "']"`:N?(0,e._)`"/" + ${E}`:(0,e._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return R?(0,e.getProperty)(E).toString():"/"+i(E)}le.getErrorPath=d;function w(E,_,R=E.opts.strictSchema){if(R){if(_=`strict mode: ${_}`,R===!0)throw new Error(_);E.self.logger.warn(_)}}return le.checkStrictMode=w,le}var fn={},Cu;function $t(){if(Cu)return fn;Cu=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=fe(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return fn.default=t,fn}var ku;function ds(){return ku||(ku=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=fe(),r=me(),n=$t();e.keywordError={message:({keyword:h})=>(0,t.str)`must pass "${h}" keyword validation`},e.keyword$DataError={message:({keyword:h,schemaType:p})=>p?(0,t.str)`"${h}" keyword must be ${p} ($data)`:(0,t.str)`"${h}" keyword is invalid ($data)`};function u(h,p=e.keywordError,c,d){const{it:w}=h,{gen:E,compositeRule:_,allErrors:R}=w,N=m(h,p,c);d??(_||R)?l(E,N):f(w,(0,t._)`[${N}]`)}e.reportError=u;function s(h,p=e.keywordError,c){const{it:d}=h,{gen:w,compositeRule:E,allErrors:_}=d,R=m(h,p,c);l(w,R),E||_||f(d,n.default.vErrors)}e.reportExtraError=s;function o(h,p){h.assign(n.default.errors,p),h.if((0,t._)`${n.default.vErrors} !== null`,()=>h.if(p,()=>h.assign((0,t._)`${n.default.vErrors}.length`,p),()=>h.assign(n.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:h,keyword:p,schemaValue:c,data:d,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const _=h.name("err");h.forRange("i",w,n.default.errors,R=>{h.const(_,(0,t._)`${n.default.vErrors}[${R}]`),h.if((0,t._)`${_}.instancePath === undefined`,()=>h.assign((0,t._)`${_}.instancePath`,(0,t.strConcat)(n.default.instancePath,E.errorPath))),h.assign((0,t._)`${_}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${p}`),E.opts.verbose&&(h.assign((0,t._)`${_}.schema`,c),h.assign((0,t._)`${_}.data`,d))})}e.extendErrors=a;function l(h,p){const c=h.const("err",p);h.if((0,t._)`${n.default.vErrors} === null`,()=>h.assign(n.default.vErrors,(0,t._)`[${c}]`),(0,t._)`${n.default.vErrors}.push(${c})`),h.code((0,t._)`${n.default.errors}++`)}function f(h,p){const{gen:c,validateName:d,schemaEnv:w}=h;w.$async?c.throw((0,t._)`new ${h.ValidationError}(${p})`):(c.assign((0,t._)`${d}.errors`,p),c.return(!1))}const i={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function m(h,p,c){const{createErrors:d}=h.it;return d===!1?(0,t._)`{}`:v(h,p,c)}function v(h,p,c={}){const{gen:d,it:w}=h,E=[$(w,c),S(h,c)];return y(h,p,E),d.object(...E)}function $({errorPath:h},{instancePath:p}){const c=p?(0,t.str)`${h}${(0,r.getErrorPath)(p,r.Type.Str)}`:h;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,c)]}function S({keyword:h,it:{errSchemaPath:p}},{schemaPath:c,parentSchema:d}){let w=d?p:(0,t.str)`${p}/${h}`;return c&&(w=(0,t.str)`${w}${(0,r.getErrorPath)(c,r.Type.Str)}`),[i.schemaPath,w]}function y(h,{params:p,message:c},d){const{keyword:w,data:E,schemaValue:_,it:R}=h,{opts:N,propertyName:C,topSchemaRef:U,schemaPath:F}=R;d.push([i.keyword,w],[i.params,typeof p=="function"?p(h):p||(0,t._)`{}`]),N.messages&&d.push([i.message,typeof c=="function"?c(h):c]),N.verbose&&d.push([i.schema,_],[i.parentSchema,(0,t._)`${U}${F}`],[n.default.data,E]),C&&d.push([i.propertyName,C])}}(Pi)),Pi}var qu;function Lg(){if(qu)return bt;qu=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.boolOrEmptySchema=bt.topBoolOrEmptySchema=void 0;const e=ds(),t=fe(),r=$t(),n={message:"boolean schema is false"};function u(a){const{gen:l,schema:f,validateName:i}=a;f===!1?o(a,!1):typeof f=="object"&&f.$async===!0?l.return(r.default.data):(l.assign((0,t._)`${i}.errors`,null),l.return(!0))}bt.topBoolOrEmptySchema=u;function s(a,l){const{gen:f,schema:i}=a;i===!1?(f.var(l,!1),o(a)):f.var(l,!0)}bt.boolOrEmptySchema=s;function o(a,l){const{gen:f,data:i}=a,m={gen:f,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(m,n,void 0,l)}return bt}var Re={},Rt={},Du;function Sd(){if(Du)return Rt;Du=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.getRules=Rt.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(u){return typeof u=="string"&&t.has(u)}Rt.isJSONType=r;function n(){const u={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...u,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},u.number,u.string,u.array,u.object],post:{rules:[]},all:{},keywords:{}}}return Rt.getRules=n,Rt}var ut={},Mu;function bd(){if(Mu)return ut;Mu=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.shouldUseRule=ut.shouldUseGroup=ut.schemaHasRulesForType=void 0;function e({schema:n,self:u},s){const o=u.RULES.types[s];return o&&o!==!0&&t(n,o)}ut.schemaHasRulesForType=e;function t(n,u){return u.rules.some(s=>r(n,s))}ut.shouldUseGroup=t;function r(n,u){var s;return n[u.keyword]!==void 0||((s=u.definition.implements)===null||s===void 0?void 0:s.some(o=>n[o]!==void 0))}return ut.shouldUseRule=r,ut}var Lu;function ns(){if(Lu)return Re;Lu=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.reportTypeError=Re.checkDataTypes=Re.checkDataType=Re.coerceAndCheckDataType=Re.getJSONTypes=Re.getSchemaTypes=Re.DataType=void 0;const e=Sd(),t=bd(),r=ds(),n=fe(),u=me();var s;(function(c){c[c.Correct=0]="Correct",c[c.Wrong=1]="Wrong"})(s||(Re.DataType=s={}));function o(c){const d=a(c.type);if(d.includes("null")){if(c.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!d.length&&c.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');c.nullable===!0&&d.push("null")}return d}Re.getSchemaTypes=o;function a(c){const d=Array.isArray(c)?c:c?[c]:[];if(d.every(e.isJSONType))return d;throw new Error("type must be JSONType or JSONType[]: "+d.join(","))}Re.getJSONTypes=a;function l(c,d){const{gen:w,data:E,opts:_}=c,R=i(d,_.coerceTypes),N=d.length>0&&!(R.length===0&&d.length===1&&(0,t.schemaHasRulesForType)(c,d[0]));if(N){const C=S(d,E,_.strictNumbers,s.Wrong);w.if(C,()=>{R.length?m(c,d,R):h(c)})}return N}Re.coerceAndCheckDataType=l;const f=new Set(["string","number","integer","boolean","null"]);function i(c,d){return d?c.filter(w=>f.has(w)||d==="array"&&w==="array"):[]}function m(c,d,w){const{gen:E,data:_,opts:R}=c,N=E.let("dataType",(0,n._)`typeof ${_}`),C=E.let("coerced",(0,n._)`undefined`);R.coerceTypes==="array"&&E.if((0,n._)`${N} == 'object' && Array.isArray(${_}) && ${_}.length == 1`,()=>E.assign(_,(0,n._)`${_}[0]`).assign(N,(0,n._)`typeof ${_}`).if(S(d,_,R.strictNumbers),()=>E.assign(C,_))),E.if((0,n._)`${C} !== undefined`);for(const F of w)(f.has(F)||F==="array"&&R.coerceTypes==="array")&&U(F);E.else(),h(c),E.endIf(),E.if((0,n._)`${C} !== undefined`,()=>{E.assign(_,C),v(c,C)});function U(F){switch(F){case"string":E.elseIf((0,n._)`${N} == "number" || ${N} == "boolean"`).assign(C,(0,n._)`"" + ${_}`).elseIf((0,n._)`${_} === null`).assign(C,(0,n._)`""`);return;case"number":E.elseIf((0,n._)`${N} == "boolean" || ${_} === null
              || (${N} == "string" && ${_} && ${_} == +${_})`).assign(C,(0,n._)`+${_}`);return;case"integer":E.elseIf((0,n._)`${N} === "boolean" || ${_} === null
              || (${N} === "string" && ${_} && ${_} == +${_} && !(${_} % 1))`).assign(C,(0,n._)`+${_}`);return;case"boolean":E.elseIf((0,n._)`${_} === "false" || ${_} === 0 || ${_} === null`).assign(C,!1).elseIf((0,n._)`${_} === "true" || ${_} === 1`).assign(C,!0);return;case"null":E.elseIf((0,n._)`${_} === "" || ${_} === 0 || ${_} === false`),E.assign(C,null);return;case"array":E.elseIf((0,n._)`${N} === "string" || ${N} === "number"
              || ${N} === "boolean" || ${_} === null`).assign(C,(0,n._)`[${_}]`)}}}function v({gen:c,parentData:d,parentDataProperty:w},E){c.if((0,n._)`${d} !== undefined`,()=>c.assign((0,n._)`${d}[${w}]`,E))}function $(c,d,w,E=s.Correct){const _=E===s.Correct?n.operators.EQ:n.operators.NEQ;let R;switch(c){case"null":return(0,n._)`${d} ${_} null`;case"array":R=(0,n._)`Array.isArray(${d})`;break;case"object":R=(0,n._)`${d} && typeof ${d} == "object" && !Array.isArray(${d})`;break;case"integer":R=N((0,n._)`!(${d} % 1) && !isNaN(${d})`);break;case"number":R=N();break;default:return(0,n._)`typeof ${d} ${_} ${c}`}return E===s.Correct?R:(0,n.not)(R);function N(C=n.nil){return(0,n.and)((0,n._)`typeof ${d} == "number"`,C,w?(0,n._)`isFinite(${d})`:n.nil)}}Re.checkDataType=$;function S(c,d,w,E){if(c.length===1)return $(c[0],d,w,E);let _;const R=(0,u.toHash)(c);if(R.array&&R.object){const N=(0,n._)`typeof ${d} != "object"`;_=R.null?N:(0,n._)`!${d} || ${N}`,delete R.null,delete R.array,delete R.object}else _=n.nil;R.number&&delete R.integer;for(const N in R)_=(0,n.and)(_,$(N,d,w,E));return _}Re.checkDataTypes=S;const y={message:({schema:c})=>`must be ${c}`,params:({schema:c,schemaValue:d})=>typeof c=="string"?(0,n._)`{type: ${c}}`:(0,n._)`{type: ${d}}`};function h(c){const d=p(c);(0,r.reportError)(d,y)}Re.reportTypeError=h;function p(c){const{gen:d,data:w,schema:E}=c,_=(0,u.schemaRefOrVal)(c,E,"type");return{gen:d,keyword:"type",data:w,schema:E.type,schemaCode:_,schemaValue:_,parentSchema:E,params:{},it:c}}return Re}var Yt={},Fu;function Fg(){if(Fu)return Yt;Fu=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.assignDefaults=void 0;const e=fe(),t=me();function r(u,s){const{properties:o,items:a}=u.schema;if(s==="object"&&o)for(const l in o)n(u,l,o[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,f)=>n(u,f,l.default))}Yt.assignDefaults=r;function n(u,s,o){const{gen:a,compositeRule:l,data:f,opts:i}=u;if(o===void 0)return;const m=(0,e._)`${f}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(u,`default is ignored for: ${m}`);return}let v=(0,e._)`${m} === undefined`;i.useDefaults==="empty"&&(v=(0,e._)`${v} || ${m} === null || ${m} === ""`),a.if(v,(0,e._)`${m} = ${(0,e.stringify)(o)}`)}return Yt}var Ke={},ge={},Vu;function Xe(){if(Vu)return ge;Vu=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.validateUnion=ge.validateArray=ge.usePattern=ge.callValidateCode=ge.schemaProperties=ge.allSchemaProperties=ge.noPropertyInData=ge.propertyInData=ge.isOwnProperty=ge.hasPropFunc=ge.reportMissingProp=ge.checkMissingProp=ge.checkReportMissingProp=void 0;const e=fe(),t=me(),r=$t(),n=me();function u(c,d){const{gen:w,data:E,it:_}=c;w.if(i(w,E,d,_.opts.ownProperties),()=>{c.setParams({missingProperty:(0,e._)`${d}`},!0),c.error()})}ge.checkReportMissingProp=u;function s({gen:c,data:d,it:{opts:w}},E,_){return(0,e.or)(...E.map(R=>(0,e.and)(i(c,d,R,w.ownProperties),(0,e._)`${_} = ${R}`)))}ge.checkMissingProp=s;function o(c,d){c.setParams({missingProperty:d},!0),c.error()}ge.reportMissingProp=o;function a(c){return c.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}ge.hasPropFunc=a;function l(c,d,w){return(0,e._)`${a(c)}.call(${d}, ${w})`}ge.isOwnProperty=l;function f(c,d,w,E){const _=(0,e._)`${d}${(0,e.getProperty)(w)} !== undefined`;return E?(0,e._)`${_} && ${l(c,d,w)}`:_}ge.propertyInData=f;function i(c,d,w,E){const _=(0,e._)`${d}${(0,e.getProperty)(w)} === undefined`;return E?(0,e.or)(_,(0,e.not)(l(c,d,w))):_}ge.noPropertyInData=i;function m(c){return c?Object.keys(c).filter(d=>d!=="__proto__"):[]}ge.allSchemaProperties=m;function v(c,d){return m(d).filter(w=>!(0,t.alwaysValidSchema)(c,d[w]))}ge.schemaProperties=v;function $({schemaCode:c,data:d,it:{gen:w,topSchemaRef:E,schemaPath:_,errorPath:R},it:N},C,U,F){const x=F?(0,e._)`${c}, ${d}, ${E}${_}`:d,I=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,R)],[r.default.parentData,N.parentData],[r.default.parentDataProperty,N.parentDataProperty],[r.default.rootData,r.default.rootData]];N.opts.dynamicRef&&I.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const A=(0,e._)`${x}, ${w.object(...I)}`;return U!==e.nil?(0,e._)`${C}.call(${U}, ${A})`:(0,e._)`${C}(${A})`}ge.callValidateCode=$;const S=(0,e._)`new RegExp`;function y({gen:c,it:{opts:d}},w){const E=d.unicodeRegExp?"u":"",{regExp:_}=d.code,R=_(w,E);return c.scopeValue("pattern",{key:R.toString(),ref:R,code:(0,e._)`${_.code==="new RegExp"?S:(0,n.useFunc)(c,_)}(${w}, ${E})`})}ge.usePattern=y;function h(c){const{gen:d,data:w,keyword:E,it:_}=c,R=d.name("valid");if(_.allErrors){const C=d.let("valid",!0);return N(()=>d.assign(C,!1)),C}return d.var(R,!0),N(()=>d.break()),R;function N(C){const U=d.const("len",(0,e._)`${w}.length`);d.forRange("i",0,U,F=>{c.subschema({keyword:E,dataProp:F,dataPropType:t.Type.Num},R),d.if((0,e.not)(R),C)})}}ge.validateArray=h;function p(c){const{gen:d,schema:w,keyword:E,it:_}=c;if(!Array.isArray(w))throw new Error("ajv implementation error");if(w.some(U=>(0,t.alwaysValidSchema)(_,U))&&!_.opts.unevaluated)return;const N=d.let("valid",!1),C=d.name("_valid");d.block(()=>w.forEach((U,F)=>{const x=c.subschema({keyword:E,schemaProp:F,compositeRule:!0},C);d.assign(N,(0,e._)`${N} || ${C}`),c.mergeValidEvaluated(x,C)||d.if((0,e.not)(N))})),c.result(N,()=>c.reset(),()=>c.error(!0))}return ge.validateUnion=p,ge}var Uu;function Vg(){if(Uu)return Ke;Uu=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.validateKeywordUsage=Ke.validSchemaType=Ke.funcKeywordCode=Ke.macroKeywordCode=void 0;const e=fe(),t=$t(),r=Xe(),n=ds();function u(v,$){const{gen:S,keyword:y,schema:h,parentSchema:p,it:c}=v,d=$.macro.call(c.self,h,p,c),w=f(S,y,d);c.opts.validateSchema!==!1&&c.self.validateSchema(d,!0);const E=S.name("valid");v.subschema({schema:d,schemaPath:e.nil,errSchemaPath:`${c.errSchemaPath}/${y}`,topSchemaRef:w,compositeRule:!0},E),v.pass(E,()=>v.error(!0))}Ke.macroKeywordCode=u;function s(v,$){var S;const{gen:y,keyword:h,schema:p,parentSchema:c,$data:d,it:w}=v;l(w,$);const E=!d&&$.compile?$.compile.call(w.self,p,c,w):$.validate,_=f(y,h,E),R=y.let("valid");v.block$data(R,N),v.ok((S=$.valid)!==null&&S!==void 0?S:R);function N(){if($.errors===!1)F(),$.modifying&&o(v),x(()=>v.error());else{const I=$.async?C():U();$.modifying&&o(v),x(()=>a(v,I))}}function C(){const I=y.let("ruleErrs",null);return y.try(()=>F((0,e._)`await `),A=>y.assign(R,!1).if((0,e._)`${A} instanceof ${w.ValidationError}`,()=>y.assign(I,(0,e._)`${A}.errors`),()=>y.throw(A))),I}function U(){const I=(0,e._)`${_}.errors`;return y.assign(I,null),F(e.nil),I}function F(I=$.async?(0,e._)`await `:e.nil){const A=w.opts.passContext?t.default.this:t.default.self,V=!("compile"in $&&!d||$.schema===!1);y.assign(R,(0,e._)`${I}${(0,r.callValidateCode)(v,_,A,V)}`,$.modifying)}function x(I){var A;y.if((0,e.not)((A=$.valid)!==null&&A!==void 0?A:R),I)}}Ke.funcKeywordCode=s;function o(v){const{gen:$,data:S,it:y}=v;$.if(y.parentData,()=>$.assign(S,(0,e._)`${y.parentData}[${y.parentDataProperty}]`))}function a(v,$){const{gen:S}=v;S.if((0,e._)`Array.isArray(${$})`,()=>{S.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${$} : ${t.default.vErrors}.concat(${$})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)(v)},()=>v.error())}function l({schemaEnv:v},$){if($.async&&!v.$async)throw new Error("async keyword in sync schema")}function f(v,$,S){if(S===void 0)throw new Error(`keyword "${$}" failed to compile`);return v.scopeValue("keyword",typeof S=="function"?{ref:S}:{ref:S,code:(0,e.stringify)(S)})}function i(v,$,S=!1){return!$.length||$.some(y=>y==="array"?Array.isArray(v):y==="object"?v&&typeof v=="object"&&!Array.isArray(v):typeof v==y||S&&typeof v>"u")}Ke.validSchemaType=i;function m({schema:v,opts:$,self:S,errSchemaPath:y},h,p){if(Array.isArray(h.keyword)?!h.keyword.includes(p):h.keyword!==p)throw new Error("ajv implementation error");const c=h.dependencies;if(c?.some(d=>!Object.prototype.hasOwnProperty.call(v,d)))throw new Error(`parent schema must have dependencies of ${p}: ${c.join(",")}`);if(h.validateSchema&&!h.validateSchema(v[p])){const w=`keyword "${p}" value is invalid at path "${y}": `+S.errorsText(h.validateSchema.errors);if($.validateSchema==="log")S.logger.error(w);else throw new Error(w)}}return Ke.validateKeywordUsage=m,Ke}var lt={},zu;function Ug(){if(zu)return lt;zu=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.extendSubschemaMode=lt.extendSubschemaData=lt.getSubschema=void 0;const e=fe(),t=me();function r(s,{keyword:o,schemaProp:a,schema:l,schemaPath:f,errSchemaPath:i,topSchemaRef:m}){if(o!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const v=s.schema[o];return a===void 0?{schema:v,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:v[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(l!==void 0){if(f===void 0||i===void 0||m===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:f,topSchemaRef:m,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}lt.getSubschema=r;function n(s,o,{dataProp:a,dataPropType:l,data:f,dataTypes:i,propertyName:m}){if(f!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:v}=o;if(a!==void 0){const{errorPath:S,dataPathArr:y,opts:h}=o,p=v.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);$(p),s.errorPath=(0,e.str)`${S}${(0,t.getErrorPath)(a,l,h.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...y,s.parentDataProperty]}if(f!==void 0){const S=f instanceof e.Name?f:v.let("data",f,!0);$(S),m!==void 0&&(s.propertyName=m)}i&&(s.dataTypes=i);function $(S){s.data=S,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,S]}}lt.extendSubschemaData=n;function u(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:l,createErrors:f,allErrors:i}){l!==void 0&&(s.compositeRule=l),f!==void 0&&(s.createErrors=f),i!==void 0&&(s.allErrors=i),s.jtdDiscriminator=o,s.jtdMetadata=a}return lt.extendSubschemaMode=u,lt}var Ce={},Ti={exports:{}},Gu;function zg(){if(Gu)return Ti.exports;Gu=1;var e=Ti.exports=function(n,u,s){typeof u=="function"&&(s=u,u={}),s=u.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(u,o,a,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,u,s,o,a,l,f,i,m,v){if(o&&typeof o=="object"&&!Array.isArray(o)){u(o,a,l,f,i,m,v);for(var $ in o){var S=o[$];if(Array.isArray(S)){if($ in e.arrayKeywords)for(var y=0;y<S.length;y++)t(n,u,s,S[y],a+"/"+$+"/"+y,l,a,$,o,y)}else if($ in e.propsKeywords){if(S&&typeof S=="object")for(var h in S)t(n,u,s,S[h],a+"/"+$+"/"+r(h),l,a,$,o,h)}else($ in e.keywords||n.allKeys&&!($ in e.skipKeywords))&&t(n,u,s,S,a+"/"+$,l,a,$,o)}s(o,a,l,f,i,m,v)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return Ti.exports}var xu;function hs(){if(xu)return Ce;xu=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getSchemaRefs=Ce.resolveUrl=Ce.normalizeId=Ce._getFullPath=Ce.getFullPath=Ce.inlineRef=void 0;const e=me(),t=as(),r=zg(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function u(y,h=!0){return typeof y=="boolean"?!0:h===!0?!o(y):h?a(y)<=h:!1}Ce.inlineRef=u;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(y){for(const h in y){if(s.has(h))return!0;const p=y[h];if(Array.isArray(p)&&p.some(o)||typeof p=="object"&&o(p))return!0}return!1}function a(y){let h=0;for(const p in y){if(p==="$ref")return 1/0;if(h++,!n.has(p)&&(typeof y[p]=="object"&&(0,e.eachItem)(y[p],c=>h+=a(c)),h===1/0))return 1/0}return h}function l(y,h="",p){p!==!1&&(h=m(h));const c=y.parse(h);return f(y,c)}Ce.getFullPath=l;function f(y,h){return y.serialize(h).split("#")[0]+"#"}Ce._getFullPath=f;const i=/#\/?$/;function m(y){return y?y.replace(i,""):""}Ce.normalizeId=m;function v(y,h,p){return p=m(p),y.resolve(h,p)}Ce.resolveUrl=v;const $=/^[a-z_][-a-z0-9._]*$/i;function S(y,h){if(typeof y=="boolean")return{};const{schemaId:p,uriResolver:c}=this.opts,d=m(y[p]||h),w={"":d},E=l(c,d,!1),_={},R=new Set;return r(y,{allKeys:!0},(U,F,x,I)=>{if(I===void 0)return;const A=E+F;let V=w[I];typeof U[p]=="string"&&(V=L.call(this,U[p])),K.call(this,U.$anchor),K.call(this,U.$dynamicAnchor),w[F]=V;function L(B){const G=this.opts.uriResolver.resolve;if(B=m(V?G(V,B):B),R.has(B))throw C(B);R.add(B);let q=this.refs[B];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?N(U,q.schema,B):B!==m(A)&&(B[0]==="#"?(N(U,_[B],B),_[B]=U):this.refs[B]=A),B}function K(B){if(typeof B=="string"){if(!$.test(B))throw new Error(`invalid anchor "${B}"`);L.call(this,`#${B}`)}}}),_;function N(U,F,x){if(F!==void 0&&!t(U,F))throw C(x)}function C(U){return new Error(`reference "${U}" resolves to more than one schema`)}}return Ce.getSchemaRefs=S,Ce}var Ku;function ms(){if(Ku)return ct;Ku=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.getData=ct.KeywordCxt=ct.validateFunctionCode=void 0;const e=Lg(),t=ns(),r=bd(),n=ns(),u=Fg(),s=Vg(),o=Ug(),a=fe(),l=$t(),f=hs(),i=me(),m=ds();function v(T){if(E(T)&&(R(T),w(T))){h(T);return}$(T,()=>(0,e.topBoolOrEmptySchema)(T))}ct.validateFunctionCode=v;function $({gen:T,validateName:j,schema:D,schemaEnv:z,opts:J},Z){J.code.es5?T.func(j,(0,a._)`${l.default.data}, ${l.default.valCxt}`,z.$async,()=>{T.code((0,a._)`"use strict"; ${c(D,J)}`),y(T,J),T.code(Z)}):T.func(j,(0,a._)`${l.default.data}, ${S(J)}`,z.$async,()=>T.code(c(D,J)).code(Z))}function S(T){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${T.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function y(T,j){T.if(l.default.valCxt,()=>{T.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),T.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),T.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),T.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),j.dynamicRef&&T.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{T.var(l.default.instancePath,(0,a._)`""`),T.var(l.default.parentData,(0,a._)`undefined`),T.var(l.default.parentDataProperty,(0,a._)`undefined`),T.var(l.default.rootData,l.default.data),j.dynamicRef&&T.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function h(T){const{schema:j,opts:D,gen:z}=T;$(T,()=>{D.$comment&&j.$comment&&I(T),U(T),z.let(l.default.vErrors,null),z.let(l.default.errors,0),D.unevaluated&&p(T),N(T),A(T)})}function p(T){const{gen:j,validateName:D}=T;T.evaluated=j.const("evaluated",(0,a._)`${D}.evaluated`),j.if((0,a._)`${T.evaluated}.dynamicProps`,()=>j.assign((0,a._)`${T.evaluated}.props`,(0,a._)`undefined`)),j.if((0,a._)`${T.evaluated}.dynamicItems`,()=>j.assign((0,a._)`${T.evaluated}.items`,(0,a._)`undefined`))}function c(T,j){const D=typeof T=="object"&&T[j.schemaId];return D&&(j.code.source||j.code.process)?(0,a._)`/*# sourceURL=${D} */`:a.nil}function d(T,j){if(E(T)&&(R(T),w(T))){_(T,j);return}(0,e.boolOrEmptySchema)(T,j)}function w({schema:T,self:j}){if(typeof T=="boolean")return!T;for(const D in T)if(j.RULES.all[D])return!0;return!1}function E(T){return typeof T.schema!="boolean"}function _(T,j){const{schema:D,gen:z,opts:J}=T;J.$comment&&D.$comment&&I(T),F(T),x(T);const Z=z.const("_errs",l.default.errors);N(T,Z),z.var(j,(0,a._)`${Z} === ${l.default.errors}`)}function R(T){(0,i.checkUnknownRules)(T),C(T)}function N(T,j){if(T.opts.jtd)return L(T,[],!1,j);const D=(0,t.getSchemaTypes)(T.schema),z=(0,t.coerceAndCheckDataType)(T,D);L(T,D,!z,j)}function C(T){const{schema:j,errSchemaPath:D,opts:z,self:J}=T;j.$ref&&z.ignoreKeywordsWithRef&&(0,i.schemaHasRulesButRef)(j,J.RULES)&&J.logger.warn(`$ref: keywords ignored in schema at path "${D}"`)}function U(T){const{schema:j,opts:D}=T;j.default!==void 0&&D.useDefaults&&D.strictSchema&&(0,i.checkStrictMode)(T,"default is ignored in the schema root")}function F(T){const j=T.schema[T.opts.schemaId];j&&(T.baseId=(0,f.resolveUrl)(T.opts.uriResolver,T.baseId,j))}function x(T){if(T.schema.$async&&!T.schemaEnv.$async)throw new Error("async schema in sync schema")}function I({gen:T,schemaEnv:j,schema:D,errSchemaPath:z,opts:J}){const Z=D.$comment;if(J.$comment===!0)T.code((0,a._)`${l.default.self}.logger.log(${Z})`);else if(typeof J.$comment=="function"){const Q=(0,a.str)`${z}/$comment`,ae=T.scopeValue("root",{ref:j.root});T.code((0,a._)`${l.default.self}.opts.$comment(${Z}, ${Q}, ${ae}.schema)`)}}function A(T){const{gen:j,schemaEnv:D,validateName:z,ValidationError:J,opts:Z}=T;D.$async?j.if((0,a._)`${l.default.errors} === 0`,()=>j.return(l.default.data),()=>j.throw((0,a._)`new ${J}(${l.default.vErrors})`)):(j.assign((0,a._)`${z}.errors`,l.default.vErrors),Z.unevaluated&&V(T),j.return((0,a._)`${l.default.errors} === 0`))}function V({gen:T,evaluated:j,props:D,items:z}){D instanceof a.Name&&T.assign((0,a._)`${j}.props`,D),z instanceof a.Name&&T.assign((0,a._)`${j}.items`,z)}function L(T,j,D,z){const{gen:J,schema:Z,data:Q,allErrors:ae,opts:te,self:se}=T,{RULES:ee}=se;if(Z.$ref&&(te.ignoreKeywordsWithRef||!(0,i.schemaHasRulesButRef)(Z,ee))){J.block(()=>H(T,"$ref",ee.all.$ref.definition));return}te.jtd||B(T,j),J.block(()=>{for(const re of ee.rules)ve(re);ve(ee.post)});function ve(re){(0,r.shouldUseGroup)(Z,re)&&(re.type?(J.if((0,n.checkDataType)(re.type,Q,te.strictNumbers)),K(T,re),j.length===1&&j[0]===re.type&&D&&(J.else(),(0,n.reportTypeError)(T)),J.endIf()):K(T,re),ae||J.if((0,a._)`${l.default.errors} === ${z||0}`))}}function K(T,j){const{gen:D,schema:z,opts:{useDefaults:J}}=T;J&&(0,u.assignDefaults)(T,j.type),D.block(()=>{for(const Z of j.rules)(0,r.shouldUseRule)(z,Z)&&H(T,Z.keyword,Z.definition,j.type)})}function B(T,j){T.schemaEnv.meta||!T.opts.strictTypes||(G(T,j),T.opts.allowUnionTypes||q(T,j),P(T,T.dataTypes))}function G(T,j){if(j.length){if(!T.dataTypes.length){T.dataTypes=j;return}j.forEach(D=>{O(T.dataTypes,D)||b(T,`type "${D}" not allowed by context "${T.dataTypes.join(",")}"`)}),g(T,j)}}function q(T,j){j.length>1&&!(j.length===2&&j.includes("null"))&&b(T,"use allowUnionTypes to allow union type keyword")}function P(T,j){const D=T.self.RULES.all;for(const z in D){const J=D[z];if(typeof J=="object"&&(0,r.shouldUseRule)(T.schema,J)){const{type:Z}=J.definition;Z.length&&!Z.some(Q=>k(j,Q))&&b(T,`missing type "${Z.join(",")}" for keyword "${z}"`)}}}function k(T,j){return T.includes(j)||j==="number"&&T.includes("integer")}function O(T,j){return T.includes(j)||j==="integer"&&T.includes("number")}function g(T,j){const D=[];for(const z of T.dataTypes)O(j,z)?D.push(z):j.includes("integer")&&z==="number"&&D.push("integer");T.dataTypes=D}function b(T,j){const D=T.schemaEnv.baseId+T.errSchemaPath;j+=` at "${D}" (strictTypes)`,(0,i.checkStrictMode)(T,j,T.opts.strictTypes)}class M{constructor(j,D,z){if((0,s.validateKeywordUsage)(j,D,z),this.gen=j.gen,this.allErrors=j.allErrors,this.keyword=z,this.data=j.data,this.schema=j.schema[z],this.$data=D.$data&&j.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,i.schemaRefOrVal)(j,this.schema,z,this.$data),this.schemaType=D.schemaType,this.parentSchema=j.schema,this.params={},this.it=j,this.def=D,this.$data)this.schemaCode=j.gen.const("vSchema",Y(this.$data,j));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,D.schemaType,D.allowUndefined))throw new Error(`${z} value must be ${JSON.stringify(D.schemaType)}`);("code"in D?D.trackErrors:D.errors!==!1)&&(this.errsCount=j.gen.const("_errs",l.default.errors))}result(j,D,z){this.failResult((0,a.not)(j),D,z)}failResult(j,D,z){this.gen.if(j),z?z():this.error(),D?(this.gen.else(),D(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(j,D){this.failResult((0,a.not)(j),void 0,D)}fail(j){if(j===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(j),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(j){if(!this.$data)return this.fail(j);const{schemaCode:D}=this;this.fail((0,a._)`${D} !== undefined && (${(0,a.or)(this.invalid$data(),j)})`)}error(j,D,z){if(D){this.setParams(D),this._error(j,z),this.setParams({});return}this._error(j,z)}_error(j,D){(j?m.reportExtraError:m.reportError)(this,this.def.error,D)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(j){this.allErrors||this.gen.if(j)}setParams(j,D){D?Object.assign(this.params,j):this.params=j}block$data(j,D,z=a.nil){this.gen.block(()=>{this.check$data(j,z),D()})}check$data(j=a.nil,D=a.nil){if(!this.$data)return;const{gen:z,schemaCode:J,schemaType:Z,def:Q}=this;z.if((0,a.or)((0,a._)`${J} === undefined`,D)),j!==a.nil&&z.assign(j,!0),(Z.length||Q.validateSchema)&&(z.elseIf(this.invalid$data()),this.$dataError(),j!==a.nil&&z.assign(j,!1)),z.else()}invalid$data(){const{gen:j,schemaCode:D,schemaType:z,def:J,it:Z}=this;return(0,a.or)(Q(),ae());function Q(){if(z.length){if(!(D instanceof a.Name))throw new Error("ajv implementation error");const te=Array.isArray(z)?z:[z];return(0,a._)`${(0,n.checkDataTypes)(te,D,Z.opts.strictNumbers,n.DataType.Wrong)}`}return a.nil}function ae(){if(J.validateSchema){const te=j.scopeValue("validate$data",{ref:J.validateSchema});return(0,a._)`!${te}(${D})`}return a.nil}}subschema(j,D){const z=(0,o.getSubschema)(this.it,j);(0,o.extendSubschemaData)(z,this.it,j),(0,o.extendSubschemaMode)(z,j);const J={...this.it,...z,items:void 0,props:void 0};return d(J,D),J}mergeEvaluated(j,D){const{it:z,gen:J}=this;z.opts.unevaluated&&(z.props!==!0&&j.props!==void 0&&(z.props=i.mergeEvaluated.props(J,j.props,z.props,D)),z.items!==!0&&j.items!==void 0&&(z.items=i.mergeEvaluated.items(J,j.items,z.items,D)))}mergeValidEvaluated(j,D){const{it:z,gen:J}=this;if(z.opts.unevaluated&&(z.props!==!0||z.items!==!0))return J.if(D,()=>this.mergeEvaluated(j,a.Name)),!0}}ct.KeywordCxt=M;function H(T,j,D,z){const J=new M(T,D,j);"code"in D?D.code(J,z):J.$data&&D.validate?(0,s.funcKeywordCode)(J,D):"macro"in D?(0,s.macroKeywordCode)(J,D):(D.compile||D.validate)&&(0,s.funcKeywordCode)(J,D)}const W=/^\/(?:[^~]|~0|~1)*$/,X=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Y(T,{dataLevel:j,dataNames:D,dataPathArr:z}){let J,Z;if(T==="")return l.default.rootData;if(T[0]==="/"){if(!W.test(T))throw new Error(`Invalid JSON-pointer: ${T}`);J=T,Z=l.default.rootData}else{const se=X.exec(T);if(!se)throw new Error(`Invalid JSON-pointer: ${T}`);const ee=+se[1];if(J=se[2],J==="#"){if(ee>=j)throw new Error(te("property/index",ee));return z[j-ee]}if(ee>j)throw new Error(te("data",ee));if(Z=D[j-ee],!J)return Z}let Q=Z;const ae=J.split("/");for(const se of ae)se&&(Z=(0,a._)`${Z}${(0,a.getProperty)((0,i.unescapeJsonPointer)(se))}`,Q=(0,a._)`${Q} && ${Z}`);return Q;function te(se,ee){return`Cannot access ${se} ${ee} levels up, current level is ${j}`}}return ct.getData=Y,ct}var dn={},Bu;function xo(){if(Bu)return dn;Bu=1,Object.defineProperty(dn,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return dn.default=e,dn}var hn={},Hu;function ps(){if(Hu)return hn;Hu=1,Object.defineProperty(hn,"__esModule",{value:!0});const e=hs();class t extends Error{constructor(n,u,s,o){super(o||`can't resolve reference ${s} from id ${u}`),this.missingRef=(0,e.resolveUrl)(n,u,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return hn.default=t,hn}var Le={},Wu;function Ko(){if(Wu)return Le;Wu=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.resolveSchema=Le.getCompilingSchema=Le.resolveRef=Le.compileSchema=Le.SchemaEnv=void 0;const e=fe(),t=xo(),r=$t(),n=hs(),u=me(),s=ms();class o{constructor(p){var c;this.refs={},this.dynamicAnchors={};let d;typeof p.schema=="object"&&(d=p.schema),this.schema=p.schema,this.schemaId=p.schemaId,this.root=p.root||this,this.baseId=(c=p.baseId)!==null&&c!==void 0?c:(0,n.normalizeId)(d?.[p.schemaId||"$id"]),this.schemaPath=p.schemaPath,this.localRefs=p.localRefs,this.meta=p.meta,this.$async=d?.$async,this.refs={}}}Le.SchemaEnv=o;function a(h){const p=i.call(this,h);if(p)return p;const c=(0,n.getFullPath)(this.opts.uriResolver,h.root.baseId),{es5:d,lines:w}=this.opts.code,{ownProperties:E}=this.opts,_=new e.CodeGen(this.scope,{es5:d,lines:w,ownProperties:E});let R;h.$async&&(R=_.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const N=_.scopeName("validate");h.validateName=N;const C={gen:_,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:_.scopeValue("schema",this.opts.code.source===!0?{ref:h.schema,code:(0,e.stringify)(h.schema)}:{ref:h.schema}),validateName:N,ValidationError:R,schema:h.schema,schemaEnv:h,rootId:c,baseId:h.baseId||c,schemaPath:e.nil,errSchemaPath:h.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let U;try{this._compilations.add(h),(0,s.validateFunctionCode)(C),_.optimize(this.opts.code.optimize);const F=_.toString();U=`${_.scopeRefs(r.default.scope)}return ${F}`,this.opts.code.process&&(U=this.opts.code.process(U,h));const I=new Function(`${r.default.self}`,`${r.default.scope}`,U)(this,this.scope.get());if(this.scope.value(N,{ref:I}),I.errors=null,I.schema=h.schema,I.schemaEnv=h,h.$async&&(I.$async=!0),this.opts.code.source===!0&&(I.source={validateName:N,validateCode:F,scopeValues:_._values}),this.opts.unevaluated){const{props:A,items:V}=C;I.evaluated={props:A instanceof e.Name?void 0:A,items:V instanceof e.Name?void 0:V,dynamicProps:A instanceof e.Name,dynamicItems:V instanceof e.Name},I.source&&(I.source.evaluated=(0,e.stringify)(I.evaluated))}return h.validate=I,h}catch(F){throw delete h.validate,delete h.validateName,U&&this.logger.error("Error compiling schema, function code:",U),F}finally{this._compilations.delete(h)}}Le.compileSchema=a;function l(h,p,c){var d;c=(0,n.resolveUrl)(this.opts.uriResolver,p,c);const w=h.refs[c];if(w)return w;let E=v.call(this,h,c);if(E===void 0){const _=(d=h.localRefs)===null||d===void 0?void 0:d[c],{schemaId:R}=this.opts;_&&(E=new o({schema:_,schemaId:R,root:h,baseId:p}))}if(E!==void 0)return h.refs[c]=f.call(this,E)}Le.resolveRef=l;function f(h){return(0,n.inlineRef)(h.schema,this.opts.inlineRefs)?h.schema:h.validate?h:a.call(this,h)}function i(h){for(const p of this._compilations)if(m(p,h))return p}Le.getCompilingSchema=i;function m(h,p){return h.schema===p.schema&&h.root===p.root&&h.baseId===p.baseId}function v(h,p){let c;for(;typeof(c=this.refs[p])=="string";)p=c;return c||this.schemas[p]||$.call(this,h,p)}function $(h,p){const c=this.opts.uriResolver.parse(p),d=(0,n._getFullPath)(this.opts.uriResolver,c);let w=(0,n.getFullPath)(this.opts.uriResolver,h.baseId,void 0);if(Object.keys(h.schema).length>0&&d===w)return y.call(this,c,h);const E=(0,n.normalizeId)(d),_=this.refs[E]||this.schemas[E];if(typeof _=="string"){const R=$.call(this,h,_);return typeof R?.schema!="object"?void 0:y.call(this,c,R)}if(typeof _?.schema=="object"){if(_.validate||a.call(this,_),E===(0,n.normalizeId)(p)){const{schema:R}=_,{schemaId:N}=this.opts,C=R[N];return C&&(w=(0,n.resolveUrl)(this.opts.uriResolver,w,C)),new o({schema:R,schemaId:N,root:h,baseId:w})}return y.call(this,c,_)}}Le.resolveSchema=$;const S=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(h,{baseId:p,schema:c,root:d}){var w;if(((w=h.fragment)===null||w===void 0?void 0:w[0])!=="/")return;for(const R of h.fragment.slice(1).split("/")){if(typeof c=="boolean")return;const N=c[(0,u.unescapeFragment)(R)];if(N===void 0)return;c=N;const C=typeof c=="object"&&c[this.opts.schemaId];!S.has(R)&&C&&(p=(0,n.resolveUrl)(this.opts.uriResolver,p,C))}let E;if(typeof c!="boolean"&&c.$ref&&!(0,u.schemaHasRulesButRef)(c,this.RULES)){const R=(0,n.resolveUrl)(this.opts.uriResolver,p,c.$ref);E=$.call(this,d,R)}const{schemaId:_}=this.opts;if(E=E||new o({schema:c,schemaId:_,root:d,baseId:p}),E.schema!==E.root.schema)return E}return Le}const Gg="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",xg="Meta-schema for $data reference (JSON AnySchema extension proposal)",Kg="object",Bg=["$data"],Hg={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Wg=!1,Jg={$id:Gg,description:xg,type:Kg,required:Bg,properties:Hg,additionalProperties:Wg};var mn={},Ju;function Xg(){if(Ju)return mn;Ju=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=gd();return e.code='require("ajv/dist/runtime/uri").default',mn.default=e,mn}var Xu;function Yg(){return Xu||(Xu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ms();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=fe();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=xo(),u=ps(),s=Sd(),o=Ko(),a=fe(),l=hs(),f=ns(),i=me(),m=Jg,v=Xg(),$=(q,P)=>new RegExp(q,P);$.code="new RegExp";const S=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),h={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},c=200;function d(q){var P,k,O,g,b,M,H,W,X,Y,T,j,D,z,J,Z,Q,ae,te,se,ee,ve,re,Se,Qe;const Ae=q.strict,et=(P=q.code)===null||P===void 0?void 0:P.optimize,ft=et===!0||et===void 0?1:et||0,nt=(O=(k=q.code)===null||k===void 0?void 0:k.regExp)!==null&&O!==void 0?O:$,_t=(g=q.uriResolver)!==null&&g!==void 0?g:v.default;return{strictSchema:(M=(b=q.strictSchema)!==null&&b!==void 0?b:Ae)!==null&&M!==void 0?M:!0,strictNumbers:(W=(H=q.strictNumbers)!==null&&H!==void 0?H:Ae)!==null&&W!==void 0?W:!0,strictTypes:(Y=(X=q.strictTypes)!==null&&X!==void 0?X:Ae)!==null&&Y!==void 0?Y:"log",strictTuples:(j=(T=q.strictTuples)!==null&&T!==void 0?T:Ae)!==null&&j!==void 0?j:"log",strictRequired:(z=(D=q.strictRequired)!==null&&D!==void 0?D:Ae)!==null&&z!==void 0?z:!1,code:q.code?{...q.code,optimize:ft,regExp:nt}:{optimize:ft,regExp:nt},loopRequired:(J=q.loopRequired)!==null&&J!==void 0?J:c,loopEnum:(Z=q.loopEnum)!==null&&Z!==void 0?Z:c,meta:(Q=q.meta)!==null&&Q!==void 0?Q:!0,messages:(ae=q.messages)!==null&&ae!==void 0?ae:!0,inlineRefs:(te=q.inlineRefs)!==null&&te!==void 0?te:!0,schemaId:(se=q.schemaId)!==null&&se!==void 0?se:"$id",addUsedSchema:(ee=q.addUsedSchema)!==null&&ee!==void 0?ee:!0,validateSchema:(ve=q.validateSchema)!==null&&ve!==void 0?ve:!0,validateFormats:(re=q.validateFormats)!==null&&re!==void 0?re:!0,unicodeRegExp:(Se=q.unicodeRegExp)!==null&&Se!==void 0?Se:!0,int32range:(Qe=q.int32range)!==null&&Qe!==void 0?Qe:!0,uriResolver:_t}}class w{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...d(P)};const{es5:k,lines:O}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:y,es5:k,lines:O}),this.logger=x(P.logger);const g=P.validateFormats;P.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,h,P,"NOT SUPPORTED"),E.call(this,p,P,"DEPRECATED","warn"),this._metaOpts=U.call(this),P.formats&&N.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&C.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),R.call(this),P.validateFormats=g}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:k,schemaId:O}=this.opts;let g=m;O==="id"&&(g={...m},g.id=g.$id,delete g.$id),k&&P&&this.addMetaSchema(g,g[O],!1)}defaultMeta(){const{meta:P,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[k]||P:void 0}validate(P,k){let O;if(typeof P=="string"){if(O=this.getSchema(P),!O)throw new Error(`no schema with key or ref "${P}"`)}else O=this.compile(P);const g=O(k);return"$async"in O||(this.errors=O.errors),g}compile(P,k){const O=this._addSchema(P,k);return O.validate||this._compileSchemaEnv(O)}compileAsync(P,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:O}=this.opts;return g.call(this,P,k);async function g(Y,T){await b.call(this,Y.$schema);const j=this._addSchema(Y,T);return j.validate||M.call(this,j)}async function b(Y){Y&&!this.getSchema(Y)&&await g.call(this,{$ref:Y},!0)}async function M(Y){try{return this._compileSchemaEnv(Y)}catch(T){if(!(T instanceof u.default))throw T;return H.call(this,T),await W.call(this,T.missingSchema),M.call(this,Y)}}function H({missingSchema:Y,missingRef:T}){if(this.refs[Y])throw new Error(`AnySchema ${Y} is loaded but ${T} cannot be resolved`)}async function W(Y){const T=await X.call(this,Y);this.refs[Y]||await b.call(this,T.$schema),this.refs[Y]||this.addSchema(T,Y,k)}async function X(Y){const T=this._loading[Y];if(T)return T;try{return await(this._loading[Y]=O(Y))}finally{delete this._loading[Y]}}}addSchema(P,k,O,g=this.opts.validateSchema){if(Array.isArray(P)){for(const M of P)this.addSchema(M,void 0,O,g);return this}let b;if(typeof P=="object"){const{schemaId:M}=this.opts;if(b=P[M],b!==void 0&&typeof b!="string")throw new Error(`schema ${M} must be string`)}return k=(0,l.normalizeId)(k||b),this._checkUnique(k),this.schemas[k]=this._addSchema(P,O,k,g,!0),this}addMetaSchema(P,k,O=this.opts.validateSchema){return this.addSchema(P,k,!0,O),this}validateSchema(P,k){if(typeof P=="boolean")return!0;let O;if(O=P.$schema,O!==void 0&&typeof O!="string")throw new Error("$schema must be a string");if(O=O||this.opts.defaultMeta||this.defaultMeta(),!O)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const g=this.validate(O,P);if(!g&&k){const b="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(b);else throw new Error(b)}return g}getSchema(P){let k;for(;typeof(k=_.call(this,P))=="string";)P=k;if(k===void 0){const{schemaId:O}=this.opts,g=new o.SchemaEnv({schema:{},schemaId:O});if(k=o.resolveSchema.call(this,g,P),!k)return;this.refs[P]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=_.call(this,P);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const k=P;this._cache.delete(k);let O=P[this.opts.schemaId];return O&&(O=(0,l.normalizeId)(O),delete this.schemas[O],delete this.refs[O]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const k of P)this.addKeyword(k);return this}addKeyword(P,k){let O;if(typeof P=="string")O=P,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=O);else if(typeof P=="object"&&k===void 0){if(k=P,O=k.keyword,Array.isArray(O)&&!O.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(A.call(this,O,k),!k)return(0,i.eachItem)(O,b=>V.call(this,b)),this;K.call(this,k);const g={...k,type:(0,f.getJSONTypes)(k.type),schemaType:(0,f.getJSONTypes)(k.schemaType)};return(0,i.eachItem)(O,g.type.length===0?b=>V.call(this,b,g):b=>g.type.forEach(M=>V.call(this,b,g,M))),this}getKeyword(P){const k=this.RULES.all[P];return typeof k=="object"?k.definition:!!k}removeKeyword(P){const{RULES:k}=this;delete k.keywords[P],delete k.all[P];for(const O of k.rules){const g=O.rules.findIndex(b=>b.keyword===P);g>=0&&O.rules.splice(g,1)}return this}addFormat(P,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[P]=k,this}errorsText(P=this.errors,{separator:k=", ",dataVar:O="data"}={}){return!P||P.length===0?"No errors":P.map(g=>`${O}${g.instancePath} ${g.message}`).reduce((g,b)=>g+k+b)}$dataMetaSchema(P,k){const O=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const g of k){const b=g.split("/").slice(1);let M=P;for(const H of b)M=M[H];for(const H in O){const W=O[H];if(typeof W!="object")continue;const{$data:X}=W.definition,Y=M[H];X&&Y&&(M[H]=G(Y))}}return P}_removeAllSchemas(P,k){for(const O in P){const g=P[O];(!k||k.test(O))&&(typeof g=="string"?delete P[O]:g&&!g.meta&&(this._cache.delete(g.schema),delete P[O]))}}_addSchema(P,k,O,g=this.opts.validateSchema,b=this.opts.addUsedSchema){let M;const{schemaId:H}=this.opts;if(typeof P=="object")M=P[H];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let W=this._cache.get(P);if(W!==void 0)return W;O=(0,l.normalizeId)(M||O);const X=l.getSchemaRefs.call(this,P,O);return W=new o.SchemaEnv({schema:P,schemaId:H,meta:k,baseId:O,localRefs:X}),this._cache.set(W.schema,W),b&&!O.startsWith("#")&&(O&&this._checkUnique(O),this.refs[O]=W),g&&this.validateSchema(P,!0),W}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):o.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const k=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,P)}finally{this.opts=k}}}w.ValidationError=n.default,w.MissingRefError=u.default,e.default=w;function E(q,P,k,O="error"){for(const g in q){const b=g;b in P&&this.logger[O](`${k}: option ${g}. ${q[b]}`)}}function _(q){return q=(0,l.normalizeId)(q),this.schemas[q]||this.refs[q]}function R(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const P in q)this.addSchema(q[P],P)}function N(){for(const q in this.opts.formats){const P=this.opts.formats[q];P&&this.addFormat(q,P)}}function C(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in q){const k=q[P];k.keyword||(k.keyword=P),this.addKeyword(k)}}function U(){const q={...this.opts};for(const P of S)delete q[P];return q}const F={log(){},warn(){},error(){}};function x(q){if(q===!1)return F;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const I=/^[a-z_$][a-z0-9_$:-]*$/i;function A(q,P){const{RULES:k}=this;if((0,i.eachItem)(q,O=>{if(k.keywords[O])throw new Error(`Keyword ${O} is already defined`);if(!I.test(O))throw new Error(`Keyword ${O} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function V(q,P,k){var O;const g=P?.post;if(k&&g)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:b}=this;let M=g?b.post:b.rules.find(({type:W})=>W===k);if(M||(M={type:k,rules:[]},b.rules.push(M)),b.keywords[q]=!0,!P)return;const H={keyword:q,definition:{...P,type:(0,f.getJSONTypes)(P.type),schemaType:(0,f.getJSONTypes)(P.schemaType)}};P.before?L.call(this,M,H,P.before):M.rules.push(H),b.all[q]=H,(O=P.implements)===null||O===void 0||O.forEach(W=>this.addKeyword(W))}function L(q,P,k){const O=q.rules.findIndex(g=>g.keyword===k);O>=0?q.rules.splice(O,0,P):(q.rules.push(P),this.logger.warn(`rule ${k} is not defined`))}function K(q){let{metaSchema:P}=q;P!==void 0&&(q.$data&&this.opts.$data&&(P=G(P)),q.validateSchema=this.compile(P,!0))}const B={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(q){return{anyOf:[q,B]}}}(Ri)),Ri}var pn={},yn={},gn={},Yu;function Zg(){if(Yu)return gn;Yu=1,Object.defineProperty(gn,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return gn.default=e,gn}var gt={},Zu;function Qg(){if(Zu)return gt;Zu=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.callRef=gt.getValidate=void 0;const e=ps(),t=Xe(),r=fe(),n=$t(),u=Ko(),s=me(),o={keyword:"$ref",schemaType:"string",code(f){const{gen:i,schema:m,it:v}=f,{baseId:$,schemaEnv:S,validateName:y,opts:h,self:p}=v,{root:c}=S;if((m==="#"||m==="#/")&&$===c.baseId)return w();const d=u.resolveRef.call(p,c,$,m);if(d===void 0)throw new e.default(v.opts.uriResolver,$,m);if(d instanceof u.SchemaEnv)return E(d);return _(d);function w(){if(S===c)return l(f,y,S,S.$async);const R=i.scopeValue("root",{ref:c});return l(f,(0,r._)`${R}.validate`,c,c.$async)}function E(R){const N=a(f,R);l(f,N,R,R.$async)}function _(R){const N=i.scopeValue("schema",h.code.source===!0?{ref:R,code:(0,r.stringify)(R)}:{ref:R}),C=i.name("valid"),U=f.subschema({schema:R,dataTypes:[],schemaPath:r.nil,topSchemaRef:N,errSchemaPath:m},C);f.mergeEvaluated(U),f.ok(C)}}};function a(f,i){const{gen:m}=f;return i.validate?m.scopeValue("validate",{ref:i.validate}):(0,r._)`${m.scopeValue("wrapper",{ref:i})}.validate`}gt.getValidate=a;function l(f,i,m,v){const{gen:$,it:S}=f,{allErrors:y,schemaEnv:h,opts:p}=S,c=p.passContext?n.default.this:r.nil;v?d():w();function d(){if(!h.$async)throw new Error("async schema referenced by sync schema");const R=$.let("valid");$.try(()=>{$.code((0,r._)`await ${(0,t.callValidateCode)(f,i,c)}`),_(i),y||$.assign(R,!0)},N=>{$.if((0,r._)`!(${N} instanceof ${S.ValidationError})`,()=>$.throw(N)),E(N),y||$.assign(R,!1)}),f.ok(R)}function w(){f.result((0,t.callValidateCode)(f,i,c),()=>_(i),()=>E(i))}function E(R){const N=(0,r._)`${R}.errors`;$.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${N} : ${n.default.vErrors}.concat(${N})`),$.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function _(R){var N;if(!S.opts.unevaluated)return;const C=(N=m?.validate)===null||N===void 0?void 0:N.evaluated;if(S.props!==!0)if(C&&!C.dynamicProps)C.props!==void 0&&(S.props=s.mergeEvaluated.props($,C.props,S.props));else{const U=$.var("props",(0,r._)`${R}.evaluated.props`);S.props=s.mergeEvaluated.props($,U,S.props,r.Name)}if(S.items!==!0)if(C&&!C.dynamicItems)C.items!==void 0&&(S.items=s.mergeEvaluated.items($,C.items,S.items));else{const U=$.var("items",(0,r._)`${R}.evaluated.items`);S.items=s.mergeEvaluated.items($,U,S.items,r.Name)}}}return gt.callRef=l,gt.default=o,gt}var Qu;function ev(){if(Qu)return yn;Qu=1,Object.defineProperty(yn,"__esModule",{value:!0});const e=Zg(),t=Qg(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return yn.default=r,yn}var vn={},$n={},el;function tv(){if(el)return $n;el=1,Object.defineProperty($n,"__esModule",{value:!0});const e=fe(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${r[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${r[s].okStr}, limit: ${o}}`},u={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(s){const{keyword:o,data:a,schemaCode:l}=s;s.fail$data((0,e._)`${a} ${r[o].fail} ${l} || isNaN(${a})`)}};return $n.default=u,$n}var _n={},tl;function rv(){if(tl)return _n;tl=1,Object.defineProperty(_n,"__esModule",{value:!0});const e=fe(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,e._)`{multipleOf: ${n}}`},code(n){const{gen:u,data:s,schemaCode:o,it:a}=n,l=a.opts.multipleOfPrecision,f=u.let("res"),i=l?(0,e._)`Math.abs(Math.round(${f}) - ${f}) > 1e-${l}`:(0,e._)`${f} !== parseInt(${f})`;n.fail$data((0,e._)`(${o} === 0 || (${f} = ${s}/${o}, ${i}))`)}};return _n.default=r,_n}var wn={},En={},rl;function nv(){if(rl)return En;rl=1,Object.defineProperty(En,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,u=0,s;for(;u<r;)n++,s=t.charCodeAt(u++),s>=55296&&s<=56319&&u<r&&(s=t.charCodeAt(u),(s&64512)===56320&&u++);return n}return En.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',En}var nl;function sv(){if(nl)return wn;nl=1,Object.defineProperty(wn,"__esModule",{value:!0});const e=fe(),t=me(),r=nv(),u={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:l,it:f}=s,i=o==="maxLength"?e.operators.GT:e.operators.LT,m=f.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,r.default)}(${a})`;s.fail$data((0,e._)`${m} ${i} ${l}`)}};return wn.default=u,wn}var Sn={},sl;function iv(){if(sl)return Sn;sl=1,Object.defineProperty(Sn,"__esModule",{value:!0});const e=Xe(),t=fe(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:u})=>(0,t.str)`must match pattern "${u}"`,params:({schemaCode:u})=>(0,t._)`{pattern: ${u}}`},code(u){const{data:s,$data:o,schema:a,schemaCode:l,it:f}=u,i=f.opts.unicodeRegExp?"u":"",m=o?(0,t._)`(new RegExp(${l}, ${i}))`:(0,e.usePattern)(u,a);u.fail$data((0,t._)`!${m}.test(${s})`)}};return Sn.default=n,Sn}var bn={},il;function ov(){if(il)return bn;il=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=fe(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:u}){const s=n==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${u} properties`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:u,data:s,schemaCode:o}=n,a=u==="maxProperties"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return bn.default=r,bn}var Rn={},ol;function av(){if(ol)return Rn;ol=1,Object.defineProperty(Rn,"__esModule",{value:!0});const e=Xe(),t=fe(),r=me(),u={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:l,data:f,$data:i,it:m}=s,{opts:v}=m;if(!i&&a.length===0)return;const $=a.length>=v.loopRequired;if(m.allErrors?S():y(),v.strictRequired){const c=s.parentSchema.properties,{definedProperties:d}=s.it;for(const w of a)if(c?.[w]===void 0&&!d.has(w)){const E=m.schemaEnv.baseId+m.errSchemaPath,_=`required property "${w}" is not defined at "${E}" (strictRequired)`;(0,r.checkStrictMode)(m,_,m.opts.strictRequired)}}function S(){if($||i)s.block$data(t.nil,h);else for(const c of a)(0,e.checkReportMissingProp)(s,c)}function y(){const c=o.let("missing");if($||i){const d=o.let("valid",!0);s.block$data(d,()=>p(c,d)),s.ok(d)}else o.if((0,e.checkMissingProp)(s,a,c)),(0,e.reportMissingProp)(s,c),o.else()}function h(){o.forOf("prop",l,c=>{s.setParams({missingProperty:c}),o.if((0,e.noPropertyInData)(o,f,c,v.ownProperties),()=>s.error())})}function p(c,d){s.setParams({missingProperty:c}),o.forOf(c,l,()=>{o.assign(d,(0,e.propertyInData)(o,f,c,v.ownProperties)),o.if((0,t.not)(d),()=>{s.error(),o.break()})},t.nil)}}};return Rn.default=u,Rn}var Pn={},al;function cv(){if(al)return Pn;al=1,Object.defineProperty(Pn,"__esModule",{value:!0});const e=fe(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:u}){const s=n==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${u} items`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:u,data:s,schemaCode:o}=n,a=u==="maxItems"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return Pn.default=r,Pn}var On={},In={},cl;function Bo(){if(cl)return In;cl=1,Object.defineProperty(In,"__esModule",{value:!0});const e=as();return e.code='require("ajv/dist/runtime/equal").default',In.default=e,In}var ul;function uv(){if(ul)return On;ul=1,Object.defineProperty(On,"__esModule",{value:!0});const e=ns(),t=fe(),r=me(),n=Bo(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:l,$data:f,schema:i,parentSchema:m,schemaCode:v,it:$}=o;if(!f&&!i)return;const S=a.let("valid"),y=m.items?(0,e.getSchemaTypes)(m.items):[];o.block$data(S,h,(0,t._)`${v} === false`),o.ok(S);function h(){const w=a.let("i",(0,t._)`${l}.length`),E=a.let("j");o.setParams({i:w,j:E}),a.assign(S,!0),a.if((0,t._)`${w} > 1`,()=>(p()?c:d)(w,E))}function p(){return y.length>0&&!y.some(w=>w==="object"||w==="array")}function c(w,E){const _=a.name("item"),R=(0,e.checkDataTypes)(y,_,$.opts.strictNumbers,e.DataType.Wrong),N=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${w}--;`,()=>{a.let(_,(0,t._)`${l}[${w}]`),a.if(R,(0,t._)`continue`),y.length>1&&a.if((0,t._)`typeof ${_} == "string"`,(0,t._)`${_} += "_"`),a.if((0,t._)`typeof ${N}[${_}] == "number"`,()=>{a.assign(E,(0,t._)`${N}[${_}]`),o.error(),a.assign(S,!1).break()}).code((0,t._)`${N}[${_}] = ${w}`)})}function d(w,E){const _=(0,r.useFunc)(a,n.default),R=a.name("outer");a.label(R).for((0,t._)`;${w}--;`,()=>a.for((0,t._)`${E} = ${w}; ${E}--;`,()=>a.if((0,t._)`${_}(${l}[${w}], ${l}[${E}])`,()=>{o.error(),a.assign(S,!1).break(R)})))}}};return On.default=s,On}var Nn={},ll;function lv(){if(ll)return Nn;ll=1,Object.defineProperty(Nn,"__esModule",{value:!0});const e=fe(),t=me(),r=Bo(),u={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:l,schemaCode:f,schema:i}=s;l||i&&typeof i=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,r.default)}(${a}, ${f})`):s.fail((0,e._)`${i} !== ${a}`)}};return Nn.default=u,Nn}var Tn={},fl;function fv(){if(fl)return Tn;fl=1,Object.defineProperty(Tn,"__esModule",{value:!0});const e=fe(),t=me(),r=Bo(),u={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:l,schema:f,schemaCode:i,it:m}=s;if(!l&&f.length===0)throw new Error("enum must have non-empty array");const v=f.length>=m.opts.loopEnum;let $;const S=()=>$??($=(0,t.useFunc)(o,r.default));let y;if(v||l)y=o.let("valid"),s.block$data(y,h);else{if(!Array.isArray(f))throw new Error("ajv implementation error");const c=o.const("vSchema",i);y=(0,e.or)(...f.map((d,w)=>p(c,w)))}s.pass(y);function h(){o.assign(y,!1),o.forOf("v",i,c=>o.if((0,e._)`${S()}(${a}, ${c})`,()=>o.assign(y,!0).break()))}function p(c,d){const w=f[d];return typeof w=="object"&&w!==null?(0,e._)`${S()}(${a}, ${c}[${d}])`:(0,e._)`${a} === ${w}`}}};return Tn.default=u,Tn}var dl;function dv(){if(dl)return vn;dl=1,Object.defineProperty(vn,"__esModule",{value:!0});const e=tv(),t=rv(),r=sv(),n=iv(),u=ov(),s=av(),o=cv(),a=uv(),l=lv(),f=fv(),i=[e.default,t.default,r.default,n.default,u.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,f.default];return vn.default=i,vn}var An={},qt={},hl;function Rd(){if(hl)return qt;hl=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.validateAdditionalItems=void 0;const e=fe(),t=me(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:l}=o;if(!Array.isArray(l)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}u(s,l)}};function u(s,o){const{gen:a,schema:l,data:f,keyword:i,it:m}=s;m.items=!0;const v=a.const("len",(0,e._)`${f}.length`);if(l===!1)s.setParams({len:o.length}),s.pass((0,e._)`${v} <= ${o.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(m,l)){const S=a.var("valid",(0,e._)`${v} <= ${o.length}`);a.if((0,e.not)(S),()=>$(S)),s.ok(S)}function $(S){a.forRange("i",o.length,v,y=>{s.subschema({keyword:i,dataProp:y,dataPropType:t.Type.Num},S),m.allErrors||a.if((0,e.not)(S),()=>a.break())})}}return qt.validateAdditionalItems=u,qt.default=n,qt}var jn={},Dt={},ml;function Pd(){if(ml)return Dt;ml=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.validateTuple=void 0;const e=fe(),t=me(),r=Xe(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return u(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,r.validateArray)(s))}};function u(s,o,a=s.schema){const{gen:l,parentSchema:f,data:i,keyword:m,it:v}=s;y(f),v.opts.unevaluated&&a.length&&v.items!==!0&&(v.items=t.mergeEvaluated.items(l,a.length,v.items));const $=l.name("valid"),S=l.const("len",(0,e._)`${i}.length`);a.forEach((h,p)=>{(0,t.alwaysValidSchema)(v,h)||(l.if((0,e._)`${S} > ${p}`,()=>s.subschema({keyword:m,schemaProp:p,dataProp:p},$)),s.ok($))});function y(h){const{opts:p,errSchemaPath:c}=v,d=a.length,w=d===h.minItems&&(d===h.maxItems||h[o]===!1);if(p.strictTuples&&!w){const E=`"${m}" is ${d}-tuple, but minItems or maxItems/${o} are not specified or different at path "${c}"`;(0,t.checkStrictMode)(v,E,p.strictTuples)}}}return Dt.validateTuple=u,Dt.default=n,Dt}var pl;function hv(){if(pl)return jn;pl=1,Object.defineProperty(jn,"__esModule",{value:!0});const e=Pd(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return jn.default=t,jn}var Cn={},yl;function mv(){if(yl)return Cn;yl=1,Object.defineProperty(Cn,"__esModule",{value:!0});const e=fe(),t=me(),r=Xe(),n=Rd(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:l,it:f}=o,{prefixItems:i}=l;f.items=!0,!(0,t.alwaysValidSchema)(f,a)&&(i?(0,n.validateAdditionalItems)(o,i):o.ok((0,r.validateArray)(o)))}};return Cn.default=s,Cn}var kn={},gl;function pv(){if(gl)return kn;gl=1,Object.defineProperty(kn,"__esModule",{value:!0});const e=fe(),t=me(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:u,max:s}})=>s===void 0?(0,e.str)`must contain at least ${u} valid item(s)`:(0,e.str)`must contain at least ${u} and no more than ${s} valid item(s)`,params:({params:{min:u,max:s}})=>s===void 0?(0,e._)`{minContains: ${u}}`:(0,e._)`{minContains: ${u}, maxContains: ${s}}`},code(u){const{gen:s,schema:o,parentSchema:a,data:l,it:f}=u;let i,m;const{minContains:v,maxContains:$}=a;f.opts.next?(i=v===void 0?1:v,m=$):i=1;const S=s.const("len",(0,e._)`${l}.length`);if(u.setParams({min:i,max:m}),m===void 0&&i===0){(0,t.checkStrictMode)(f,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(m!==void 0&&i>m){(0,t.checkStrictMode)(f,'"minContains" > "maxContains" is always invalid'),u.fail();return}if((0,t.alwaysValidSchema)(f,o)){let d=(0,e._)`${S} >= ${i}`;m!==void 0&&(d=(0,e._)`${d} && ${S} <= ${m}`),u.pass(d);return}f.items=!0;const y=s.name("valid");m===void 0&&i===1?p(y,()=>s.if(y,()=>s.break())):i===0?(s.let(y,!0),m!==void 0&&s.if((0,e._)`${l}.length > 0`,h)):(s.let(y,!1),h()),u.result(y,()=>u.reset());function h(){const d=s.name("_valid"),w=s.let("count",0);p(d,()=>s.if(d,()=>c(w)))}function p(d,w){s.forRange("i",0,S,E=>{u.subschema({keyword:"contains",dataProp:E,dataPropType:t.Type.Num,compositeRule:!0},d),w()})}function c(d){s.code((0,e._)`${d}++`),m===void 0?s.if((0,e._)`${d} >= ${i}`,()=>s.assign(y,!0).break()):(s.if((0,e._)`${d} > ${m}`,()=>s.assign(y,!1).break()),i===1?s.assign(y,!0):s.if((0,e._)`${d} >= ${i}`,()=>s.assign(y,!0)))}}};return kn.default=n,kn}var Ai={},vl;function yv(){return vl||(vl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=fe(),r=me(),n=Xe();e.error={message:({params:{property:l,depsCount:f,deps:i}})=>{const m=f===1?"property":"properties";return(0,t.str)`must have ${m} ${i} when property ${l} is present`},params:({params:{property:l,depsCount:f,deps:i,missingProperty:m}})=>(0,t._)`{property: ${l},
    missingProperty: ${m},
    depsCount: ${f},
    deps: ${i}}`};const u={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[f,i]=s(l);o(l,f),a(l,i)}};function s({schema:l}){const f={},i={};for(const m in l){if(m==="__proto__")continue;const v=Array.isArray(l[m])?f:i;v[m]=l[m]}return[f,i]}function o(l,f=l.schema){const{gen:i,data:m,it:v}=l;if(Object.keys(f).length===0)return;const $=i.let("missing");for(const S in f){const y=f[S];if(y.length===0)continue;const h=(0,n.propertyInData)(i,m,S,v.opts.ownProperties);l.setParams({property:S,depsCount:y.length,deps:y.join(", ")}),v.allErrors?i.if(h,()=>{for(const p of y)(0,n.checkReportMissingProp)(l,p)}):(i.if((0,t._)`${h} && (${(0,n.checkMissingProp)(l,y,$)})`),(0,n.reportMissingProp)(l,$),i.else())}}e.validatePropertyDeps=o;function a(l,f=l.schema){const{gen:i,data:m,keyword:v,it:$}=l,S=i.name("valid");for(const y in f)(0,r.alwaysValidSchema)($,f[y])||(i.if((0,n.propertyInData)(i,m,y,$.opts.ownProperties),()=>{const h=l.subschema({keyword:v,schemaProp:y},S);l.mergeValidEvaluated(h,S)},()=>i.var(S,!0)),l.ok(S))}e.validateSchemaDeps=a,e.default=u}(Ai)),Ai}var qn={},$l;function gv(){if($l)return qn;$l=1,Object.defineProperty(qn,"__esModule",{value:!0});const e=fe(),t=me(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:u})=>(0,e._)`{propertyName: ${u.propertyName}}`},code(u){const{gen:s,schema:o,data:a,it:l}=u;if((0,t.alwaysValidSchema)(l,o))return;const f=s.name("valid");s.forIn("key",a,i=>{u.setParams({propertyName:i}),u.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},f),s.if((0,e.not)(f),()=>{u.error(!0),l.allErrors||s.break()})}),u.ok(f)}};return qn.default=n,qn}var Dn={},_l;function Od(){if(_l)return Dn;_l=1,Object.defineProperty(Dn,"__esModule",{value:!0});const e=Xe(),t=fe(),r=$t(),n=me(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:l,parentSchema:f,data:i,errsCount:m,it:v}=o;if(!m)throw new Error("ajv implementation error");const{allErrors:$,opts:S}=v;if(v.props=!0,S.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(v,l))return;const y=(0,e.allSchemaProperties)(f.properties),h=(0,e.allSchemaProperties)(f.patternProperties);p(),o.ok((0,t._)`${m} === ${r.default.errors}`);function p(){a.forIn("key",i,_=>{!y.length&&!h.length?w(_):a.if(c(_),()=>w(_))})}function c(_){let R;if(y.length>8){const N=(0,n.schemaRefOrVal)(v,f.properties,"properties");R=(0,e.isOwnProperty)(a,N,_)}else y.length?R=(0,t.or)(...y.map(N=>(0,t._)`${_} === ${N}`)):R=t.nil;return h.length&&(R=(0,t.or)(R,...h.map(N=>(0,t._)`${(0,e.usePattern)(o,N)}.test(${_})`))),(0,t.not)(R)}function d(_){a.code((0,t._)`delete ${i}[${_}]`)}function w(_){if(S.removeAdditional==="all"||S.removeAdditional&&l===!1){d(_);return}if(l===!1){o.setParams({additionalProperty:_}),o.error(),$||a.break();return}if(typeof l=="object"&&!(0,n.alwaysValidSchema)(v,l)){const R=a.name("valid");S.removeAdditional==="failing"?(E(_,R,!1),a.if((0,t.not)(R),()=>{o.reset(),d(_)})):(E(_,R),$||a.if((0,t.not)(R),()=>a.break()))}}function E(_,R,N){const C={keyword:"additionalProperties",dataProp:_,dataPropType:n.Type.Str};N===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(C,R)}}};return Dn.default=s,Dn}var Mn={},wl;function vv(){if(wl)return Mn;wl=1,Object.defineProperty(Mn,"__esModule",{value:!0});const e=ms(),t=Xe(),r=me(),n=Od(),u={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:l,data:f,it:i}=s;i.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(i,n.default,"additionalProperties"));const m=(0,t.allSchemaProperties)(a);for(const h of m)i.definedProperties.add(h);i.opts.unevaluated&&m.length&&i.props!==!0&&(i.props=r.mergeEvaluated.props(o,(0,r.toHash)(m),i.props));const v=m.filter(h=>!(0,r.alwaysValidSchema)(i,a[h]));if(v.length===0)return;const $=o.name("valid");for(const h of v)S(h)?y(h):(o.if((0,t.propertyInData)(o,f,h,i.opts.ownProperties)),y(h),i.allErrors||o.else().var($,!0),o.endIf()),s.it.definedProperties.add(h),s.ok($);function S(h){return i.opts.useDefaults&&!i.compositeRule&&a[h].default!==void 0}function y(h){s.subschema({keyword:"properties",schemaProp:h,dataProp:h},$)}}};return Mn.default=u,Mn}var Ln={},El;function $v(){if(El)return Ln;El=1,Object.defineProperty(Ln,"__esModule",{value:!0});const e=Xe(),t=fe(),r=me(),n=me(),u={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:l,parentSchema:f,it:i}=s,{opts:m}=i,v=(0,e.allSchemaProperties)(a),$=v.filter(w=>(0,r.alwaysValidSchema)(i,a[w]));if(v.length===0||$.length===v.length&&(!i.opts.unevaluated||i.props===!0))return;const S=m.strictSchema&&!m.allowMatchingProperties&&f.properties,y=o.name("valid");i.props!==!0&&!(i.props instanceof t.Name)&&(i.props=(0,n.evaluatedPropsToName)(o,i.props));const{props:h}=i;p();function p(){for(const w of v)S&&c(w),i.allErrors?d(w):(o.var(y,!0),d(w),o.if(y))}function c(w){for(const E in S)new RegExp(w).test(E)&&(0,r.checkStrictMode)(i,`property ${E} matches pattern ${w} (use allowMatchingProperties)`)}function d(w){o.forIn("key",l,E=>{o.if((0,t._)`${(0,e.usePattern)(s,w)}.test(${E})`,()=>{const _=$.includes(w);_||s.subschema({keyword:"patternProperties",schemaProp:w,dataProp:E,dataPropType:n.Type.Str},y),i.opts.unevaluated&&h!==!0?o.assign((0,t._)`${h}[${E}]`,!0):!_&&!i.allErrors&&o.if((0,t.not)(y),()=>o.break())})})}}};return Ln.default=u,Ln}var Fn={},Sl;function _v(){if(Sl)return Fn;Sl=1,Object.defineProperty(Fn,"__esModule",{value:!0});const e=me(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:u,it:s}=r;if((0,e.alwaysValidSchema)(s,u)){r.fail();return}const o=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),r.failResult(o,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return Fn.default=t,Fn}var Vn={},bl;function wv(){if(bl)return Vn;bl=1,Object.defineProperty(Vn,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Xe().validateUnion,error:{message:"must match a schema in anyOf"}};return Vn.default=t,Vn}var Un={},Rl;function Ev(){if(Rl)return Un;Rl=1,Object.defineProperty(Un,"__esModule",{value:!0});const e=fe(),t=me(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:u})=>(0,e._)`{passingSchemas: ${u.passing}}`},code(u){const{gen:s,schema:o,parentSchema:a,it:l}=u;if(!Array.isArray(o))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const f=o,i=s.let("valid",!1),m=s.let("passing",null),v=s.name("_valid");u.setParams({passing:m}),s.block($),u.result(i,()=>u.reset(),()=>u.error(!0));function $(){f.forEach((S,y)=>{let h;(0,t.alwaysValidSchema)(l,S)?s.var(v,!0):h=u.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},v),y>0&&s.if((0,e._)`${v} && ${i}`).assign(i,!1).assign(m,(0,e._)`[${m}, ${y}]`).else(),s.if(v,()=>{s.assign(i,!0),s.assign(m,y),h&&u.mergeEvaluated(h,e.Name)})})}}};return Un.default=n,Un}var zn={},Pl;function Sv(){if(Pl)return zn;Pl=1,Object.defineProperty(zn,"__esModule",{value:!0});const e=me(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:u,it:s}=r;if(!Array.isArray(u))throw new Error("ajv implementation error");const o=n.name("valid");u.forEach((a,l)=>{if((0,e.alwaysValidSchema)(s,a))return;const f=r.subschema({keyword:"allOf",schemaProp:l},o);r.ok(o),r.mergeEvaluated(f)})}};return zn.default=t,zn}var Gn={},Ol;function bv(){if(Ol)return Gn;Ol=1,Object.defineProperty(Gn,"__esModule",{value:!0});const e=fe(),t=me(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const f=u(l,"then"),i=u(l,"else");if(!f&&!i)return;const m=o.let("valid",!0),v=o.name("_valid");if($(),s.reset(),f&&i){const y=o.let("ifClause");s.setParams({ifClause:y}),o.if(v,S("then",y),S("else",y))}else f?o.if(v,S("then")):o.if((0,e.not)(v),S("else"));s.pass(m,()=>s.error(!0));function $(){const y=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);s.mergeEvaluated(y)}function S(y,h){return()=>{const p=s.subschema({keyword:y},v);o.assign(m,v),s.mergeValidEvaluated(p,m),h?o.assign(h,(0,e._)`${y}`):s.setParams({ifClause:y})}}}};function u(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return Gn.default=n,Gn}var xn={},Il;function Rv(){if(Il)return xn;Il=1,Object.defineProperty(xn,"__esModule",{value:!0});const e=me(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:u}){n.if===void 0&&(0,e.checkStrictMode)(u,`"${r}" without "if" is ignored`)}};return xn.default=t,xn}var Nl;function Pv(){if(Nl)return An;Nl=1,Object.defineProperty(An,"__esModule",{value:!0});const e=Rd(),t=hv(),r=Pd(),n=mv(),u=pv(),s=yv(),o=gv(),a=Od(),l=vv(),f=$v(),i=_v(),m=wv(),v=Ev(),$=Sv(),S=bv(),y=Rv();function h(p=!1){const c=[i.default,m.default,v.default,$.default,S.default,y.default,o.default,a.default,s.default,l.default,f.default];return p?c.push(t.default,n.default):c.push(e.default,r.default),c.push(u.default),c}return An.default=h,An}var Kn={},Bn={},Tl;function Ov(){if(Tl)return Bn;Tl=1,Object.defineProperty(Bn,"__esModule",{value:!0});const e=fe(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,e._)`{format: ${n}}`},code(n,u){const{gen:s,data:o,$data:a,schema:l,schemaCode:f,it:i}=n,{opts:m,errSchemaPath:v,schemaEnv:$,self:S}=i;if(!m.validateFormats)return;a?y():h();function y(){const p=s.scopeValue("formats",{ref:S.formats,code:m.code.formats}),c=s.const("fDef",(0,e._)`${p}[${f}]`),d=s.let("fType"),w=s.let("format");s.if((0,e._)`typeof ${c} == "object" && !(${c} instanceof RegExp)`,()=>s.assign(d,(0,e._)`${c}.type || "string"`).assign(w,(0,e._)`${c}.validate`),()=>s.assign(d,(0,e._)`"string"`).assign(w,c)),n.fail$data((0,e.or)(E(),_()));function E(){return m.strictSchema===!1?e.nil:(0,e._)`${f} && !${w}`}function _(){const R=$.$async?(0,e._)`(${c}.async ? await ${w}(${o}) : ${w}(${o}))`:(0,e._)`${w}(${o})`,N=(0,e._)`(typeof ${w} == "function" ? ${R} : ${w}.test(${o}))`;return(0,e._)`${w} && ${w} !== true && ${d} === ${u} && !${N}`}}function h(){const p=S.formats[l];if(!p){E();return}if(p===!0)return;const[c,d,w]=_(p);c===u&&n.pass(R());function E(){if(m.strictSchema===!1){S.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${l}" ignored in schema at path "${v}"`}}function _(N){const C=N instanceof RegExp?(0,e.regexpCode)(N):m.code.formats?(0,e._)`${m.code.formats}${(0,e.getProperty)(l)}`:void 0,U=s.scopeValue("formats",{key:l,ref:N,code:C});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,e._)`${U}.validate`]:["string",N,U]}function R(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!$.$async)throw new Error("async format in sync schema");return(0,e._)`await ${w}(${o})`}return typeof d=="function"?(0,e._)`${w}(${o})`:(0,e._)`${w}.test(${o})`}}}};return Bn.default=r,Bn}var Al;function Iv(){if(Al)return Kn;Al=1,Object.defineProperty(Kn,"__esModule",{value:!0});const t=[Ov().default];return Kn.default=t,Kn}var Pt={},jl;function Nv(){return jl||(jl=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.contentVocabulary=Pt.metadataVocabulary=void 0,Pt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Pt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Pt}var Cl;function Tv(){if(Cl)return pn;Cl=1,Object.defineProperty(pn,"__esModule",{value:!0});const e=ev(),t=dv(),r=Pv(),n=Iv(),u=Nv(),s=[e.default,t.default,(0,r.default)(),n.default,u.metadataVocabulary,u.contentVocabulary];return pn.default=s,pn}var Hn={},Zt={},kl;function Av(){if(kl)return Zt;kl=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(Zt.DiscrError=e={})),Zt}var ql;function jv(){if(ql)return Hn;ql=1,Object.defineProperty(Hn,"__esModule",{value:!0});const e=fe(),t=Av(),r=Ko(),n=ps(),u=me(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:f}})=>(0,e._)`{error: ${a}, tag: ${f}, tagValue: ${l}}`},code(a){const{gen:l,data:f,schema:i,parentSchema:m,it:v}=a,{oneOf:$}=m;if(!v.opts.discriminator)throw new Error("discriminator: requires discriminator option");const S=i.propertyName;if(typeof S!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!$)throw new Error("discriminator: requires oneOf keyword");const y=l.let("valid",!1),h=l.const("tag",(0,e._)`${f}${(0,e.getProperty)(S)}`);l.if((0,e._)`typeof ${h} == "string"`,()=>p(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:h,tagName:S})),a.ok(y);function p(){const w=d();l.if(!1);for(const E in w)l.elseIf((0,e._)`${h} === ${E}`),l.assign(y,c(w[E]));l.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:h,tagName:S}),l.endIf()}function c(w){const E=l.name("valid"),_=a.subschema({keyword:"oneOf",schemaProp:w},E);return a.mergeEvaluated(_,e.Name),E}function d(){var w;const E={},_=N(m);let R=!0;for(let F=0;F<$.length;F++){let x=$[F];if(x?.$ref&&!(0,u.schemaHasRulesButRef)(x,v.self.RULES)){const A=x.$ref;if(x=r.resolveRef.call(v.self,v.schemaEnv.root,v.baseId,A),x instanceof r.SchemaEnv&&(x=x.schema),x===void 0)throw new n.default(v.opts.uriResolver,v.baseId,A)}const I=(w=x?.properties)===null||w===void 0?void 0:w[S];if(typeof I!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${S}"`);R=R&&(_||N(x)),C(I,F)}if(!R)throw new Error(`discriminator: "${S}" must be required`);return E;function N({required:F}){return Array.isArray(F)&&F.includes(S)}function C(F,x){if(F.const)U(F.const,x);else if(F.enum)for(const I of F.enum)U(I,x);else throw new Error(`discriminator: "properties/${S}" must have "const" or "enum"`)}function U(F,x){if(typeof F!="string"||F in E)throw new Error(`discriminator: "${S}" values must be unique strings`);E[F]=x}}}};return Hn.default=o,Hn}const Cv="http://json-schema.org/draft-07/schema#",kv="http://json-schema.org/draft-07/schema#",qv="Core schema meta-schema",Dv={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Mv=["object","boolean"],Lv={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Fv={$schema:Cv,$id:kv,title:qv,definitions:Dv,type:Mv,properties:Lv,default:!0};var Dl;function Vv(){return Dl||(Dl=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Yg(),n=Tv(),u=jv(),s=Fv,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(S=>this.addVocabulary(S)),this.opts.discriminator&&this.addKeyword(u.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const S=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(S,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var f=ms();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var i=fe();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});var m=xo();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return m.default}});var v=ps();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return v.default}})}(ln,ln.exports)),ln.exports}var Ml;function Uv(){return Ml||(Ml=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Vv(),r=fe(),n=r.operators,u={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},s={message:({keyword:a,schemaCode:l})=>(0,r.str)`should be ${u[a].okStr} ${l}`,params:({keyword:a,schemaCode:l})=>(0,r._)`{comparison: ${u[a].okStr}, limit: ${l}}`};e.formatLimitDefinition={keyword:Object.keys(u),type:"string",schemaType:"string",$data:!0,error:s,code(a){const{gen:l,data:f,schemaCode:i,keyword:m,it:v}=a,{opts:$,self:S}=v;if(!$.validateFormats)return;const y=new t.KeywordCxt(v,S.RULES.all.format.definition,"format");y.$data?h():p();function h(){const d=l.scopeValue("formats",{ref:S.formats,code:$.code.formats}),w=l.const("fmt",(0,r._)`${d}[${y.schemaCode}]`);a.fail$data((0,r.or)((0,r._)`typeof ${w} != "object"`,(0,r._)`${w} instanceof RegExp`,(0,r._)`typeof ${w}.compare != "function"`,c(w)))}function p(){const d=y.schema,w=S.formats[d];if(!w||w===!0)return;if(typeof w!="object"||w instanceof RegExp||typeof w.compare!="function")throw new Error(`"${m}": format "${d}" does not define "compare" function`);const E=l.scopeValue("formats",{key:d,ref:w,code:$.code.formats?(0,r._)`${$.code.formats}${(0,r.getProperty)(d)}`:void 0});a.fail$data(c(E))}function c(d){return(0,r._)`${d}.compare(${f}, ${i}) ${u[m].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(e.formatLimitDefinition),a);e.default=o}(bi)),bi}var Ll;function zv(){return Ll||(Ll=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Mg(),n=Uv(),u=fe(),s=new u.Name("fullFormats"),o=new u.Name("fastFormats"),a=(f,i={keywords:!0})=>{if(Array.isArray(i))return l(f,i,r.fullFormats,s),f;const[m,v]=i.mode==="fast"?[r.fastFormats,o]:[r.fullFormats,s],$=i.formats||r.formatNames;return l(f,$,m,v),i.keywords&&(0,n.default)(f),f};a.get=(f,i="full")=>{const v=(i==="fast"?r.fastFormats:r.fullFormats)[f];if(!v)throw new Error(`Unknown format "${f}"`);return v};function l(f,i,m,v){var $,S;($=(S=f.opts.code).formats)!==null&&$!==void 0||(S.formats=(0,u._)`require("ajv-formats/dist/formats").${v}`);for(const y of i)f.addFormat(y,m[y])}e.exports=t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}(un,un.exports)),un.exports}var Gv=zv();const xv=jo(Gv),Kv=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;const u=Object.getOwnPropertyDescriptor(e,r),s=Object.getOwnPropertyDescriptor(t,r);!Bv(u,s)&&n||Object.defineProperty(e,r,s)},Bv=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Hv=(e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},Wv=(e,t)=>`/* Wrapped ${e}*/
${t}`,Jv=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Xv=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Yv=(e,t,r)=>{const n=r===""?"":`with ${r.trim()}() `,u=Wv.bind(null,n,t.toString());Object.defineProperty(u,"name",Xv);const{writable:s,enumerable:o,configurable:a}=Jv;Object.defineProperty(e,"toString",{value:u,writable:s,enumerable:o,configurable:a})};function Zv(e,t,{ignoreNonConfigurable:r=!1}={}){const{name:n}=e;for(const u of Reflect.ownKeys(t))Kv(e,t,u,r);return Hv(e,t),Yv(e,t,n),e}const Fl=(e,t={})=>{if(typeof e!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:r=0,maxWait:n=Number.POSITIVE_INFINITY,before:u=!1,after:s=!0}=t;if(r<0||n<0)throw new RangeError("`wait` and `maxWait` must not be negative.");if(!u&&!s)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let o,a,l;const f=function(...i){const m=this,v=()=>{o=void 0,a&&(clearTimeout(a),a=void 0),s&&(l=e.apply(m,i))},$=()=>{a=void 0,o&&(clearTimeout(o),o=void 0),s&&(l=e.apply(m,i))},S=u&&!o;return clearTimeout(o),o=setTimeout(v,r),n>0&&n!==Number.POSITIVE_INFINITY&&!a&&(a=setTimeout($,n)),S&&(l=e.apply(m,i)),l};return Zv(f,e),f.cancel=()=>{o&&(clearTimeout(o),o=void 0),a&&(clearTimeout(a),a=void 0)},f};var Wn={exports:{}},ji,Vl;function ys(){if(Vl)return ji;Vl=1;const e="2.0.0",t=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,u=t-6;return ji={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:u,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ji}var Ci,Ul;function gs(){return Ul||(Ul=1,Ci=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),Ci}var zl;function ir(){return zl||(zl=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:u}=ys(),s=gs();t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],f=t.safeSrc=[],i=t.t={};let m=0;const v="[a-zA-Z0-9-]",$=[["\\s",1],["\\d",u],[v,n]],S=h=>{for(const[p,c]of $)h=h.split(`${p}*`).join(`${p}{0,${c}}`).split(`${p}+`).join(`${p}{1,${c}}`);return h},y=(h,p,c)=>{const d=S(p),w=m++;s(h,w,p),i[h]=w,l[w]=p,f[w]=d,o[w]=new RegExp(p,c?"g":void 0),a[w]=new RegExp(d,c?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),y("MAINVERSION",`(${l[i.NUMERICIDENTIFIER]})\\.(${l[i.NUMERICIDENTIFIER]})\\.(${l[i.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${l[i.NUMERICIDENTIFIERLOOSE]})\\.(${l[i.NUMERICIDENTIFIERLOOSE]})\\.(${l[i.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${l[i.NONNUMERICIDENTIFIER]}|${l[i.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${l[i.NONNUMERICIDENTIFIER]}|${l[i.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${l[i.PRERELEASEIDENTIFIER]}(?:\\.${l[i.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${l[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[i.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${v}+`),y("BUILD",`(?:\\+(${l[i.BUILDIDENTIFIER]}(?:\\.${l[i.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${l[i.MAINVERSION]}${l[i.PRERELEASE]}?${l[i.BUILD]}?`),y("FULL",`^${l[i.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${l[i.MAINVERSIONLOOSE]}${l[i.PRERELEASELOOSE]}?${l[i.BUILD]}?`),y("LOOSE",`^${l[i.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${l[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${l[i.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${l[i.XRANGEIDENTIFIER]})(?:\\.(${l[i.XRANGEIDENTIFIER]})(?:\\.(${l[i.XRANGEIDENTIFIER]})(?:${l[i.PRERELEASE]})?${l[i.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${l[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[i.XRANGEIDENTIFIERLOOSE]})(?:${l[i.PRERELEASELOOSE]})?${l[i.BUILD]}?)?)?`),y("XRANGE",`^${l[i.GTLT]}\\s*${l[i.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${l[i.GTLT]}\\s*${l[i.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),y("COERCE",`${l[i.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",l[i.COERCEPLAIN]+`(?:${l[i.PRERELEASE]})?(?:${l[i.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",l[i.COERCE],!0),y("COERCERTLFULL",l[i.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${l[i.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${l[i.LONETILDE]}${l[i.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${l[i.LONETILDE]}${l[i.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${l[i.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${l[i.LONECARET]}${l[i.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${l[i.LONECARET]}${l[i.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${l[i.GTLT]}\\s*(${l[i.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${l[i.GTLT]}\\s*(${l[i.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${l[i.GTLT]}\\s*(${l[i.LOOSEPLAIN]}|${l[i.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${l[i.XRANGEPLAIN]})\\s+-\\s+(${l[i.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${l[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[i.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Wn,Wn.exports)),Wn.exports}var ki,Gl;function Ho(){if(Gl)return ki;Gl=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return ki=n=>n?typeof n!="object"?e:n:t,ki}var qi,xl;function Id(){if(xl)return qi;xl=1;const e=/^[0-9]+$/,t=(n,u)=>{const s=e.test(n),o=e.test(u);return s&&o&&(n=+n,u=+u),n===u?0:s&&!o?-1:o&&!s?1:n<u?-1:1};return qi={compareIdentifiers:t,rcompareIdentifiers:(n,u)=>t(u,n)},qi}var Di,Kl;function ke(){if(Kl)return Di;Kl=1;const e=gs(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=ys(),{safeRe:n,t:u}=ir(),s=Ho(),{compareIdentifiers:o}=Id();class a{constructor(f,i){if(i=s(i),f instanceof a){if(f.loose===!!i.loose&&f.includePrerelease===!!i.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const m=f.trim().match(i.loose?n[u.LOOSE]:n[u.FULL]);if(!m)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(v=>{if(/^[0-9]+$/.test(v)){const $=+v;if($>=0&&$<r)return $}return v}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof a)){if(typeof f=="string"&&f===this.version)return 0;f=new a(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof a||(f=new a(f,this.options)),o(this.major,f.major)||o(this.minor,f.minor)||o(this.patch,f.patch)}comparePre(f){if(f instanceof a||(f=new a(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let i=0;do{const m=this.prerelease[i],v=f.prerelease[i];if(e("prerelease compare",i,m,v),m===void 0&&v===void 0)return 0;if(v===void 0)return 1;if(m===void 0)return-1;if(m===v)continue;return o(m,v)}while(++i)}compareBuild(f){f instanceof a||(f=new a(f,this.options));let i=0;do{const m=this.build[i],v=f.build[i];if(e("build compare",i,m,v),m===void 0&&v===void 0)return 0;if(v===void 0)return 1;if(m===void 0)return-1;if(m===v)continue;return o(m,v)}while(++i)}inc(f,i,m){if(f.startsWith("pre")){if(!i&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(i){const v=`-${i}`.match(this.options.loose?n[u.PRERELEASELOOSE]:n[u.PRERELEASE]);if(!v||v[1]!==i)throw new Error(`invalid identifier: ${i}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,m),this.inc("pre",i,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,m),this.inc("pre",i,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const v=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[v];else{let $=this.prerelease.length;for(;--$>=0;)typeof this.prerelease[$]=="number"&&(this.prerelease[$]++,$=-2);if($===-1){if(i===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(v)}}if(i){let $=[i,v];m===!1&&($=[i]),o(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=$):this.prerelease=$}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Di=a,Di}var Mi,Bl;function Gt(){if(Bl)return Mi;Bl=1;const e=ke();return Mi=(r,n,u=!1)=>{if(r instanceof e)return r;try{return new e(r,n)}catch(s){if(!u)return null;throw s}},Mi}var Li,Hl;function Qv(){if(Hl)return Li;Hl=1;const e=Gt();return Li=(r,n)=>{const u=e(r,n);return u?u.version:null},Li}var Fi,Wl;function e$(){if(Wl)return Fi;Wl=1;const e=Gt();return Fi=(r,n)=>{const u=e(r.trim().replace(/^[=v]+/,""),n);return u?u.version:null},Fi}var Vi,Jl;function t$(){if(Jl)return Vi;Jl=1;const e=ke();return Vi=(r,n,u,s,o)=>{typeof u=="string"&&(o=s,s=u,u=void 0);try{return new e(r instanceof e?r.version:r,u).inc(n,s,o).version}catch{return null}},Vi}var Ui,Xl;function r$(){if(Xl)return Ui;Xl=1;const e=Gt();return Ui=(r,n)=>{const u=e(r,null,!0),s=e(n,null,!0),o=u.compare(s);if(o===0)return null;const a=o>0,l=a?u:s,f=a?s:u,i=!!l.prerelease.length;if(!!f.prerelease.length&&!i){if(!f.patch&&!f.minor)return"major";if(f.compareMain(l)===0)return f.minor&&!f.patch?"minor":"patch"}const v=i?"pre":"";return u.major!==s.major?v+"major":u.minor!==s.minor?v+"minor":u.patch!==s.patch?v+"patch":"prerelease"},Ui}var zi,Yl;function n$(){if(Yl)return zi;Yl=1;const e=ke();return zi=(r,n)=>new e(r,n).major,zi}var Gi,Zl;function s$(){if(Zl)return Gi;Zl=1;const e=ke();return Gi=(r,n)=>new e(r,n).minor,Gi}var xi,Ql;function i$(){if(Ql)return xi;Ql=1;const e=ke();return xi=(r,n)=>new e(r,n).patch,xi}var Ki,ef;function o$(){if(ef)return Ki;ef=1;const e=Gt();return Ki=(r,n)=>{const u=e(r,n);return u&&u.prerelease.length?u.prerelease:null},Ki}var Bi,tf;function Ye(){if(tf)return Bi;tf=1;const e=ke();return Bi=(r,n,u)=>new e(r,u).compare(new e(n,u)),Bi}var Hi,rf;function a$(){if(rf)return Hi;rf=1;const e=Ye();return Hi=(r,n,u)=>e(n,r,u),Hi}var Wi,nf;function c$(){if(nf)return Wi;nf=1;const e=Ye();return Wi=(r,n)=>e(r,n,!0),Wi}var Ji,sf;function Wo(){if(sf)return Ji;sf=1;const e=ke();return Ji=(r,n,u)=>{const s=new e(r,u),o=new e(n,u);return s.compare(o)||s.compareBuild(o)},Ji}var Xi,of;function u$(){if(of)return Xi;of=1;const e=Wo();return Xi=(r,n)=>r.sort((u,s)=>e(u,s,n)),Xi}var Yi,af;function l$(){if(af)return Yi;af=1;const e=Wo();return Yi=(r,n)=>r.sort((u,s)=>e(s,u,n)),Yi}var Zi,cf;function vs(){if(cf)return Zi;cf=1;const e=Ye();return Zi=(r,n,u)=>e(r,n,u)>0,Zi}var Qi,uf;function Jo(){if(uf)return Qi;uf=1;const e=Ye();return Qi=(r,n,u)=>e(r,n,u)<0,Qi}var eo,lf;function Nd(){if(lf)return eo;lf=1;const e=Ye();return eo=(r,n,u)=>e(r,n,u)===0,eo}var to,ff;function Td(){if(ff)return to;ff=1;const e=Ye();return to=(r,n,u)=>e(r,n,u)!==0,to}var ro,df;function Xo(){if(df)return ro;df=1;const e=Ye();return ro=(r,n,u)=>e(r,n,u)>=0,ro}var no,hf;function Yo(){if(hf)return no;hf=1;const e=Ye();return no=(r,n,u)=>e(r,n,u)<=0,no}var so,mf;function Ad(){if(mf)return so;mf=1;const e=Nd(),t=Td(),r=vs(),n=Xo(),u=Jo(),s=Yo();return so=(a,l,f,i)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof f=="object"&&(f=f.version),a===f;case"!==":return typeof a=="object"&&(a=a.version),typeof f=="object"&&(f=f.version),a!==f;case"":case"=":case"==":return e(a,f,i);case"!=":return t(a,f,i);case">":return r(a,f,i);case">=":return n(a,f,i);case"<":return u(a,f,i);case"<=":return s(a,f,i);default:throw new TypeError(`Invalid operator: ${l}`)}},so}var io,pf;function f$(){if(pf)return io;pf=1;const e=ke(),t=Gt(),{safeRe:r,t:n}=ir();return io=(s,o)=>{if(s instanceof e)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let a=null;if(!o.rtl)a=s.match(o.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const $=o.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let S;for(;(S=$.exec(s))&&(!a||a.index+a[0].length!==s.length);)(!a||S.index+S[0].length!==a.index+a[0].length)&&(a=S),$.lastIndex=S.index+S[1].length+S[2].length;$.lastIndex=-1}if(a===null)return null;const l=a[2],f=a[3]||"0",i=a[4]||"0",m=o.includePrerelease&&a[5]?`-${a[5]}`:"",v=o.includePrerelease&&a[6]?`+${a[6]}`:"";return t(`${l}.${f}.${i}${m}${v}`,o)},io}var oo,yf;function d$(){if(yf)return oo;yf=1;class e{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(r,n)}return this}}return oo=e,oo}var ao,gf;function Ze(){if(gf)return ao;gf=1;const e=/\s+/g;class t{constructor(V,L){if(L=u(L),V instanceof t)return V.loose===!!L.loose&&V.includePrerelease===!!L.includePrerelease?V:new t(V.raw,L);if(V instanceof s)return this.raw=V.value,this.set=[[V]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=V.trim().replace(e," "),this.set=this.raw.split("||").map(K=>this.parseRange(K.trim())).filter(K=>K.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const K=this.set[0];if(this.set=this.set.filter(B=>!y(B[0])),this.set.length===0)this.set=[K];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&h(B[0])){this.set=[B];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let V=0;V<this.set.length;V++){V>0&&(this.formatted+="||");const L=this.set[V];for(let K=0;K<L.length;K++)K>0&&(this.formatted+=" "),this.formatted+=L[K].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(V){const K=((this.options.includePrerelease&&$)|(this.options.loose&&S))+":"+V,B=n.get(K);if(B)return B;const G=this.options.loose,q=G?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];V=V.replace(q,x(this.options.includePrerelease)),o("hyphen replace",V),V=V.replace(l[f.COMPARATORTRIM],i),o("comparator trim",V),V=V.replace(l[f.TILDETRIM],m),o("tilde trim",V),V=V.replace(l[f.CARETTRIM],v),o("caret trim",V);let P=V.split(" ").map(b=>c(b,this.options)).join(" ").split(/\s+/).map(b=>F(b,this.options));G&&(P=P.filter(b=>(o("loose invalid filter",b,this.options),!!b.match(l[f.COMPARATORLOOSE])))),o("range list",P);const k=new Map,O=P.map(b=>new s(b,this.options));for(const b of O){if(y(b))return[b];k.set(b.value,b)}k.size>1&&k.has("")&&k.delete("");const g=[...k.values()];return n.set(K,g),g}intersects(V,L){if(!(V instanceof t))throw new TypeError("a Range is required");return this.set.some(K=>p(K,L)&&V.set.some(B=>p(B,L)&&K.every(G=>B.every(q=>G.intersects(q,L)))))}test(V){if(!V)return!1;if(typeof V=="string")try{V=new a(V,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(I(this.set[L],V,this.options))return!0;return!1}}ao=t;const r=d$(),n=new r,u=Ho(),s=$s(),o=gs(),a=ke(),{safeRe:l,t:f,comparatorTrimReplace:i,tildeTrimReplace:m,caretTrimReplace:v}=ir(),{FLAG_INCLUDE_PRERELEASE:$,FLAG_LOOSE:S}=ys(),y=A=>A.value==="<0.0.0-0",h=A=>A.value==="",p=(A,V)=>{let L=!0;const K=A.slice();let B=K.pop();for(;L&&K.length;)L=K.every(G=>B.intersects(G,V)),B=K.pop();return L},c=(A,V)=>(o("comp",A,V),A=_(A,V),o("caret",A),A=w(A,V),o("tildes",A),A=N(A,V),o("xrange",A),A=U(A,V),o("stars",A),A),d=A=>!A||A.toLowerCase()==="x"||A==="*",w=(A,V)=>A.trim().split(/\s+/).map(L=>E(L,V)).join(" "),E=(A,V)=>{const L=V.loose?l[f.TILDELOOSE]:l[f.TILDE];return A.replace(L,(K,B,G,q,P)=>{o("tilde",A,K,B,G,q,P);let k;return d(B)?k="":d(G)?k=`>=${B}.0.0 <${+B+1}.0.0-0`:d(q)?k=`>=${B}.${G}.0 <${B}.${+G+1}.0-0`:P?(o("replaceTilde pr",P),k=`>=${B}.${G}.${q}-${P} <${B}.${+G+1}.0-0`):k=`>=${B}.${G}.${q} <${B}.${+G+1}.0-0`,o("tilde return",k),k})},_=(A,V)=>A.trim().split(/\s+/).map(L=>R(L,V)).join(" "),R=(A,V)=>{o("caret",A,V);const L=V.loose?l[f.CARETLOOSE]:l[f.CARET],K=V.includePrerelease?"-0":"";return A.replace(L,(B,G,q,P,k)=>{o("caret",A,B,G,q,P,k);let O;return d(G)?O="":d(q)?O=`>=${G}.0.0${K} <${+G+1}.0.0-0`:d(P)?G==="0"?O=`>=${G}.${q}.0${K} <${G}.${+q+1}.0-0`:O=`>=${G}.${q}.0${K} <${+G+1}.0.0-0`:k?(o("replaceCaret pr",k),G==="0"?q==="0"?O=`>=${G}.${q}.${P}-${k} <${G}.${q}.${+P+1}-0`:O=`>=${G}.${q}.${P}-${k} <${G}.${+q+1}.0-0`:O=`>=${G}.${q}.${P}-${k} <${+G+1}.0.0-0`):(o("no pr"),G==="0"?q==="0"?O=`>=${G}.${q}.${P}${K} <${G}.${q}.${+P+1}-0`:O=`>=${G}.${q}.${P}${K} <${G}.${+q+1}.0-0`:O=`>=${G}.${q}.${P} <${+G+1}.0.0-0`),o("caret return",O),O})},N=(A,V)=>(o("replaceXRanges",A,V),A.split(/\s+/).map(L=>C(L,V)).join(" ")),C=(A,V)=>{A=A.trim();const L=V.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return A.replace(L,(K,B,G,q,P,k)=>{o("xRange",A,K,B,G,q,P,k);const O=d(G),g=O||d(q),b=g||d(P),M=b;return B==="="&&M&&(B=""),k=V.includePrerelease?"-0":"",O?B===">"||B==="<"?K="<0.0.0-0":K="*":B&&M?(g&&(q=0),P=0,B===">"?(B=">=",g?(G=+G+1,q=0,P=0):(q=+q+1,P=0)):B==="<="&&(B="<",g?G=+G+1:q=+q+1),B==="<"&&(k="-0"),K=`${B+G}.${q}.${P}${k}`):g?K=`>=${G}.0.0${k} <${+G+1}.0.0-0`:b&&(K=`>=${G}.${q}.0${k} <${G}.${+q+1}.0-0`),o("xRange return",K),K})},U=(A,V)=>(o("replaceStars",A,V),A.trim().replace(l[f.STAR],"")),F=(A,V)=>(o("replaceGTE0",A,V),A.trim().replace(l[V.includePrerelease?f.GTE0PRE:f.GTE0],"")),x=A=>(V,L,K,B,G,q,P,k,O,g,b,M)=>(d(K)?L="":d(B)?L=`>=${K}.0.0${A?"-0":""}`:d(G)?L=`>=${K}.${B}.0${A?"-0":""}`:q?L=`>=${L}`:L=`>=${L}${A?"-0":""}`,d(O)?k="":d(g)?k=`<${+O+1}.0.0-0`:d(b)?k=`<${O}.${+g+1}.0-0`:M?k=`<=${O}.${g}.${b}-${M}`:A?k=`<${O}.${g}.${+b+1}-0`:k=`<=${k}`,`${L} ${k}`.trim()),I=(A,V,L)=>{for(let K=0;K<A.length;K++)if(!A[K].test(V))return!1;if(V.prerelease.length&&!L.includePrerelease){for(let K=0;K<A.length;K++)if(o(A[K].semver),A[K].semver!==s.ANY&&A[K].semver.prerelease.length>0){const B=A[K].semver;if(B.major===V.major&&B.minor===V.minor&&B.patch===V.patch)return!0}return!1}return!0};return ao}var co,vf;function $s(){if(vf)return co;vf=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(i,m){if(m=r(m),i instanceof t){if(i.loose===!!m.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),o("comparator",i,m),this.options=m,this.loose=!!m.loose,this.parse(i),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(i){const m=this.options.loose?n[u.COMPARATORLOOSE]:n[u.COMPARATOR],v=i.match(m);if(!v)throw new TypeError(`Invalid comparator: ${i}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new a(v[2],this.options.loose):this.semver=e}toString(){return this.value}test(i){if(o("Comparator.test",i,this.options.loose),this.semver===e||i===e)return!0;if(typeof i=="string")try{i=new a(i,this.options)}catch{return!1}return s(i,this.operator,this.semver,this.options)}intersects(i,m){if(!(i instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(i.value,m).test(this.value):i.operator===""?i.value===""?!0:new l(this.value,m).test(i.semver):(m=r(m),m.includePrerelease&&(this.value==="<0.0.0-0"||i.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||i.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&i.operator.startsWith(">")||this.operator.startsWith("<")&&i.operator.startsWith("<")||this.semver.version===i.semver.version&&this.operator.includes("=")&&i.operator.includes("=")||s(this.semver,"<",i.semver,m)&&this.operator.startsWith(">")&&i.operator.startsWith("<")||s(this.semver,">",i.semver,m)&&this.operator.startsWith("<")&&i.operator.startsWith(">")))}}co=t;const r=Ho(),{safeRe:n,t:u}=ir(),s=Ad(),o=gs(),a=ke(),l=Ze();return co}var uo,$f;function _s(){if($f)return uo;$f=1;const e=Ze();return uo=(r,n,u)=>{try{n=new e(n,u)}catch{return!1}return n.test(r)},uo}var lo,_f;function h$(){if(_f)return lo;_f=1;const e=Ze();return lo=(r,n)=>new e(r,n).set.map(u=>u.map(s=>s.value).join(" ").trim().split(" ")),lo}var fo,wf;function m$(){if(wf)return fo;wf=1;const e=ke(),t=Ze();return fo=(n,u,s)=>{let o=null,a=null,l=null;try{l=new t(u,s)}catch{return null}return n.forEach(f=>{l.test(f)&&(!o||a.compare(f)===-1)&&(o=f,a=new e(o,s))}),o},fo}var ho,Ef;function p$(){if(Ef)return ho;Ef=1;const e=ke(),t=Ze();return ho=(n,u,s)=>{let o=null,a=null,l=null;try{l=new t(u,s)}catch{return null}return n.forEach(f=>{l.test(f)&&(!o||a.compare(f)===1)&&(o=f,a=new e(o,s))}),o},ho}var mo,Sf;function y$(){if(Sf)return mo;Sf=1;const e=ke(),t=Ze(),r=vs();return mo=(u,s)=>{u=new t(u,s);let o=new e("0.0.0");if(u.test(o)||(o=new e("0.0.0-0"),u.test(o)))return o;o=null;for(let a=0;a<u.set.length;++a){const l=u.set[a];let f=null;l.forEach(i=>{const m=new e(i.semver.version);switch(i.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!f||r(m,f))&&(f=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),f&&(!o||r(o,f))&&(o=f)}return o&&u.test(o)?o:null},mo}var po,bf;function g$(){if(bf)return po;bf=1;const e=Ze();return po=(r,n)=>{try{return new e(r,n).range||"*"}catch{return null}},po}var yo,Rf;function Zo(){if(Rf)return yo;Rf=1;const e=ke(),t=$s(),{ANY:r}=t,n=Ze(),u=_s(),s=vs(),o=Jo(),a=Yo(),l=Xo();return yo=(i,m,v,$)=>{i=new e(i,$),m=new n(m,$);let S,y,h,p,c;switch(v){case">":S=s,y=a,h=o,p=">",c=">=";break;case"<":S=o,y=l,h=s,p="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(i,m,$))return!1;for(let d=0;d<m.set.length;++d){const w=m.set[d];let E=null,_=null;if(w.forEach(R=>{R.semver===r&&(R=new t(">=0.0.0")),E=E||R,_=_||R,S(R.semver,E.semver,$)?E=R:h(R.semver,_.semver,$)&&(_=R)}),E.operator===p||E.operator===c||(!_.operator||_.operator===p)&&y(i,_.semver))return!1;if(_.operator===c&&h(i,_.semver))return!1}return!0},yo}var go,Pf;function v$(){if(Pf)return go;Pf=1;const e=Zo();return go=(r,n,u)=>e(r,n,">",u),go}var vo,Of;function $$(){if(Of)return vo;Of=1;const e=Zo();return vo=(r,n,u)=>e(r,n,"<",u),vo}var $o,If;function _$(){if(If)return $o;If=1;const e=Ze();return $o=(r,n,u)=>(r=new e(r,u),n=new e(n,u),r.intersects(n,u)),$o}var _o,Nf;function w$(){if(Nf)return _o;Nf=1;const e=_s(),t=Ye();return _o=(r,n,u)=>{const s=[];let o=null,a=null;const l=r.sort((v,$)=>t(v,$,u));for(const v of l)e(v,n,u)?(a=v,o||(o=v)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const f=[];for(const[v,$]of s)v===$?f.push(v):!$&&v===l[0]?f.push("*"):$?v===l[0]?f.push(`<=${$}`):f.push(`${v} - ${$}`):f.push(`>=${v}`);const i=f.join(" || "),m=typeof n.raw=="string"?n.raw:String(n);return i.length<m.length?i:n},_o}var wo,Tf;function E$(){if(Tf)return wo;Tf=1;const e=Ze(),t=$s(),{ANY:r}=t,n=_s(),u=Ye(),s=(m,v,$={})=>{if(m===v)return!0;m=new e(m,$),v=new e(v,$);let S=!1;e:for(const y of m.set){for(const h of v.set){const p=l(y,h,$);if(S=S||p!==null,p)continue e}if(S)return!1}return!0},o=[new t(">=0.0.0-0")],a=[new t(">=0.0.0")],l=(m,v,$)=>{if(m===v)return!0;if(m.length===1&&m[0].semver===r){if(v.length===1&&v[0].semver===r)return!0;$.includePrerelease?m=o:m=a}if(v.length===1&&v[0].semver===r){if($.includePrerelease)return!0;v=a}const S=new Set;let y,h;for(const N of m)N.operator===">"||N.operator===">="?y=f(y,N,$):N.operator==="<"||N.operator==="<="?h=i(h,N,$):S.add(N.semver);if(S.size>1)return null;let p;if(y&&h){if(p=u(y.semver,h.semver,$),p>0)return null;if(p===0&&(y.operator!==">="||h.operator!=="<="))return null}for(const N of S){if(y&&!n(N,String(y),$)||h&&!n(N,String(h),$))return null;for(const C of v)if(!n(N,String(C),$))return!1;return!0}let c,d,w,E,_=h&&!$.includePrerelease&&h.semver.prerelease.length?h.semver:!1,R=y&&!$.includePrerelease&&y.semver.prerelease.length?y.semver:!1;_&&_.prerelease.length===1&&h.operator==="<"&&_.prerelease[0]===0&&(_=!1);for(const N of v){if(E=E||N.operator===">"||N.operator===">=",w=w||N.operator==="<"||N.operator==="<=",y){if(R&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===R.major&&N.semver.minor===R.minor&&N.semver.patch===R.patch&&(R=!1),N.operator===">"||N.operator===">="){if(c=f(y,N,$),c===N&&c!==y)return!1}else if(y.operator===">="&&!n(y.semver,String(N),$))return!1}if(h){if(_&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===_.major&&N.semver.minor===_.minor&&N.semver.patch===_.patch&&(_=!1),N.operator==="<"||N.operator==="<="){if(d=i(h,N,$),d===N&&d!==h)return!1}else if(h.operator==="<="&&!n(h.semver,String(N),$))return!1}if(!N.operator&&(h||y)&&p!==0)return!1}return!(y&&w&&!h&&p!==0||h&&E&&!y&&p!==0||R||_)},f=(m,v,$)=>{if(!m)return v;const S=u(m.semver,v.semver,$);return S>0?m:S<0||v.operator===">"&&m.operator===">="?v:m},i=(m,v,$)=>{if(!m)return v;const S=u(m.semver,v.semver,$);return S<0?m:S>0||v.operator==="<"&&m.operator==="<="?v:m};return wo=s,wo}var Eo,Af;function S$(){if(Af)return Eo;Af=1;const e=ir(),t=ys(),r=ke(),n=Id(),u=Gt(),s=Qv(),o=e$(),a=t$(),l=r$(),f=n$(),i=s$(),m=i$(),v=o$(),$=Ye(),S=a$(),y=c$(),h=Wo(),p=u$(),c=l$(),d=vs(),w=Jo(),E=Nd(),_=Td(),R=Xo(),N=Yo(),C=Ad(),U=f$(),F=$s(),x=Ze(),I=_s(),A=h$(),V=m$(),L=p$(),K=y$(),B=g$(),G=Zo(),q=v$(),P=$$(),k=_$(),O=w$(),g=E$();return Eo={parse:u,valid:s,clean:o,inc:a,diff:l,major:f,minor:i,patch:m,prerelease:v,compare:$,rcompare:S,compareLoose:y,compareBuild:h,sort:p,rsort:c,gt:d,lt:w,eq:E,neq:_,gte:R,lte:N,cmp:C,coerce:U,Comparator:F,Range:x,satisfies:I,toComparators:A,maxSatisfying:V,minSatisfying:L,minVersion:K,validRange:B,outside:G,gtr:q,ltr:P,intersects:k,simplifyRange:O,subset:g,SemVer:r,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},Eo}var b$=S$();const Mt=jo(b$),R$=Object.prototype.toString,P$="[object Uint8Array]",O$="[object ArrayBuffer]";function jd(e,t,r){return e?e.constructor===t?!0:R$.call(e)===r:!1}function Cd(e){return jd(e,Uint8Array,P$)}function I$(e){return jd(e,ArrayBuffer,O$)}function N$(e){return Cd(e)||I$(e)}function T$(e){if(!Cd(e))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof e}\``)}function A$(e){if(!N$(e))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``)}function jf(e,t){if(e.length===0)return new Uint8Array(0);t??=e.reduce((u,s)=>u+s.length,0);const r=new Uint8Array(t);let n=0;for(const u of e)T$(u),r.set(u,n),n+=u.length;return r}const Cf={utf8:new globalThis.TextDecoder("utf8")};function kf(e,t="utf8"){return A$(e),Cf[t]??=new globalThis.TextDecoder(t),Cf[t].decode(e)}function j$(e){if(typeof e!="string")throw new TypeError(`Expected \`string\`, got \`${typeof e}\``)}const C$=new globalThis.TextEncoder;function So(e){return j$(e),C$.encode(e)}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));const k$=xv.default,qf="aes-256-cbc",Lt=()=>Object.create(null),q$=e=>e!=null,D$=(e,t)=>{const r=new Set(["undefined","symbol","function"]),n=typeof t;if(r.has(n))throw new TypeError(`Setting a value of type \`${n}\` for key \`${e}\` is not allowed as it's not supported by JSON`)},Xn="__internal__",bo=`${Xn}.migrations.version`;class M${path;events;#n;#t;#e;#r={};constructor(t={}){const r={configName:"config",fileExtension:"json",projectSuffix:"nodejs",clearInvalidConfig:!1,accessPropertiesByDotNotation:!0,configFileMode:438,...t};if(!r.cwd){if(!r.projectName)throw new Error("Please specify the `projectName` option.");r.cwd=Xm(r.projectName,{suffix:r.projectSuffix}).config}if(this.#e=r,r.schema??r.ajvOptions??r.rootSchema){if(r.schema&&typeof r.schema!="object")throw new TypeError("The `schema` option must be an object.");const o=new Dg.Ajv2020({allErrors:!0,useDefaults:!0,...r.ajvOptions});k$(o);const a={...r.rootSchema,type:"object",properties:r.schema};this.#n=o.compile(a);for(const[l,f]of Object.entries(r.schema??{}))f?.default&&(this.#r[l]=f.default)}r.defaults&&(this.#r={...this.#r,...r.defaults}),r.serialize&&(this._serialize=r.serialize),r.deserialize&&(this._deserialize=r.deserialize),this.events=new EventTarget,this.#t=r.encryptionKey;const n=r.fileExtension?`.${r.fileExtension}`:"";this.path=pe.default.resolve(r.cwd,`${r.configName??"config"}${n}`);const u=this.store,s=Object.assign(Lt(),r.defaults,u);if(r.migrations){if(!r.projectVersion)throw new Error("Please specify the `projectVersion` option.");this._migrate(r.migrations,r.projectVersion,r.beforeEachMigration)}this._validate(s);try{yh.default.deepEqual(u,s)}catch{this.store=s}r.watch&&this._watch()}get(t,r){if(this.#e.accessPropertiesByDotNotation)return this._get(t,r);const{store:n}=this;return t in n?n[t]:r}set(t,r){if(typeof t!="string"&&typeof t!="object")throw new TypeError(`Expected \`key\` to be of type \`string\` or \`object\`, got ${typeof t}`);if(typeof t!="object"&&r===void 0)throw new TypeError("Use `delete()` to clear values");if(this._containsReservedKey(t))throw new TypeError(`Please don't use the ${Xn} key, as it's used to manage this module internal operations.`);const{store:n}=this,u=(s,o)=>{D$(s,o),this.#e.accessPropertiesByDotNotation?Xa(n,s,o):n[s]=o};if(typeof t=="object"){const s=t;for(const[o,a]of Object.entries(s))u(o,a)}else u(t,r);this.store=n}has(t){return this.#e.accessPropertiesByDotNotation?Bm(this.store,t):t in this.store}reset(...t){for(const r of t)q$(this.#r[r])&&this.set(r,this.#r[r])}delete(t){const{store:r}=this;this.#e.accessPropertiesByDotNotation?Km(r,t):delete r[t],this.store=r}clear(){this.store=Lt();for(const t of Object.keys(this.#r))this.reset(t)}onDidChange(t,r){if(typeof t!="string")throw new TypeError(`Expected \`key\` to be of type \`string\`, got ${typeof t}`);if(typeof r!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof r}`);return this._handleChange(()=>this.get(t),r)}onDidAnyChange(t){if(typeof t!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof t}`);return this._handleChange(()=>this.store,t)}get size(){return Object.keys(this.store).length}get store(){try{const t=ce.default.readFileSync(this.path,this.#t?null:"utf8"),r=this._encryptData(t),n=this._deserialize(r);return this._validate(n),Object.assign(Lt(),n)}catch(t){if(t?.code==="ENOENT")return this._ensureDirectory(),Lt();if(this.#e.clearInvalidConfig&&t.name==="SyntaxError")return Lt();throw t}}set store(t){this._ensureDirectory(),this._validate(t),this._write(t),this.events.dispatchEvent(new Event("change"))}*[Symbol.iterator](){for(const[t,r]of Object.entries(this.store))yield[t,r]}_encryptData(t){if(!this.#t)return typeof t=="string"?t:kf(t);try{const r=t.slice(0,16),n=xt.default.pbkdf2Sync(this.#t,r.toString(),1e4,32,"sha512"),u=xt.default.createDecipheriv(qf,n,r),s=t.slice(17),o=typeof s=="string"?So(s):s;return kf(jf([u.update(o),u.final()]))}catch{}return t.toString()}_handleChange(t,r){let n=t();const u=()=>{const s=n,o=t();Pe.isDeepStrictEqual(o,s)||(n=o,r.call(this,o,s))};return this.events.addEventListener("change",u),()=>{this.events.removeEventListener("change",u)}}_deserialize=t=>JSON.parse(t);_serialize=t=>JSON.stringify(t,void 0,"	");_validate(t){if(!this.#n||this.#n(t)||!this.#n.errors)return;const n=this.#n.errors.map(({instancePath:u,message:s=""})=>`\`${u.slice(1)}\` ${s}`);throw new Error("Config schema violation: "+n.join("; "))}_ensureDirectory(){ce.default.mkdirSync(pe.default.dirname(this.path),{recursive:!0})}_write(t){let r=this._serialize(t);if(this.#t){const n=xt.default.randomBytes(16),u=xt.default.pbkdf2Sync(this.#t,n.toString(),1e4,32,"sha512"),s=xt.default.createCipheriv(qf,u,n);r=jf([n,So(":"),s.update(So(r)),s.final()])}if(we.default.env.SNAP)ce.default.writeFileSync(this.path,r,{mode:this.#e.configFileMode});else try{md(this.path,r,{mode:this.#e.configFileMode})}catch(n){if(n?.code==="EXDEV"){ce.default.writeFileSync(this.path,r,{mode:this.#e.configFileMode});return}throw n}}_watch(){this._ensureDirectory(),ce.default.existsSync(this.path)||this._write(Lt()),we.default.platform==="win32"?ce.default.watch(this.path,{persistent:!1},Fl(()=>{this.events.dispatchEvent(new Event("change"))},{wait:100})):ce.default.watchFile(this.path,{persistent:!1},Fl(()=>{this.events.dispatchEvent(new Event("change"))},{wait:5e3}))}_migrate(t,r,n){let u=this._get(bo,"0.0.0");const s=Object.keys(t).filter(a=>this._shouldPerformMigration(a,u,r));let o={...this.store};for(const a of s)try{n&&n(this,{fromVersion:u,toVersion:a,finalVersion:r,versions:s});const l=t[a];l?.(this),this._set(bo,a),u=a,o={...this.store}}catch(l){throw this.store=o,new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${l}`)}(this._isVersionInRangeFormat(u)||!Mt.eq(u,r))&&this._set(bo,r)}_containsReservedKey(t){return typeof t=="object"&&Object.keys(t)[0]===Xn?!0:typeof t!="string"?!1:this.#e.accessPropertiesByDotNotation?!!t.startsWith(`${Xn}.`):!1}_isVersionInRangeFormat(t){return Mt.clean(t)===null}_shouldPerformMigration(t,r,n){return this._isVersionInRangeFormat(t)?r!=="0.0.0"&&Mt.satisfies(r,t)?!1:Mt.satisfies(n,t):!(Mt.lte(t,r)||Mt.gt(t,n))}_get(t,r){return xm(this.store,t,r)}_set(t,r){const{store:n}=this;Xa(n,t,r),this.store=n}}const{app:Yn,ipcMain:Ao,shell:L$}=Uf.default;let Df=!1;const Mf=()=>{if(!Ao||!Yn)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");const e={defaultCwd:Yn.getPath("userData"),appVersion:Yn.getVersion()};return Df||(Ao.on("electron-store-get-data",t=>{t.returnValue=e}),Df=!0),e};class F$ extends M${constructor(t){let r,n;if(we.default.type==="renderer"){const u=Uf.default.ipcRenderer.sendSync("electron-store-get-data");if(!u)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");({defaultCwd:r,appVersion:n}=u)}else Ao&&Yn&&({defaultCwd:r,appVersion:n}=Mf());t={name:"config",...t},t.projectVersion||=n,t.cwd?t.cwd=pe.default.isAbsolute(t.cwd)?t.cwd:pe.default.join(r,t.cwd):t.cwd=r,t.configName=t.name,delete t.name,super(t)}static initRenderer(){Mf()}async openInEditor(){const t=await L$.openPath(this.path);if(t)throw new Error(t)}}const V$=Object.freeze(Object.defineProperty({__proto__:null,default:F$},Symbol.toStringTag,{value:"Module"}));
